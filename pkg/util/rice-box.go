// Code generated by rice embed-go; DO NOT EDIT.
package util

import (
	"time"

	"github.com/GeertJohan/go.rice/embedded"
)

func init() {

	// define files
	file2 := &embedded.EmbeddedFile{
		Filename:    ".DS_Store",
		FileModTime: time.Unix(1752741663, 0),

		Content: string("\x00\x00\x00\x01Bud1\x00\x00\x10\x00\x00\x00\b\x00\x00\x00\x10\x00\x00\x00\x02\t\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\b\x00\x00\x00\b\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x02\x00\x00\x00\x00\x00\x00\x00\x06\x00\x00\x00\x01\x00\x00\x10\x00\x00p\x00t\x00sbwspbl\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x06\x00\x00\x00\a\x00s\x00c\x00r\x00i\x00p\x00t\x00sbwspblob\x00\x00\x00\xb8bplist00\xd6\x01\x02\x03\x04\x05\x06\a\b\b\b\v\b]ShowStatusBar[ShowToolbar[ShowTabView_\x10\x14ContainerShowSidebar\\WindowBounds[ShowSidebar\b\t\t\t_\x10\x18{{820, 753}, {920, 436}}\t\b\x15#/;R_klmno\x8a\x00\x00\x00\x00\x00\x00\x01\x01\x00\x00\x00\x00\x00\x00\x00\r\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x8b\x00\x00\x00\a\x00s\x00c\x00r\x00i\x00p\x00t\x00slg1Scomp\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\a\x00s\x00c\x00r\x00i\x00p\x00t\x00smoDDblob\x00\x00\x00\b-}\x9b<w\x14\xc7A\x00\x00\x00\a\x00s\x00c\x00r\x00i\x00p\x00t\x00smodDblob\x00\x00\x00\b-}\x9b<w\x14\xc7A\x00\x00\x00\a\x00s\x00c\x00r\x00i\x00p\x00t\x00sph1Scomp\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\a\x00s\x00c\x00r\x00i\x00p\x00t\x00svSrnlong\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\b\v\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00 \x00\x00\x00\x01\x00\x00\x00@\x00\x00\x00\x01\x00\x00\x00\x80\x00\x00\x00\x01\x00\x00\x01\x00\x00\x00\x00\x01\x00\x00\x02\x00\x00\x00\x00\x01\x00\x00\x04\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x10\x00\x00\x00\x00\x01\x00\x00 \x00\x00\x00\x00\x01\x00\x00@\x00\x00\x00\x00\x01\x00\x00\x80\x00\x00\x00\x00\x01\x00\x01\x00\x00\x00\x00\x00\x01\x00\x02\x00\x00\x00\x00\x00\x01\x00\x04\x00\x00\x00\x00\x00\x01\x00\b\x00\x00\x00\x00\x00\x01\x00\x10\x00\x00\x00\x00\x00\x01\x00 \x00\x00\x00\x00\x00\x01\x00@\x00\x00\x00\x00\x00\x01\x00\x80\x00\x00\x00\x00\x00\x01\x01\x00\x00\x00\x00\x00\x00\x01\x02\x00\x00\x00\x00\x00\x00\x01\x04\x00\x00\x00\x00\x00\x00\x01\b\x00\x00\x00\x00\x00\x00\x01\x10\x00\x00\x00\x00\x00\x00\x01 \x00\x00\x00\x00\x00\x00\x01@\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x03\x00\x00\x00\x00\x00\x00\x10\v\x00\x00\x00E\x00\x00\x02\t\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x04DSDB\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x02\x00\x00\x00 \x00\x00\x00`\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00\x80\x00\x00\x00\x01\x00\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x04\x00\x00\x00\x00\x02\x00\x00\b\x00\x00\x00\x18\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00 \x00\x00\x00\x00\x01\x00\x00@\x00\x00\x00\x00\x01\x00\x00\x80\x00\x00\x00\x00\x01\x00\x01\x00\x00\x00\x00\x00\x01\x00\x02\x00\x00\x00\x00\x00\x01\x00\x04\x00\x00\x00\x00\x00\x01\x00\b\x00\x00\x00\x00\x00\x01\x00\x10\x00\x00\x00\x00\x00\x01\x00 \x00\x00\x00\x00\x00\x01\x00@\x00\x00\x00\x00\x00\x01\x00\x80\x00\x00\x00\x00\x00\x01\x01\x00\x00\x00\x00\x00\x00\x01\x02\x00\x00\x00\x00\x00\x00\x01\x04\x00\x00\x00\x00\x00\x00\x01\b\x00\x00\x00\x00\x00\x00\x01\x10\x00\x00\x00\x00\x00\x00\x01 \x00\x00\x00\x00\x00\x00\x01@\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00"),
	}
	file4 := &embedded.EmbeddedFile{
		Filename:    "agent/check_prereqs.sh",
		FileModTime: time.Unix(1770218653, 0),

		Content: string("#!/bin/sh\nset -x\n\n# Check if running as root or via sudo \nif [ \"$(id -u)\" -ne 0 ]; then\n\techo \"Error: This script must be run as root or via sudo\"\n\techo \"   Please run: sudo \\$0 \\$*\"\n\texit 1\nfi\n\n# Check can sudo without password (when re-executed or for subcommands)\nif ! $(sudo ls /tmp/ > /dev/null); then\n\tMSG=\"Unable to successfully use sudo with user $USER on this host.\\nUser $USER must be in sudoers group and using sudo without password must be enabled.\\nPlease see docs.datasance.com documentation for more details.\"\n\techo $MSG\n\texit 1\nfi\n"),
	}
	file5 := &embedded.EmbeddedFile{
		Filename:    "agent/init.sh",
		FileModTime: time.Unix(1770218728, 0),

		Content: string("#!/bin/sh\n# Script to detect Linux distribution and version\n# Used as a precursor for system-specific installations\n\n# Exit on error and print commands for debugging\nset -e\nset -x\n\n# Define user variable\nuser=\"$(id -un 2>/dev/null || true)\"\n\n# Check if a command exists\ncommand_exists() {\n    command -v \"$@\" > /dev/null 2>&1\n}\n\n# Detect the Linux distribution\nget_distribution() {\n    lsb_dist=\"\"\n    dist_version=\"\"\n    \n    # Every system that we officially support has /etc/os-release\n    if [ -r /etc/os-release ]; then\n        \n        lsb_dist=\"$(. /etc/os-release && echo \"$ID\")\"\n        \n        dist_version=\"$(. /etc/os-release && echo \"$VERSION_ID\")\"\n        lsb_dist=\"$(echo \"$lsb_dist\" | tr '[:upper:]' '[:lower:]')\"\n    else\n        echo \"Error: Unsupported Linux distribution! /etc/os-release not found.\"\n        exit 1\n    fi\n    \n    echo \"# Detected distribution: $lsb_dist (version: $dist_version)\"\n}\n\n# Check if this is a forked Linux distro\ncheck_forked() {\n    # Skip if lsb_release doesn't exist\n    if ! command_exists lsb_release; then\n        return\n    fi\n    \n    # Check if the `-u` option is supported\n    set +e\n    lsb_release -a > /dev/null 2>&1\n    lsb_release_exit_code=$?\n    set -e\n\n    # Check if the command has exited successfully, it means we're in a forked distro\n    if [ \"$lsb_release_exit_code\" = \"0\" ]; then\n        # Get the upstream release info\n        current_lsb_dist=$(lsb_release -a 2>&1 | tr '[:upper:]' '[:lower:]' | grep -E 'id' | cut -d ':' -f 2 | tr -d '[:space:]')\n        current_dist_version=$(lsb_release -a 2>&1 | tr '[:upper:]' '[:lower:]' | grep -E 'codename' | cut -d ':' -f 2 | tr -d '[:space:]')\n\n        # Print info about current distro\n        echo \"You're using '$current_lsb_dist' version '$current_dist_version'.\"\n        \n        # Check if current is different from detected (indicating a fork)\n        if [ \"$current_lsb_dist\" != \"$lsb_dist\" ] || [ \"$current_dist_version\" != \"$dist_version\" ]; then\n            echo \"Upstream release is '$lsb_dist' version '$dist_version'.\"\n        fi\n    else\n        # Additional checks for specific distros that might not be properly detected\n        if [ -r /etc/debian_version ] && [ \"$lsb_dist\" != \"ubuntu\" ] && [ \"$lsb_dist\" != \"raspbian\" ]; then\n            if [ \"$lsb_dist\" = \"osmc\" ]; then\n                # OSMC runs Raspbian\n                lsb_dist=raspbian\n            else\n                # We're Debian and don't even know it!\n                lsb_dist=debian\n            fi\n            # Get Debian version and map it to codename\n            dist_version=\"$(sed 's/\\/.*//' /etc/debian_version | sed 's/\\..*//')\"\n            case \"$dist_version\" in\n                14)\n                    dist_version=\"forky\"\n                ;;\n                13)\n                    dist_version=\"trixie\"\n                ;;\n                12)\n                    dist_version=\"bookworm\"\n                ;;\n                11)\n                    dist_version=\"bullseye\"\n                ;;\n                10)\n                    dist_version=\"buster\"\n                ;;\n                9)\n                    dist_version=\"stretch\"\n                ;;\n                8|'Kali Linux 2')\n                    dist_version=\"jessie\"\n                ;;\n                7)\n                    dist_version=\"wheezy\"\n                ;;\n            esac\n        elif [ -r /etc/redhat-release ] && [ -z \"$lsb_dist\" ]; then\n            lsb_dist=redhat\n            # Extract version from redhat-release file\n            dist_version=\"$(sed 's/.*release \\([0-9.]*\\).*/\\1/' /etc/redhat-release)\"\n        fi\n    fi\n}\n\n# Set up sudo command if necessary\nsetup_sudo() {\n    sh_c='sh -c'\n    if [ \"$user\" != 'root' ]; then\n        if command_exists sudo; then\n            sh_c='sudo -E sh -c'\n        elif command_exists su; then\n            sh_c='su -c'\n        else\n            echo \"Error: this installer needs the ability to run commands as root.\"\n            echo \"We are unable to find either 'sudo' or 'su' available to make this happen.\"\n            exit 1\n        fi\n    fi\n    echo \"# Using command executor: $sh_c\"\n}\n\n# Refine distribution version detection based on the distro\nrefine_distribution_version() {\n    case \"$lsb_dist\" in\n        ubuntu)\n            if command_exists lsb_release; then\n                dist_version=\"$(lsb_release --codename | cut -f2)\"\n            fi\n            if [ -z \"$dist_version\" ] && [ -r /etc/lsb-release ]; then\n                \n                dist_version=\"$(. /etc/lsb-release && echo \"$DISTRIB_CODENAME\")\"\n            fi\n        ;;\n\n        debian|raspbian)\n            # If we only have a number, map it to a codename for better recognition\n            if echo \"$dist_version\" | grep -qE '^[0-9]+$'; then\n                case \"$dist_version\" in\n                    14)\n                        dist_version=\"forky\"\n                    ;;\n                    13)\n                        dist_version=\"trixie\"\n                    ;;\n                    12)\n                        dist_version=\"bookworm\"\n                    ;;\n                    11)\n                        dist_version=\"bullseye\"\n                    ;;\n                    10)\n                        # Handle special case for Buster\n                        dist_version=\"buster\"\n                        if [ \"$user\" = 'root' ]; then\n                            apt-get update --allow-releaseinfo-change || true\n                        elif command_exists sudo; then\n                            sudo apt-get update --allow-releaseinfo-change || true\n                        fi\n                    ;;\n                    9)\n                        dist_version=\"stretch\"\n                    ;;\n                    8)\n                        dist_version=\"jessie\"\n                    ;;\n                    7)\n                        dist_version=\"wheezy\"\n                    ;;\n                esac\n            fi\n        ;;\n\n        centos|rhel|fedora|ol)\n            # Make sure we have a version number\n            if [ -z \"$dist_version\" ] && [ -r /etc/os-release ]; then\n                \n                dist_version=\"$(. /etc/os-release && echo \"$VERSION_ID\")\"\n            fi\n            if [ -z \"$dist_version\" ] && [ -r /etc/redhat-release ]; then\n                dist_version=\"$(sed 's/.*release \\([0-9.]*\\).*/\\1/' /etc/redhat-release)\"\n            fi\n        ;;\n\n        sles|opensuse)\n            if [ -z \"$dist_version\" ] && [ -r /etc/os-release ]; then\n                dist_version=\"$(. /etc/os-release && echo \"$VERSION_ID\")\"\n            fi\n            # Fallback for older versions\n            if [ -z \"$dist_version\" ] && [ -r /etc/SuSE-release ]; then\n                dist_version=\"$(grep VERSION /etc/SuSE-release | sed 's/^VERSION = //')\"\n            fi\n            # Ensure version is in the correct format (e.g., 15.4 for SLES 15 SP4)\n            if [ -n \"$dist_version\" ]; then\n                # Remove any non-numeric characters except dots\n                dist_version=\"$(echo \"$dist_version\" | sed 's/[^0-9.]//g')\"\n            fi\n            # Normalize distribution name\n            if [ \"$lsb_dist\" = \"sles\" ]; then\n                lsb_dist=\"sles\"\n            elif [ \"$lsb_dist\" = \"opensuse\" ]; then\n                lsb_dist=\"opensuse\"\n            fi\n        ;;\n\n        *)\n            if command_exists lsb_release; then\n                dist_version=\"$(lsb_release --release | cut -f2)\"\n            fi\n            if [ -z \"$dist_version\" ] && [ -r /etc/os-release ]; then\n                \n                dist_version=\"$(. /etc/os-release && echo \"$VERSION_ID\")\"\n            fi\n        ;;\n    esac\n}\n\n# Detect init system \ndetect_init_system() {\n    if command -v systemctl >/dev/null 2>&1 && [ -d /etc/systemd/system ]; then\n        INIT_SYSTEM=\"systemd\"\n    elif [ -f /sbin/init ] && /sbin/init --version 2>/dev/null | grep -q upstart; then\n        INIT_SYSTEM=\"upstart\"\n    elif command -v openrc >/dev/null 2>&1 || [ -f /sbin/openrc ]; then\n        INIT_SYSTEM=\"openrc\"\n    elif [ -d /etc/s6 ] || command -v s6-svc >/dev/null 2>&1; then\n        INIT_SYSTEM=\"s6\"\n    elif command -v runit >/dev/null 2>&1 || [ -d /etc/runit ]; then\n        INIT_SYSTEM=\"runit\"\n    elif [ -d /etc/init.d ]; then\n        INIT_SYSTEM=\"sysvinit\"\n    else\n        INIT_SYSTEM=\"unknown\"\n    fi\n    export INIT_SYSTEM\n    echo \"# Detected init system: $INIT_SYSTEM\"\n}\n\n# Detect package type (deb, rpm, or other)\ndetect_package_type() {\n    case \"$lsb_dist\" in\n        debian|ubuntu|raspbian|mendel)\n            PACKAGE_TYPE=\"deb\"\n            ;;\n        fedora|centos|rhel|ol|sles|opensuse*)\n            PACKAGE_TYPE=\"rpm\"\n            ;;\n        *)\n            if command_exists apt-get || command_exists dpkg; then\n                PACKAGE_TYPE=\"deb\"\n            elif command_exists yum || command_exists dnf || command_exists zypper; then\n                PACKAGE_TYPE=\"rpm\"\n            else\n                PACKAGE_TYPE=\"other\"\n            fi\n            ;;\n    esac\n    export PACKAGE_TYPE\n    echo \"# Detected package type: $PACKAGE_TYPE\"\n}\n\n# Init function\ninit() {\n    # Detect basic distribution info\n    get_distribution\n    \n    # Set up sudo for privileged commands\n    setup_sudo\n    \n    # Refine version information\n    refine_distribution_version\n    \n    # Check if this is a forked distro\n    check_forked\n    \n    # Detect init system and package type (for universal OS/init support)\n    detect_init_system\n    detect_package_type\n    \n    # Print final distribution information\n    echo \"----------------------------------------\"\n    echo \"Linux Distribution: $lsb_dist\"\n    echo \"Version: $dist_version\"\n    echo \"Init system: $INIT_SYSTEM\"\n    echo \"Package type: $PACKAGE_TYPE\"\n    echo \"----------------------------------------\"\n    \n}\n"),
	}
	file6 := &embedded.EmbeddedFile{
		Filename:    "agent/install_container_engine.sh",
		FileModTime: time.Unix(1770218745, 0),

		Content: string("#!/bin/sh\n# Script to install Docker/Podman based on Linux distribution\n# Sources init.sh for distribution detection\n\nset -x\nset -e\n\nCONTAINER_ENGINE_MSG=\"This operating system does not support automatic container engine installation. Please install Docker 25+ or Podman 4+ on the target host and re-run, or use an airgap deployment with a pre-installed engine.\"\n\n# Check Docker version (need >= 25). Sets docker_version_num for comparison.\ncheck_docker_version() {\n    docker_version_num=0\n    if command -v docker >/dev/null 2>&1; then\n        raw=$(docker -v 2>/dev/null | sed -n 's/.*version \\([0-9][0-9]*\\.[0-9][0-9]*\\).*/\\1/p' | tr -d '.')\n        [ -n \"$raw\" ] && docker_version_num=\"$raw\"\n    fi\n    [ \"$docker_version_num\" -ge 2500 ] 2>/dev/null || return 1\n}\n\n# Check Podman version (need >= 4). Sets podman_version_num for comparison.\ncheck_podman_version() {\n    podman_version_num=0\n    if command -v podman >/dev/null 2>&1; then\n        raw=$(podman --version 2>/dev/null | sed -n 's/.*version \\([0-9][0-9]*\\).*/\\1/p')\n        [ -n \"$raw\" ] && podman_version_num=\"$raw\"\n    fi\n    [ \"$podman_version_num\" -ge 4 ] 2>/dev/null || return 1\n}\n\n# Start Docker daemon (init-aware)\nstart_docker() {\n    set +e\n    if $sh_c \"docker ps\" >/dev/null 2>&1; then\n        set -e\n        return 0\n    fi\n    err_code=1\n    case \"${INIT_SYSTEM:-unknown}\" in\n        systemd)\n            $sh_c \"systemctl start docker\" >/dev/null 2>&1\n            err_code=$?\n            ;;\n        sysvinit)\n            $sh_c \"service docker start\" >/dev/null 2>&1 || $sh_c \"/etc/init.d/docker start\" >/dev/null 2>&1\n            err_code=$?\n            ;;\n        openrc)\n            $sh_c \"rc-service docker start\" >/dev/null 2>&1\n            err_code=$?\n            ;;\n        *)\n            $sh_c \"/etc/init.d/docker start\" >/dev/null 2>&1\n            err_code=$?\n            [ $err_code -ne 0 ] && $sh_c \"systemctl start docker\" >/dev/null 2>&1 && err_code=0\n            [ $err_code -ne 0 ] && $sh_c \"service docker start\" >/dev/null 2>&1 && err_code=0\n            [ $err_code -ne 0 ] && $sh_c \"snap start docker\" >/dev/null 2>&1 && err_code=0\n            ;;\n    esac\n    set -e\n    if [ $err_code -ne 0 ]; then\n        echo \"Could not start Docker daemon\"\n        exit 1\n    fi\n}\n\n# Start Podman (init-aware)\nstart_podman() {\n    set +e\n    case \"${INIT_SYSTEM:-unknown}\" in\n        systemd)\n            $sh_c \"systemctl start podman\" >/dev/null 2>&1\n            $sh_c \"systemctl start podman.socket\" >/dev/null 2>&1\n            ;;\n        sysvinit)\n            $sh_c \"service podman start\" >/dev/null 2>&1 || $sh_c \"/etc/init.d/podman start\" >/dev/null 2>&1\n            ;;\n        openrc)\n            $sh_c \"rc-service podman start\" >/dev/null 2>&1\n            ;;\n        *)\n            $sh_c \"systemctl start podman\" >/dev/null 2>&1 || true\n            $sh_c \"systemctl start podman.socket\" >/dev/null 2>&1 || true\n            $sh_c \"service podman start\" >/dev/null 2>&1 || true\n            ;;\n    esac\n    set -e\n}\n\n\ndo_modify_daemon() {\n    # Skip for Podman installations\n    if [ \"$USE_PODMAN\" = \"true\" ]; then\n        echo \"# Configuring Podman for CDI directory support...\"\n\n        # Create CDI directories\n        $sh_c \"mkdir -p /etc/cdi /var/run/cdi\"\n\n        # Ensure /etc/containers exists\n        $sh_c \"mkdir -p /etc/containers\"\n\n        # Create containers.conf if it doesn't exist\n        if [ ! -f \"/etc/containers/containers.conf\" ]; then\n            $sh_c 'cat > /etc/containers/containers.conf <<EOF\n[engine]\nruntime = \"crun\"\ncdi_spec_dirs = [\"/etc/cdi\", \"/var/run/cdi\"]\nEOF'\n        else\n            # Check if [engine] block exists\n            if grep -q \"^\\[engine\\]\" /etc/containers/containers.conf; then\n                # Ensure runtime is set under [engine]\n                if grep -q \"^runtime\" /etc/containers/containers.conf; then\n                    $sh_c \"sed -i 's|^runtime *=.*|runtime = \\\"crun\\\"|' /etc/containers/containers.conf\"\n                else\n                    $sh_c \"sed -i '/^\\[engine\\]/a runtime = \\\"crun\\\"' /etc/containers/containers.conf\"\n                fi\n\n                # Ensure cdi_spec_dirs is set under [engine]\n                if grep -q \"^cdi_spec_dirs\" /etc/containers/containers.conf; then\n                    $sh_c \"sed -i 's|^cdi_spec_dirs *=.*|cdi_spec_dirs = [\\\"/etc/cdi\\\", \\\"/var/run/cdi\\\"]|' /etc/containers/containers.conf\"\n                else\n                    $sh_c \"sed -i '/^\\[engine\\]/a cdi_spec_dirs = [\\\"/etc/cdi\\\", \\\"/var/run/cdi\\\"]' /etc/containers/containers.conf\"\n                fi\n            else\n                # Append full engine block if missing\n                $sh_c 'echo -e \"\\n[engine]\\nruntime = \\\"crun\\\"\\ncdi_spec_dirs = [\\\"/etc/cdi\\\", \\\"/var/run/cdi\\\"]\" >> /etc/containers/containers.conf'\n            fi\n        fi\n\n        # Enable and start Podman (init-aware)\n        case \"${INIT_SYSTEM:-unknown}\" in\n            systemd)\n                $sh_c \"systemctl enable podman\" 2>/dev/null || true\n                $sh_c \"systemctl enable podman.socket\" 2>/dev/null || true\n                ;;\n            openrc)\n                $sh_c \"rc-update add podman default\" 2>/dev/null || true\n                ;;\n            sysvinit)\n                $sh_c \"update-rc.d podman defaults\" 2>/dev/null || $sh_c \"chkconfig podman on\" 2>/dev/null || true\n                ;;\n            *) ;;\n        esac\n        start_podman\n        return\n    fi\n    \n    # Original Docker daemon configuration\n    if [ ! -f /etc/docker/daemon.json ]; then\n        echo \"Creating /etc/docker/daemon.json...\"\n        $sh_c \"mkdir -p /etc/docker\"\n        $sh_c 'cat > /etc/docker/daemon.json << EOF\n{\n\t\"storage-driver\": \"overlayfs\",\n    \"features\": {\n        \"containerd-snapshotter\": true,\n        \"cdi\": true\n    },\n    \"cdi-spec-dirs\": [\"/etc/cdi/\", \"/var/run/cdi\"]\n}\nEOF'\n    else\n        echo \"/etc/docker/daemon.json already exists\"\n    fi\n    echo \"Restarting Docker daemon...\"\n    case \"${INIT_SYSTEM:-unknown}\" in\n        systemd)\n            $sh_c \"systemctl daemon-reload\"\n            $sh_c \"systemctl restart docker\"\n            ;;\n        *)\n            $sh_c \"systemctl daemon-reload\" 2>/dev/null || true\n            $sh_c \"systemctl restart docker\" 2>/dev/null || start_docker\n            ;;\n    esac\n}\n\ndo_set_datasance_repo() {\n    echo \"# Setting up Datasance repository for $lsb_dist...\"\n    \n    case \"$lsb_dist\" in\n        fedora|centos|rhel|ol|sles|opensuse*)\n            # RPM-based distros\n            $sh_c \"cd /etc/yum.repos.d && curl -s https://downloads.datasance.com/datasance.repo -LO\"\n            if [ \"$lsb_dist\" = \"fedora\" ] || [ \"$lsb_dist\" = \"centos\" ] || [ \"$lsb_dist\" = \"rhel\" ] || [ \"$lsb_dist\" = \"ol\" ]; then\n                $sh_c \"yum update -y\"\n            else\n                $sh_c \"zypper refresh\"\n            fi\n        ;;\n        debian|ubuntu|raspbian|*)\n            # DEB-based distros\n            $sh_c \"apt update -qy\"\n            $sh_c \"apt install -qy debian-archive-keyring apt-transport-https\"\n            $sh_c \"wget -qO- https://downloads.datasance.com/datasance.gpg | tee /etc/apt/trusted.gpg.d/datasance.gpg >/dev/null\"\n            $sh_c \"echo 'deb [arch=all signed-by=/etc/apt/trusted.gpg.d/datasance.gpg] https://downloads.datasance.com/deb stable main' | tee /etc/apt/sources.list.d/datasance.list >/dev/null\"\n            $sh_c \"apt update -qy\"\n        ;;\n    esac\n}\n\ndo_install_wasm_shim() {\n    echo \"# Installing WebAssembly runtime support for $lsb_dist...\"\n    arch=$(uname -m)\n\n    # Normalize architecture for consistency\n    case \"$arch\" in\n        arm64|aarch64|armv7l|armv8) arch=\"aarch64\" ;;\n        amd64|x86_64) arch=\"x86_64\" ;;\n    esac\n\n    if [ \"$USE_PODMAN\" = \"true\" ]; then\n        case \"$lsb_dist\" in\n            fedora|centos|rhel|ol)\n                $sh_c \"yum install -y crun crun-wasm\"\n            ;;\n            sles|opensuse*)\n                $sh_c \"zypper install -y crun\"\n                # Note: crun-wasm might not be available in SUSE repos\n                # In that case, we'll need to use the standard crun\n            ;;\n        esac\n        \n    else\n        # Original containerd WASM shim installation for Docker\n        case \"$lsb_dist\" in\n            debian|raspbian|ubuntu)\n                $sh_c \"apt update -qy\" || { echo \"Failed to update apt packages\"; exit 1; }\n\n                if [ \"$arch\" = \"aarch64\" ]; then\n                    $sh_c \"apt install -qy containerd-shim-wasmedge-v1-aarch64-linux-gnu\"\n                    $sh_c \"apt install -qy containerd-shim-wasmer-v1-aarch64-linux-gnu\"\n                    $sh_c \"apt install -qy containerd-shim-wasmtime-v1-aarch64-linux-gnu\"\n                elif [ \"$arch\" = \"x86_64\" ]; then\n                    $sh_c \"apt install -qy containerd-shim-wasmedge-v1-x86-64-linux-gnu\"\n                    $sh_c \"apt install -qy containerd-shim-wasmer-v1-x86-64-linux-gnu\"\n                    $sh_c \"apt install -qy containerd-shim-wasmtime-v1-x86-64-linux-gnu\"\n                else\n                    echo \"Unsupported architecture: $arch for $lsb_dist\"\n                    exit 1\n                fi\n            ;;\n            *)\n                echo \"Unsupported OS: $lsb_dist\"\n                exit 1\n            ;;\n        esac\n    fi\n}\n\ndo_install_container_engine() {\n    # PACKAGE_TYPE other: only check engine presence/version, do not install\n    if [ \"$PACKAGE_TYPE\" = \"other\" ]; then\n        if check_docker_version; then\n            USE_PODMAN=\"false\"\n            echo \"# Docker (>= 25) found; using Docker.\"\n            start_docker\n            do_modify_daemon\n            return 0\n        fi\n        if check_podman_version; then\n            USE_PODMAN=\"true\"\n            echo \"# Podman (>= 4) found; using Podman.\"\n            do_modify_daemon\n            return 0\n        fi\n        echo \"Error: $CONTAINER_ENGINE_MSG\"\n        exit 1\n    fi\n\n    if [ \"$USE_PODMAN\" = \"true\" ]; then\n        echo \"# Installing Podman and related packages...\"\n        case \"$lsb_dist\" in\n            fedora|centos|rhel|ol)\n                $sh_c \"yum install -y podman crun podman-docker\"\n            ;;\n            sles|opensuse*)\n                $sh_c \"zypper install -y podman crun podman-docker\"\n            ;;\n        esac\n        if ! check_podman_version; then\n            echo \"Error: Podman 4+ is required. Please upgrade Podman.\"\n            exit 1\n        fi\n        do_modify_daemon\n        return\n    fi\n\n    # Docker: check existing version first\n    if command_exists docker; then\n        docker_version=$(docker -v 2>/dev/null | sed -n 's/.*version \\([0-9][0-9]*\\.[0-9][0-9]*\\).*/\\1/p' | tr -d '.')\n        if [ -n \"$docker_version\" ] && [ \"$docker_version\" -ge 2500 ] 2>/dev/null; then\n            echo \"# Docker already installed (>= 25)\"\n            start_docker\n            do_modify_daemon\n            return\n        fi\n    fi\n\n    echo \"# Installing Docker...\"\n    case \"$lsb_dist\" in\n        debian|ubuntu|raspbian)\n            case \"$dist_version\" in\n                \"stretch\")\n                    $sh_c \"apt install -y apt-transport-https ca-certificates curl gnupg2 software-properties-common\"\n                    curl -fsSL https://download.docker.com/linux/debian/gpg | $sh_c \"apt-key add -\"\n                    $sh_c \"add-apt-repository \\\"deb [arch=$(dpkg --print-architecture)] https://download.docker.com/linux/debian $(lsb_release -cs) stable\\\"\"\n                    $sh_c \"apt update -y\"\n                    $sh_c \"apt install -y docker-ce\"\n                ;;\n                *)\n                    curl -fsSL https://get.docker.com/ | $sh_c \"sh\"\n                ;;\n            esac\n        ;;\n        *)\n            curl -fsSL https://get.docker.com/ | $sh_c \"sh\"\n        ;;\n    esac\n\n    if ! command_exists docker; then\n        echo \"Failed to install Docker\"\n        exit 1\n    fi\n    if ! check_docker_version; then\n        echo \"Error: Docker 25+ is required. Please upgrade Docker.\"\n        exit 1\n    fi\n    start_docker\n    do_modify_daemon\n}\n\n# Check if we should use Podman based on distribution\ndetermine_container_engine() {\n    USE_PODMAN=\"false\"\n    case \"$lsb_dist\" in\n        fedora|centos|rhel|ol|sles|opensuse*)\n            USE_PODMAN=\"true\"\n            echo \"# Using Podman for $lsb_dist\"\n        ;;\n        *)\n            echo \"# Using Docker for $lsb_dist\"\n        ;;\n    esac\n}\n\n# Source init.sh to get distribution info\n. /etc/iofog/agent/init.sh\ninit\n\n# Configure container engine based on distribution\ndetermine_container_engine\n\n# Install appropriate container engine\ndo_install_container_engine\n\n# Set up Datasance repository and WASM only on package-managed OSes\nif [ \"$PACKAGE_TYPE\" = \"deb\" ] || [ \"$PACKAGE_TYPE\" = \"rpm\" ]; then\n    do_set_datasance_repo\n    do_install_wasm_shim\nfi\n\necho \"# Installation completed successfully\""),
	}
	file7 := &embedded.EmbeddedFile{
		Filename:    "agent/install_deps.sh",
		FileModTime: time.Unix(1761996219, 0),

		Content: string("#!/bin/sh\nset -x\nset -e\n\n/etc/iofog/agent/install_java.sh\n/etc/iofog/agent/install_container_engine.sh\n"),
	}
	file8 := &embedded.EmbeddedFile{
		Filename:    "agent/install_iofog.sh",
		FileModTime: time.Unix(1770219475, 0),

		Content: string("#!/bin/sh\nset -x\nset -e\n\ndo_check_install() {\n\tif command_exists iofog-agent; then\n\t\tlocal VERSION=$(sudo iofog-agent version | head -n1 | sed \"s/ioFog//g\" | tr -d ' ' | tr -d \"\\n\")\n\t\tif [ \"$VERSION\" = \"$agent_version\" ]; then\n\t\t\techo \"Agent $VERSION already installed.\"\n\t\t\texit 0\n\t\tfi\n\tfi\n}\n\ndo_stop_iofog() {\n\tif command_exists iofog-agent; then\n\t\tsudo systemctl stop iofog-agent\n\tfi\n}\n\n\n\ndo_install_iofog() {\n\tAGENT_CONFIG_FOLDER=/etc/iofog-agent\n\tSAVED_AGENT_CONFIG_FOLDER=/tmp/agent-config-save\n\techo \"# Installing ioFog agent...\"\n\n\t# Save iofog-agent config\n\tif [ -d ${AGENT_CONFIG_FOLDER} ]; then\n\t\tsudo rm -rf ${SAVED_AGENT_CONFIG_FOLDER}\n\t\tsudo mkdir -p ${SAVED_AGENT_CONFIG_FOLDER}\n\t\tsudo cp -r ${AGENT_CONFIG_FOLDER}/* ${SAVED_AGENT_CONFIG_FOLDER}/\n\tfi\n\n\techo $lsb_dist\n\tcase \"$lsb_dist\" in\n\t\tfedora|rhel|ol|centos)\n\t\t\t$sh_c \"yum update -y\"\n\t\t\t$sh_c \"yum install -y iofog-agent-$agent_version-1.noarch\"\n\t\t\t;;\n\t\tsles|opensuse)\n\t\t\t$sh_c \"zypper refresh\"\n\t\t\t$sh_c \"zypper install -y iofog-agent=$agent_version\"\n\t\t\t;;\n\t\t*)\n\t\t\t$sh_c \"apt update -qy\"\n\t\t\t$sh_c \"apt install --allow-downgrades iofog-agent=$agent_version -qy\"\n\t\t\t;;\n\tesac\n\n\t# Restore iofog-agent config\n\tif [ -d ${SAVED_AGENT_CONFIG_FOLDER} ]; then\n\t\tsudo mv ${SAVED_AGENT_CONFIG_FOLDER}/* ${AGENT_CONFIG_FOLDER}/\n\t\tsudo rmdir ${SAVED_AGENT_CONFIG_FOLDER}\n\tfi\n\tsudo chmod 775 ${AGENT_CONFIG_FOLDER}\n}\n\ndo_start_iofog(){\n\n\tsudo systemctl start iofog-agent > /dev/null 2&>1 &\n\tlocal STATUS=\"\"\n\tlocal ITER=0\n\twhile [ \"$STATUS\" != \"RUNNING\" ] ; do\n    ITER=$((ITER+1))\n    if [ \"$ITER\" -gt 600 ]; then\n      echo 'Timed out waiting for Agent to be RUNNING'\n      exit 1;\n    fi\n    sleep 1\n    STATUS=$(sudo iofog-agent status | cut -f2 -d: | head -n 1 | tr -d '[:space:]')\n    echo \"${STATUS}\"\n\tdone\n\tsudo iofog-agent \"config -cf 10 -sf 10\"\n\tif [ \"$lsb_dist\" = \"rhel\" ] || [ \"$lsb_dist\" = \"centos\" ] || [ \"$lsb_dist\" = \"fedora\" ] || [ \"$lsb_dist\" = \"ol\" ] || [ \"$lsb_dist\" = \"sles\" ] || [ \"$lsb_dist\" = \"opensuse\" ]; then\n        sudo iofog-agent \"config -c unix:///var/run/podman/podman.sock\"\n    fi   \n}\n\nagent_version=\"$1\"\necho \"Using variables\"\necho \"version: $agent_version\"\n\n. /etc/iofog/agent/init.sh\ninit\n\n# Native agent is supported only on package-managed OSes (deb/rpm) with systemd\nif [ \"$PACKAGE_TYPE\" != \"deb\" ] && [ \"$PACKAGE_TYPE\" != \"rpm\" ]; then\n\techo \"Error: This operating system is not supported for native agent installation.\"\n\techo \"Please deploy the agent as a container (container agent) on this host.\"\n\texit 1\nfi\nif [ \"$INIT_SYSTEM\" != \"systemd\" ]; then\n\techo \"Error: Native agent is supported only on systemd. This system uses $INIT_SYSTEM.\"\n\techo \"Please deploy the agent as a container (container agent) on this host.\"\n\texit 1\nfi\n\ndo_check_install\ndo_stop_iofog\ndo_install_iofog\ndo_start_iofog"),
	}
	file9 := &embedded.EmbeddedFile{
		Filename:    "agent/install_java.sh",
		FileModTime: time.Unix(1744129259, 0),

		Content: string("#!/bin/sh\nset -x\nset -e\n\njava_major_version=0\njava_minor_version=0\ndo_check_install() {\n\tif command_exists java; then\n        java_major_version=\"$(java --version | head -n1 | awk '{print $2}' | cut -d. -f1)\"\n        java_minor_version=\"$(java --version | head -n1 | awk '{print $2}' | cut -d. -f2)\"\n\tfi\n\tif [ \"$java_major_version\" -ge \"17\" ]  && [ \"$java_minor_version\" -ge \"0\" ]; then\n\t\techo \"Java $java_major_version.$java_minor_version  already installed.\"\n\t\texit 0\n\tfi\n}\n\ndo_install_java() {\n\techo \"# Installing java 17...\"\n\techo \"\"\n\tos_arch=$(getconf LONG_BIT)\n\tis_arm=\"\"\n\tif [ \"$lsb_dist\" = \"raspbian\" ] || [ \"$(uname -m)\" = \"armv7l\" ] || [ \"$(uname -m)\" = \"aarch64\" ] || [ \"$(uname -m)\" = \"armv8\" ]; then\n\t\tis_arm=\"-arm\"\n\tfi\n\tcase \"$lsb_dist\" in\n\t\tubuntu|debian|raspbian|mendel)\n\t\t\t$sh_c \"apt-get update -y\"\n\t\t\t$sh_c \"apt install -y openjdk-17-jdk\"\n\t\t;;\n\t\tfedora|centos|rhel|ol)\n\t\t\t$sh_c \"yum install -y java-17-openjdk\"\n\t\t;;\n\t\tsles|opensuse*)\n\t\t\t$sh_c \"zypper refresh\"\n\t\t\t$sh_c \"zypper install -y java-17-openjdk\"\n\t\t;;\n\t\t*)\n\t\t\techo \"Unsupported distribution: $lsb_dist\"\n\t\t\texit 1\n\t\t;;\n\tesac\n}\n\ndo_install_deps() {\n\tlocal installer=\"\"\n\tcase \"$lsb_dist\" in\n\t\tubuntu|debian|raspbian|mendel)\n\t\t\tinstaller=\"apt\"\n\t\t;;\n\t\tfedora|centos|rhel|ol)\n\t\t\tinstaller=\"yum\"\n\t\t;;\n\t\tsles|opensuse*)\n\t\t\tinstaller=\"zypper\"\n\t\t;;\n\t\t*)\n\t\t\techo \"Unsupported distribution: $lsb_dist\"\n\t\t\texit 1\n\t\t;;\n\tesac\n\n\tlocal iter=0\n\twhile ! $sh_c \"$installer update\" && [ \"$iter\" -lt 6 ]; do\n\t\tsleep 5\n\t\titer=$((iter+1))\n\tdone\n}\n\n. /etc/iofog/agent/init.sh\ninit\ndo_check_install\ndo_install_deps\ndo_install_java"),
	}
	filea := &embedded.EmbeddedFile{
		Filename:    "agent/uninstall_iofog.sh",
		FileModTime: time.Unix(1744130024, 0),

		Content: string("#!/bin/sh\nset -x\nset -e\n\nAGENT_CONFIG_FOLDER=/etc/iofog-agent/\nAGENT_LOG_FOLDER=/var/log/iofog-agent/\n\ndo_uninstall_iofog() {\n\techo \"# Removing ioFog agent...\"\n\n\tcase \"$lsb_dist\" in\n\t\tubuntu|debian|raspbian)\n\t\t\t$sh_c \"apt-get -y --purge autoremove iofog-agent\"\n\t\t\t;;\n\t\tfedora|centos|rhel|ol)\n\t\t\t$sh_c \"yum remove -y iofog-agent\"\n\t\t\t;;\n\t\tsles|opensuse)\n\t\t\t$sh_c \"zypper remove -y iofog-agent\"\n\t\t\t;;\n\t\t*)\n\t\t\techo \"Error: Unsupported Linux distribution: $lsb_dist\"\n\t\t\texit 1\n\t\t\t;;\n\tesac\n\n\t# Remove config files\n\t$sh_c \"rm -rf ${AGENT_CONFIG_FOLDER}\"\n\n\t# Remove log files\n\t$sh_c \"rm -rf ${AGENT_LOG_FOLDER}\"\n}\n\n. /etc/iofog/agent/init.sh\ninit\n\ndo_uninstall_iofog"),
	}
	filec := &embedded.EmbeddedFile{
		Filename:    "airgap-agent/check_prereqs.sh",
		FileModTime: time.Unix(1770218653, 0),

		Content: string("#!/bin/sh\nset -x\n\n# Check if running as root or via sudo \nif [ \"$(id -u)\" -ne 0 ]; then\n\techo \"Error: This script must be run as root or via sudo\"\n\techo \"   Please run: sudo \\$0 \\$*\"\n\texit 1\nfi\n\n# Check can sudo without password (when re-executed or for subcommands)\nif ! $(sudo ls /tmp/ > /dev/null); then\n\tMSG=\"Unable to successfully use sudo with user $USER on this host.\\nUser $USER must be in sudoers group and using sudo without password must be enabled.\\nPlease see docs.datasance.com documentation for more details.\"\n\techo $MSG\n\texit 1\nfi\n"),
	}
	filed := &embedded.EmbeddedFile{
		Filename:    "airgap-agent/init.sh",
		FileModTime: time.Unix(1770218728, 0),

		Content: string("#!/bin/sh\n# Script to detect Linux distribution and version\n# Used as a precursor for system-specific installations\n\n# Exit on error and print commands for debugging\nset -e\nset -x\n\n# Define user variable\nuser=\"$(id -un 2>/dev/null || true)\"\n\n# Check if a command exists\ncommand_exists() {\n    command -v \"$@\" > /dev/null 2>&1\n}\n\n# Detect the Linux distribution\nget_distribution() {\n    lsb_dist=\"\"\n    dist_version=\"\"\n    \n    # Every system that we officially support has /etc/os-release\n    if [ -r /etc/os-release ]; then\n        \n        lsb_dist=\"$(. /etc/os-release && echo \"$ID\")\"\n        \n        dist_version=\"$(. /etc/os-release && echo \"$VERSION_ID\")\"\n        lsb_dist=\"$(echo \"$lsb_dist\" | tr '[:upper:]' '[:lower:]')\"\n    else\n        echo \"Error: Unsupported Linux distribution! /etc/os-release not found.\"\n        exit 1\n    fi\n    \n    echo \"# Detected distribution: $lsb_dist (version: $dist_version)\"\n}\n\n# Check if this is a forked Linux distro\ncheck_forked() {\n    # Skip if lsb_release doesn't exist\n    if ! command_exists lsb_release; then\n        return\n    fi\n    \n    # Check if the `-u` option is supported\n    set +e\n    lsb_release -a > /dev/null 2>&1\n    lsb_release_exit_code=$?\n    set -e\n\n    # Check if the command has exited successfully, it means we're in a forked distro\n    if [ \"$lsb_release_exit_code\" = \"0\" ]; then\n        # Get the upstream release info\n        current_lsb_dist=$(lsb_release -a 2>&1 | tr '[:upper:]' '[:lower:]' | grep -E 'id' | cut -d ':' -f 2 | tr -d '[:space:]')\n        current_dist_version=$(lsb_release -a 2>&1 | tr '[:upper:]' '[:lower:]' | grep -E 'codename' | cut -d ':' -f 2 | tr -d '[:space:]')\n\n        # Print info about current distro\n        echo \"You're using '$current_lsb_dist' version '$current_dist_version'.\"\n        \n        # Check if current is different from detected (indicating a fork)\n        if [ \"$current_lsb_dist\" != \"$lsb_dist\" ] || [ \"$current_dist_version\" != \"$dist_version\" ]; then\n            echo \"Upstream release is '$lsb_dist' version '$dist_version'.\"\n        fi\n    else\n        # Additional checks for specific distros that might not be properly detected\n        if [ -r /etc/debian_version ] && [ \"$lsb_dist\" != \"ubuntu\" ] && [ \"$lsb_dist\" != \"raspbian\" ]; then\n            if [ \"$lsb_dist\" = \"osmc\" ]; then\n                # OSMC runs Raspbian\n                lsb_dist=raspbian\n            else\n                # We're Debian and don't even know it!\n                lsb_dist=debian\n            fi\n            # Get Debian version and map it to codename\n            dist_version=\"$(sed 's/\\/.*//' /etc/debian_version | sed 's/\\..*//')\"\n            case \"$dist_version\" in\n                14)\n                    dist_version=\"forky\"\n                ;;\n                13)\n                    dist_version=\"trixie\"\n                ;;\n                12)\n                    dist_version=\"bookworm\"\n                ;;\n                11)\n                    dist_version=\"bullseye\"\n                ;;\n                10)\n                    dist_version=\"buster\"\n                ;;\n                9)\n                    dist_version=\"stretch\"\n                ;;\n                8|'Kali Linux 2')\n                    dist_version=\"jessie\"\n                ;;\n                7)\n                    dist_version=\"wheezy\"\n                ;;\n            esac\n        elif [ -r /etc/redhat-release ] && [ -z \"$lsb_dist\" ]; then\n            lsb_dist=redhat\n            # Extract version from redhat-release file\n            dist_version=\"$(sed 's/.*release \\([0-9.]*\\).*/\\1/' /etc/redhat-release)\"\n        fi\n    fi\n}\n\n# Set up sudo command if necessary\nsetup_sudo() {\n    sh_c='sh -c'\n    if [ \"$user\" != 'root' ]; then\n        if command_exists sudo; then\n            sh_c='sudo -E sh -c'\n        elif command_exists su; then\n            sh_c='su -c'\n        else\n            echo \"Error: this installer needs the ability to run commands as root.\"\n            echo \"We are unable to find either 'sudo' or 'su' available to make this happen.\"\n            exit 1\n        fi\n    fi\n    echo \"# Using command executor: $sh_c\"\n}\n\n# Refine distribution version detection based on the distro\nrefine_distribution_version() {\n    case \"$lsb_dist\" in\n        ubuntu)\n            if command_exists lsb_release; then\n                dist_version=\"$(lsb_release --codename | cut -f2)\"\n            fi\n            if [ -z \"$dist_version\" ] && [ -r /etc/lsb-release ]; then\n                \n                dist_version=\"$(. /etc/lsb-release && echo \"$DISTRIB_CODENAME\")\"\n            fi\n        ;;\n\n        debian|raspbian)\n            # If we only have a number, map it to a codename for better recognition\n            if echo \"$dist_version\" | grep -qE '^[0-9]+$'; then\n                case \"$dist_version\" in\n                    14)\n                        dist_version=\"forky\"\n                    ;;\n                    13)\n                        dist_version=\"trixie\"\n                    ;;\n                    12)\n                        dist_version=\"bookworm\"\n                    ;;\n                    11)\n                        dist_version=\"bullseye\"\n                    ;;\n                    10)\n                        # Handle special case for Buster\n                        dist_version=\"buster\"\n                        if [ \"$user\" = 'root' ]; then\n                            apt-get update --allow-releaseinfo-change || true\n                        elif command_exists sudo; then\n                            sudo apt-get update --allow-releaseinfo-change || true\n                        fi\n                    ;;\n                    9)\n                        dist_version=\"stretch\"\n                    ;;\n                    8)\n                        dist_version=\"jessie\"\n                    ;;\n                    7)\n                        dist_version=\"wheezy\"\n                    ;;\n                esac\n            fi\n        ;;\n\n        centos|rhel|fedora|ol)\n            # Make sure we have a version number\n            if [ -z \"$dist_version\" ] && [ -r /etc/os-release ]; then\n                \n                dist_version=\"$(. /etc/os-release && echo \"$VERSION_ID\")\"\n            fi\n            if [ -z \"$dist_version\" ] && [ -r /etc/redhat-release ]; then\n                dist_version=\"$(sed 's/.*release \\([0-9.]*\\).*/\\1/' /etc/redhat-release)\"\n            fi\n        ;;\n\n        sles|opensuse)\n            if [ -z \"$dist_version\" ] && [ -r /etc/os-release ]; then\n                dist_version=\"$(. /etc/os-release && echo \"$VERSION_ID\")\"\n            fi\n            # Fallback for older versions\n            if [ -z \"$dist_version\" ] && [ -r /etc/SuSE-release ]; then\n                dist_version=\"$(grep VERSION /etc/SuSE-release | sed 's/^VERSION = //')\"\n            fi\n            # Ensure version is in the correct format (e.g., 15.4 for SLES 15 SP4)\n            if [ -n \"$dist_version\" ]; then\n                # Remove any non-numeric characters except dots\n                dist_version=\"$(echo \"$dist_version\" | sed 's/[^0-9.]//g')\"\n            fi\n            # Normalize distribution name\n            if [ \"$lsb_dist\" = \"sles\" ]; then\n                lsb_dist=\"sles\"\n            elif [ \"$lsb_dist\" = \"opensuse\" ]; then\n                lsb_dist=\"opensuse\"\n            fi\n        ;;\n\n        *)\n            if command_exists lsb_release; then\n                dist_version=\"$(lsb_release --release | cut -f2)\"\n            fi\n            if [ -z \"$dist_version\" ] && [ -r /etc/os-release ]; then\n                \n                dist_version=\"$(. /etc/os-release && echo \"$VERSION_ID\")\"\n            fi\n        ;;\n    esac\n}\n\n# Detect init system \ndetect_init_system() {\n    if command -v systemctl >/dev/null 2>&1 && [ -d /etc/systemd/system ]; then\n        INIT_SYSTEM=\"systemd\"\n    elif [ -f /sbin/init ] && /sbin/init --version 2>/dev/null | grep -q upstart; then\n        INIT_SYSTEM=\"upstart\"\n    elif command -v openrc >/dev/null 2>&1 || [ -f /sbin/openrc ]; then\n        INIT_SYSTEM=\"openrc\"\n    elif [ -d /etc/s6 ] || command -v s6-svc >/dev/null 2>&1; then\n        INIT_SYSTEM=\"s6\"\n    elif command -v runit >/dev/null 2>&1 || [ -d /etc/runit ]; then\n        INIT_SYSTEM=\"runit\"\n    elif [ -d /etc/init.d ]; then\n        INIT_SYSTEM=\"sysvinit\"\n    else\n        INIT_SYSTEM=\"unknown\"\n    fi\n    export INIT_SYSTEM\n    echo \"# Detected init system: $INIT_SYSTEM\"\n}\n\n# Detect package type (deb, rpm, or other)\ndetect_package_type() {\n    case \"$lsb_dist\" in\n        debian|ubuntu|raspbian|mendel)\n            PACKAGE_TYPE=\"deb\"\n            ;;\n        fedora|centos|rhel|ol|sles|opensuse*)\n            PACKAGE_TYPE=\"rpm\"\n            ;;\n        *)\n            if command_exists apt-get || command_exists dpkg; then\n                PACKAGE_TYPE=\"deb\"\n            elif command_exists yum || command_exists dnf || command_exists zypper; then\n                PACKAGE_TYPE=\"rpm\"\n            else\n                PACKAGE_TYPE=\"other\"\n            fi\n            ;;\n    esac\n    export PACKAGE_TYPE\n    echo \"# Detected package type: $PACKAGE_TYPE\"\n}\n\n# Init function\ninit() {\n    # Detect basic distribution info\n    get_distribution\n    \n    # Set up sudo for privileged commands\n    setup_sudo\n    \n    # Refine version information\n    refine_distribution_version\n    \n    # Check if this is a forked distro\n    check_forked\n    \n    # Detect init system and package type (for universal OS/init support)\n    detect_init_system\n    detect_package_type\n    \n    # Print final distribution information\n    echo \"----------------------------------------\"\n    echo \"Linux Distribution: $lsb_dist\"\n    echo \"Version: $dist_version\"\n    echo \"Init system: $INIT_SYSTEM\"\n    echo \"Package type: $PACKAGE_TYPE\"\n    echo \"----------------------------------------\"\n    \n}\n"),
	}
	filee := &embedded.EmbeddedFile{
		Filename:    "airgap-agent/install_container_engine.sh",
		FileModTime: time.Unix(1770219436, 0),

		Content: string("#!/bin/sh\n# Script to configure Docker/Podman for airgap deployment\n# Check-only: verifies container engine is installed (Docker 25+ or Podman 4+), then configures/starts\n# Sources init.sh for distribution detection\n\nset -x\nset -e\n\nCONTAINER_ENGINE_MSG=\"This operating system does not support automatic container engine installation. Please install Docker 25+ or Podman 4+ on the target host and re-run, or use an airgap deployment with a pre-installed engine.\"\n\ncheck_docker_version() {\n    docker_version_num=0\n    if command -v docker >/dev/null 2>&1; then\n        raw=$(docker -v 2>/dev/null | sed -n 's/.*version \\([0-9][0-9]*\\.[0-9][0-9]*\\).*/\\1/p' | tr -d '.')\n        [ -n \"$raw\" ] && docker_version_num=\"$raw\"\n    fi\n    [ \"$docker_version_num\" -ge 2500 ] 2>/dev/null || return 1\n}\n\ncheck_podman_version() {\n    podman_version_num=0\n    if command -v podman >/dev/null 2>&1; then\n        raw=$(podman --version 2>/dev/null | sed -n 's/.*version \\([0-9][0-9]*\\).*/\\1/p')\n        [ -n \"$raw\" ] && podman_version_num=\"$raw\"\n    fi\n    [ \"$podman_version_num\" -ge 4 ] 2>/dev/null || return 1\n}\n\nstart_docker() {\n    set +e\n    if $sh_c \"docker ps\" >/dev/null 2>&1; then\n        set -e\n        return 0\n    fi\n    err_code=1\n    case \"${INIT_SYSTEM:-unknown}\" in\n        systemd) $sh_c \"systemctl start docker\" >/dev/null 2>&1; err_code=$? ;;\n        sysvinit) $sh_c \"service docker start\" >/dev/null 2>&1 || $sh_c \"/etc/init.d/docker start\" >/dev/null 2>&1; err_code=$? ;;\n        openrc) $sh_c \"rc-service docker start\" >/dev/null 2>&1; err_code=$? ;;\n        *)\n            $sh_c \"/etc/init.d/docker start\" >/dev/null 2>&1\n            err_code=$?\n            [ $err_code -ne 0 ] && $sh_c \"systemctl start docker\" >/dev/null 2>&1 && err_code=0\n            [ $err_code -ne 0 ] && $sh_c \"service docker start\" >/dev/null 2>&1 && err_code=0\n            [ $err_code -ne 0 ] && $sh_c \"snap start docker\" >/dev/null 2>&1 && err_code=0\n            ;;\n    esac\n    set -e\n    if [ $err_code -ne 0 ]; then\n        echo \"Could not start Docker daemon\"\n        exit 1\n    fi\n}\n\nstart_podman() {\n    set +e\n    case \"${INIT_SYSTEM:-unknown}\" in\n        systemd)\n            $sh_c \"systemctl start podman\" >/dev/null 2>&1\n            $sh_c \"systemctl start podman.socket\" >/dev/null 2>&1\n            ;;\n        sysvinit) $sh_c \"service podman start\" >/dev/null 2>&1 || $sh_c \"/etc/init.d/podman start\" >/dev/null 2>&1 ;;\n        openrc) $sh_c \"rc-service podman start\" >/dev/null 2>&1 ;;\n        *)\n            $sh_c \"systemctl start podman\" >/dev/null 2>&1 || true\n            $sh_c \"systemctl start podman.socket\" >/dev/null 2>&1 || true\n            $sh_c \"service podman start\" >/dev/null 2>&1 || true\n            ;;\n    esac\n    set -e\n}\n\ndo_modify_daemon() {\n    # Skip for Podman installations\n    if [ \"$USE_PODMAN\" = \"true\" ]; then\n        echo \"# Configuring Podman for CDI directory support...\"\n\n        # Create CDI directories\n        $sh_c \"mkdir -p /etc/cdi /var/run/cdi\"\n\n        # Ensure /etc/containers exists\n        $sh_c \"mkdir -p /etc/containers\"\n\n        # Create containers.conf if it doesn't exist\n        if [ ! -f \"/etc/containers/containers.conf\" ]; then\n            $sh_c 'cat > /etc/containers/containers.conf <<EOF\n[engine]\nruntime = \"crun\"\ncdi_spec_dirs = [\"/etc/cdi\", \"/var/run/cdi\"]\nEOF'\n        else\n            # Check if [engine] block exists\n            if grep -q \"^\\[engine\\]\" /etc/containers/containers.conf; then\n                # Ensure runtime is set under [engine]\n                if grep -q \"^runtime\" /etc/containers/containers.conf; then\n                    $sh_c \"sed -i 's|^runtime *=.*|runtime = \\\"crun\\\"|' /etc/containers/containers.conf\"\n                else\n                    $sh_c \"sed -i '/^\\[engine\\]/a runtime = \\\"crun\\\"' /etc/containers/containers.conf\"\n                fi\n\n                # Ensure cdi_spec_dirs is set under [engine]\n                if grep -q \"^cdi_spec_dirs\" /etc/containers/containers.conf; then\n                    $sh_c \"sed -i 's|^cdi_spec_dirs *=.*|cdi_spec_dirs = [\\\"/etc/cdi\\\", \\\"/var/run/cdi\\\"]|' /etc/containers/containers.conf\"\n                else\n                    $sh_c \"sed -i '/^\\[engine\\]/a cdi_spec_dirs = [\\\"/etc/cdi\\\", \\\"/var/run/cdi\\\"]' /etc/containers/containers.conf\"\n                fi\n            else\n                # Append full engine block if missing\n                $sh_c 'echo -e \"\\n[engine]\\nruntime = \\\"crun\\\"\\ncdi_spec_dirs = [\\\"/etc/cdi\\\", \\\"/var/run/cdi\\\"]\" >> /etc/containers/containers.conf'\n            fi\n        fi\n\n        case \"${INIT_SYSTEM:-unknown}\" in\n            systemd)\n                $sh_c \"systemctl enable podman\" 2>/dev/null || true\n                $sh_c \"systemctl enable podman.socket\" 2>/dev/null || true\n                ;;\n            openrc) $sh_c \"rc-update add podman default\" 2>/dev/null || true ;;\n            sysvinit) $sh_c \"update-rc.d podman defaults\" 2>/dev/null || $sh_c \"chkconfig podman on\" 2>/dev/null || true ;;\n            *) ;;\n        esac\n        start_podman\n        return\n    fi\n    \n    # Original Docker daemon configuration\n    if [ ! -f /etc/docker/daemon.json ]; then\n        echo \"Creating /etc/docker/daemon.json...\"\n        $sh_c \"mkdir -p /etc/docker\"\n        $sh_c 'cat > /etc/docker/daemon.json << EOF\n{\n\t\"storage-driver\": \"overlayfs\",\n    \"features\": {\n        \"containerd-snapshotter\": true,\n        \"cdi\": true\n    },\n    \"cdi-spec-dirs\": [\"/etc/cdi/\", \"/var/run/cdi\"]\n}\nEOF'\n    else\n        echo \"/etc/docker/daemon.json already exists\"\n    fi\n    echo \"Restarting Docker daemon...\"\n    case \"${INIT_SYSTEM:-unknown}\" in\n        systemd)\n            $sh_c \"systemctl daemon-reload\"\n            $sh_c \"systemctl restart docker\"\n            ;;\n        *)\n            $sh_c \"systemctl daemon-reload\" 2>/dev/null || true\n            $sh_c \"systemctl restart docker\" 2>/dev/null || start_docker\n            ;;\n    esac\n}\n\n# Airgap: determine engine by availability (Docker 25+ or Podman 4+)\ndetermine_container_engine() {\n    if check_docker_version; then\n        USE_PODMAN=\"false\"\n        echo \"# Using Docker (25+)\"\n    elif check_podman_version; then\n        USE_PODMAN=\"true\"\n        echo \"# Using Podman (4+)\"\n    else\n        echo \"Error: Docker 25+ or Podman 4+ is required. $CONTAINER_ENGINE_MSG\"\n        exit 1\n    fi\n}\n\n. /etc/iofog/agent/init.sh\ninit\n\ndetermine_container_engine\n\n# Start engine and configure\nif [ \"$USE_PODMAN\" = \"false\" ]; then\n    start_docker\nfi\n\ndo_modify_daemon\n\necho \"# Container engine configuration completed successfully\"\n\n"),
	}
	filef := &embedded.EmbeddedFile{
		Filename:    "airgap-agent/install_deps.sh",
		FileModTime: time.Unix(1767396680, 0),

		Content: string("#!/bin/sh\nset -x\nset -e\n\n\n/etc/iofog/agent/install_container_engine.sh\n"),
	}
	fileg := &embedded.EmbeddedFile{
		Filename:    "airgap-agent/install_iofog.sh",
		FileModTime: time.Unix(1770220964, 0),

		Content: string("#!/bin/sh\nset -x\nset -e\n\nAGENT_LOG_FOLDER=/var/log/iofog-agent\nAGENT_BACKUP_FOLDER=/var/backups/iofog-agent\nAGENT_MESSAGE_FOLDER=/var/lib/iofog-agent\nAGENT_SHARE_FOLDER=/usr/share/iofog-agent\nSAVED_AGENT_CONFIG_FOLDER=/tmp/agent-config-save\nAGENT_CONTAINER_NAME=\"iofog-agent\"\nETC_DIR=/etc/iofog/agent\n\ndo_check_install() {\n\tif command_exists iofog-agent; then\n\t\tlocal VERSION=$(sudo iofog-agent version | head -n1 | sed \"s/ioFog//g\" | tr -d ' ' | tr -d \"\\n\")\n\t\tif [ \"$VERSION\" = \"$agent_version\" ]; then\n\t\t\techo \"Agent $VERSION already installed.\"\n\t\t\texit 0\n\t\tfi\n\tfi\n}\n\ndo_stop_iofog() {\n\tif ! command_exists iofog-agent; then\n\t\treturn 0\n\tfi\n\tcase \"${INIT_SYSTEM:-systemd}\" in\n\t\tsystemd)\n\t\t\tsudo systemctl stop iofog-agent 2>/dev/null || true\n\t\t\t;;\n\t\tsysvinit|openrc)\n\t\t\tsudo service iofog-agent stop 2>/dev/null || sudo /etc/init.d/iofog-agent stop 2>/dev/null || true\n\t\t\t;;\n\t\ts6)\n\t\t\tsudo s6-svc -d /etc/s6/sv/iofog-agent 2>/dev/null || true\n\t\t\t;;\n\t\trunit)\n\t\t\tsudo sv stop iofog-agent 2>/dev/null || true\n\t\t\t;;\n\t\tupstart)\n\t\t\tsudo initctl stop iofog-agent 2>/dev/null || true\n\t\t\t;;\n\t\t*)\n\t\t\tsudo systemctl stop iofog-agent 2>/dev/null || sudo service iofog-agent stop 2>/dev/null || true\n\t\t\t;;\n\tesac\n\t(docker stop ${AGENT_CONTAINER_NAME} 2>/dev/null || podman stop ${AGENT_CONTAINER_NAME} 2>/dev/null) || true\n}\n\ndo_create_env() {\nENV_FILE_NAME=iofog-agent.env # Used as an env file in systemd\n\nENV_FILE=\"$ETC_DIR/$ENV_FILE_NAME\"\n\n# Env file (for systemd)\nrm -f \"$ENV_FILE\"\ntouch \"$ENV_FILE\"\n\necho \"IOFOG_AGENT_IMAGE=${agent_image}\" >> \"$ENV_FILE\"\necho \"IOFOG_AGENT_TZ=${agent_tz}\" >> \"$ENV_FILE\"\n\n}\n\ndo_install_iofog() {\n\techo \"# Installing ioFog agent (airgap mode)...\"\n\t\n    for FOLDER in ${ETC_DIR} ${AGENT_LOG_FOLDER} ${AGENT_BACKUP_FOLDER} ${AGENT_MESSAGE_FOLDER} ${AGENT_SHARE_FOLDER}; do\n        if [ ! -d \"$FOLDER\" ]; then\n            echo \"Creating folder: $FOLDER\"\n            sudo mkdir -p \"$FOLDER\"\n            sudo chmod 775 \"$FOLDER\"\n        fi\n    done\n\tdo_create_env\n\n    USE_PODMAN=\"false\"\n    case \"$lsb_dist\" in\n        rhel|centos|fedora|ol|sles|opensuse*) USE_PODMAN=\"true\" ;;\n    esac\n    if [ \"$USE_PODMAN\" = \"true\" ]; then\n        CONTAINER_RUNTIME=\"podman\"\n        SOCK_MOUNT=\"-v /run/podman/podman.sock:/run/podman/podman.sock:rw\"\n    else\n        CONTAINER_RUNTIME=\"docker\"\n        SOCK_MOUNT=\"-v /var/run/docker.sock:/var/run/docker.sock:rw\"\n    fi\n\n    if [ \"${INIT_SYSTEM:-systemd}\" = \"systemd\" ]; then\n        if [ \"$USE_PODMAN\" = \"true\" ]; then\n            echo \"Using Podman (Quadlet) for container management...\"\n            sudo mkdir -p /etc/containers/systemd\n            cat <<EOF | sudo tee /etc/containers/systemd/iofog-agent.container > /dev/null\n[Unit]\nDescription=Datasance PoT IoFog Agent Service\nAfter=podman.service\nRequires=podman.service\n\n[Container]\nContainerName=${AGENT_CONTAINER_NAME}\nImage=${agent_image}\nPodmanArgs=--privileged --stop-timeout=60\nEnvironmentFile=${ETC_DIR}/iofog-agent.env\nNetwork=host\nVolume=/run/podman/podman.sock:/run/podman/podman.sock:rw\nVolume=iofog-agent-config:/etc/iofog-agent:rw\nVolume=/var/log/iofog-agent:/var/log/iofog-agent:rw\nVolume=/var/backups/iofog-agent:/var/backups/iofog-agent:rw\nVolume=/usr/share/iofog-agent:/usr/share/iofog-agent:rw\nVolume=/var/lib/iofog-agent:/var/lib/iofog-agent:rw\nLogDriver=journald\n\n[Service]\nRestart=always\n\n[Install]\nWantedBy=default.target\nEOF\n            sudo systemctl daemon-reload\n            sudo systemctl restart podman 2>/dev/null || true\n            sudo systemctl enable iofog-agent.service\n            sudo systemctl start iofog-agent.service\n        else\n            echo \"Using Docker (systemd) for container management...\"\n            cat <<EOF | sudo tee /etc/systemd/system/iofog-agent.service > /dev/null\n[Unit]\nDescription=Datasance PoT IoFog Agent Service\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nRestart=always\nExecStartPre=-/usr/bin/docker rm -f ${AGENT_CONTAINER_NAME}\nExecStart=/usr/bin/docker run --rm --name ${AGENT_CONTAINER_NAME} \\\\\n--env-file ${ETC_DIR}/iofog-agent.env \\\\\n-v /var/run/docker.sock:/var/run/docker.sock:rw \\\\\n-v iofog-agent-config:/etc/iofog-agent:rw \\\\\n-v /var/log/iofog-agent:/var/log/iofog-agent:rw \\\\\n-v /var/backups/iofog-agent:/var/backups/iofog-agent:rw \\\\\n-v /usr/share/iofog-agent:/usr/share/iofog-agent:rw \\\\\n-v /var/lib/iofog-agent:/var/lib/iofog-agent:rw \\\\\n--net=host \\\\\n--privileged \\\\\n--stop-timeout 60 \\\\\n--attach stdout \\\\\n--attach stderr \\\\\n${agent_image}\nExecStop=/usr/bin/docker stop ${AGENT_CONTAINER_NAME}\n\n[Install]\nWantedBy=default.target\nEOF\n            sudo systemctl daemon-reload\n            sudo systemctl enable iofog-agent.service\n            sudo systemctl start iofog-agent.service\n        fi\n    else\n        echo \"Using $CONTAINER_RUNTIME with $INIT_SYSTEM for container management...\"\n        RUN_CMD=\"${CONTAINER_RUNTIME} run --rm -d --name ${AGENT_CONTAINER_NAME} --env-file ${ETC_DIR}/iofog-agent.env ${SOCK_MOUNT} -v iofog-agent-config:/etc/iofog-agent:rw -v /var/log/iofog-agent:/var/log/iofog-agent:rw -v /var/backups/iofog-agent:/var/backups/iofog-agent:rw -v /usr/share/iofog-agent:/usr/share/iofog-agent:rw -v /var/lib/iofog-agent:/var/lib/iofog-agent:rw --net=host --privileged --stop-timeout 60 ${agent_image}\"\n        RUN_CMD_FG=\"${CONTAINER_RUNTIME} run --rm --name ${AGENT_CONTAINER_NAME} --env-file ${ETC_DIR}/iofog-agent.env ${SOCK_MOUNT} -v iofog-agent-config:/etc/iofog-agent:rw -v /var/log/iofog-agent:/var/log/iofog-agent:rw -v /var/backups/iofog-agent:/var/backups/iofog-agent:rw -v /usr/share/iofog-agent:/usr/share/iofog-agent:rw -v /var/lib/iofog-agent:/var/lib/iofog-agent:rw --net=host --privileged --stop-timeout 60 ${agent_image}\"\n        STOP_CMD=\"${CONTAINER_RUNTIME} stop ${AGENT_CONTAINER_NAME}\"\n        case \"$INIT_SYSTEM\" in\n            sysvinit|openrc)\n                sudo tee /etc/init.d/iofog-agent > /dev/null <<INITSCRIPT\n#!/bin/sh\n### BEGIN INIT INFO\n# Provides:          iofog-agent\n# Required-Start:    \\$network \\$local_fs\n# Required-Stop:     \\$network \\$local_fs\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n### END INIT INFO\ncase \"\\$1\" in\n    start)\n        n=0; while [ \\$n -lt 30 ]; do [ -S /var/run/docker.sock ] || [ -S /run/podman/podman.sock ] && break; n=\\$((n+1)); sleep 1; done\n        [ -S /var/run/docker.sock ] || [ -S /run/podman/podman.sock ] || { echo \"Container engine socket not available\"; exit 1; }\n        if ${CONTAINER_RUNTIME} ps --format '{{.Names}}' 2>/dev/null | grep -q \"^${AGENT_CONTAINER_NAME}\\$\"; then exit 0; fi\n        $RUN_CMD\n        ;;\n    stop) $STOP_CMD 2>/dev/null || true ;;\n    restart) \\$0 stop; \\$0 start ;;\n    status)\n        if ${CONTAINER_RUNTIME} ps --format '{{.Names}}' 2>/dev/null | grep -q \"^${AGENT_CONTAINER_NAME}\\$\"; then echo \"running\"; exit 0; else echo \"stopped\"; exit 1; fi\n        ;;\n    *) echo \"Usage: \\$0 {start|stop|restart|status}\"; exit 1 ;;\nesac\nexit 0\nINITSCRIPT\n                sudo chmod +x /etc/init.d/iofog-agent\n                if [ \"$INIT_SYSTEM\" = \"openrc\" ]; then\n                    sudo rc-update add iofog-agent default 2>/dev/null || true\n                    sudo rc-service iofog-agent start\n                else\n                    sudo update-rc.d iofog-agent defaults 2>/dev/null || sudo chkconfig iofog-agent on 2>/dev/null || true\n                    sudo service iofog-agent start 2>/dev/null || sudo /etc/init.d/iofog-agent start\n                fi\n                ;;\n            s6)\n                sudo mkdir -p /etc/s6/sv/iofog-agent\n                printf '#!/bin/sh\\nexec %s\\n' \"$RUN_CMD_FG\" | sudo tee /etc/s6/sv/iofog-agent/run > /dev/null\n                sudo chmod +x /etc/s6/sv/iofog-agent/run\n                [ -d /etc/s6/adminsv/default ] && sudo ln -sf /etc/s6/sv/iofog-agent /etc/s6/adminsv/default/iofog-agent 2>/dev/null || true\n                sudo s6-svc -u /etc/s6/sv/iofog-agent 2>/dev/null || true\n                ;;\n            runit)\n                sudo mkdir -p /etc/runit/sv/iofog-agent\n                printf '#!/bin/sh\\nexec %s\\n' \"$RUN_CMD_FG\" | sudo tee /etc/runit/sv/iofog-agent/run > /dev/null\n                sudo chmod +x /etc/runit/sv/iofog-agent/run\n                [ -d /var/service ] && sudo ln -sf /etc/runit/sv/iofog-agent /var/service/iofog-agent 2>/dev/null || true\n                [ -d /etc/runit/runsvdir/default ] && sudo ln -sf /etc/runit/sv/iofog-agent /etc/runit/runsvdir/default/iofog-agent 2>/dev/null || true\n                sudo sv start iofog-agent 2>/dev/null || true\n                ;;\n            upstart)\n                printf 'description \"IoFog Agent container\"\\nstart on runlevel [2345]\\nstop on runlevel [!2345]\\nrespawn\\nrespawn limit 10 5\\nexec %s\\n' \"$RUN_CMD_FG\" | sudo tee /etc/init/iofog-agent.conf > /dev/null\n                sudo initctl reload-configuration 2>/dev/null || true\n                sudo initctl start iofog-agent 2>/dev/null || true\n                ;;\n            *)\n                sudo tee /etc/init.d/iofog-agent > /dev/null <<INITSCRIPT\n#!/bin/sh\ncase \"\\$1\" in start) n=0; while [ \\$n -lt 30 ]; do [ -S /var/run/docker.sock ] || [ -S /run/podman/podman.sock ] && break; n=\\$((n+1)); sleep 1; done; [ -S /var/run/docker.sock ] || [ -S /run/podman/podman.sock ] || { echo \"Container engine socket not available\"; exit 1; }; $RUN_CMD ;; stop) $STOP_CMD ;; restart) $STOP_CMD; $RUN_CMD ;; *) echo \"Usage: \\$0 {start|stop|restart}\"; exit 1 ;; esac\nINITSCRIPT\n                sudo chmod +x /etc/init.d/iofog-agent\n                sudo /etc/init.d/iofog-agent start\n                ;;\n        esac\n    fi\n\n    EXECUTABLE_FILE=/usr/local/bin/iofog-agent\n    if [ \"$USE_PODMAN\" = \"true\" ]; then\n        cat <<'EOF' | sudo tee ${EXECUTABLE_FILE} > /dev/null\n#!/bin/sh\nCONTAINER_NAME=\"iofog-agent\"\nif ! podman ps --format '{{.Names}}' | grep -q \"^${CONTAINER_NAME}$\"; then\n    echo \"Error: The iofog-agent container is not running.\"\n    exit 1\nfi\nexec podman exec ${CONTAINER_NAME} iofog-agent \"$@\"\nEOF\n    else\n        cat <<'EOF' | sudo tee ${EXECUTABLE_FILE} > /dev/null\n#!/bin/sh\nCONTAINER_NAME=\"iofog-agent\"\nif ! docker ps --format '{{.Names}}' | grep -q \"^${CONTAINER_NAME}$\"; then\n    echo \"Error: The iofog-agent container is not running.\"\n    exit 1\nfi\nexec docker exec ${CONTAINER_NAME} iofog-agent \"$@\"\nEOF\n    fi\n    sudo chmod +x ${EXECUTABLE_FILE}\n\n    echo \"ioFog agent installation completed!\"\n}\n\ndo_start_iofog(){\n\tcase \"${INIT_SYSTEM:-systemd}\" in\n\t\tsystemd) sudo systemctl start iofog-agent >/dev/null 2>&1 & ;;\n\t\tsysvinit|openrc) sudo service iofog-agent start 2>/dev/null || sudo /etc/init.d/iofog-agent start 2>/dev/null & ;;\n\t\ts6) sudo s6-svc -u /etc/s6/sv/iofog-agent 2>/dev/null & ;;\n\t\trunit) sudo sv start iofog-agent 2>/dev/null & ;;\n\t\tupstart) sudo initctl start iofog-agent 2>/dev/null & ;;\n\t\t*) sudo systemctl start iofog-agent 2>/dev/null || sudo /etc/init.d/iofog-agent start 2>/dev/null & ;;\n\tesac\n\tlocal STATUS=\"\"\n\tlocal ITER=0\n\twhile [ \"$STATUS\" != \"RUNNING\" ]; do\n\t\tITER=$((ITER+1))\n\t\tif [ \"$ITER\" -gt 600 ]; then\n\t\t\techo \"Timed out waiting for Agent to be RUNNING\"\n\t\t\texit 1\n\t\tfi\n\t\tsleep 1\n\t\tSTATUS=$(sudo iofog-agent status 2>/dev/null | cut -f2 -d: | head -n 1 | tr -d '[:space:]')\n\t\techo \"${STATUS}\"\n\tdone\n\tsudo iofog-agent \"config -cf 10 -sf 10\"\n\tif [ \"$lsb_dist\" = \"rhel\" ] || [ \"$lsb_dist\" = \"centos\" ] || [ \"$lsb_dist\" = \"fedora\" ] || [ \"$lsb_dist\" = \"ol\" ] || [ \"$lsb_dist\" = \"sles\" ] || [ \"$lsb_dist\" = \"opensuse\" ]; then\n\t\tsudo iofog-agent \"config -c unix:///var/run/podman/podman.sock\"\n\tfi\n}\n\nagent_image=\"$1\"\nagent_tz=\"$2\"\necho \"Using variables\"\necho \"version: $agent_image\"\necho \"timezone: $agent_tz\"\n. /etc/iofog/agent/init.sh\ninit\ndo_check_install\ndo_stop_iofog\ndo_install_iofog\ndo_start_iofog\n\n\n\n"),
	}
	fileh := &embedded.EmbeddedFile{
		Filename:    "airgap-agent/uninstall_iofog.sh",
		FileModTime: time.Unix(1770219273, 0),

		Content: string("#!/bin/sh\nset -x\nset -e\n\nAGENT_CONFIG_FOLDER=iofog-agent-config\nAGENT_LOG_FOLDER=/var/log/iofog-agent\nAGENT_BACKUP_FOLDER=/var/backups/iofog-agent\nAGENT_MESSAGE_FOLDER=/var/lib/iofog-agent\nEXECUTABLE_FILE=/usr/local/bin/iofog-agent\nCONTAINER_NAME=\"iofog-agent\"\n\ndo_uninstall_iofog() {\n    echo \"# Removing ioFog agent...\"\n\n    case \"$lsb_dist\" in\n        rhel|fedora|centos|ol|sles|opensuse*) CONTAINER_RUNTIME=\"podman\" ;;\n        *) CONTAINER_RUNTIME=\"docker\" ;;\n    esac\n\n    case \"${INIT_SYSTEM:-systemd}\" in\n        systemd)\n            for f in /etc/systemd/system/iofog-agent.service /etc/containers/systemd/iofog-agent.container; do\n                if [ -f \"$f\" ]; then\n                    echo \"Disabling and stopping systemd service...\"\n                    sudo systemctl stop iofog-agent.service 2>/dev/null || true\n                    sudo systemctl disable iofog-agent.service 2>/dev/null || true\n                    sudo rm -f \"$f\"\n                    sudo systemctl daemon-reload\n                    break\n                fi\n            done\n            ;;\n        sysvinit|openrc)\n            if [ -f /etc/init.d/iofog-agent ]; then\n                sudo service iofog-agent stop 2>/dev/null || sudo /etc/init.d/iofog-agent stop 2>/dev/null || true\n                [ \"$INIT_SYSTEM\" = \"openrc\" ] && sudo rc-update del iofog-agent default 2>/dev/null || true\n                sudo update-rc.d -f iofog-agent remove 2>/dev/null || sudo chkconfig --del iofog-agent 2>/dev/null || true\n                sudo rm -f /etc/init.d/iofog-agent\n            fi\n            ;;\n        s6)\n            sudo s6-svc -d /etc/s6/sv/iofog-agent 2>/dev/null || true\n            sudo rm -rf /etc/s6/sv/iofog-agent\n            [ -L /etc/s6/adminsv/default/iofog-agent ] && sudo rm -f /etc/s6/adminsv/default/iofog-agent\n            ;;\n        runit)\n            sudo sv stop iofog-agent 2>/dev/null || true\n            [ -L /var/service/iofog-agent ] && sudo rm -f /var/service/iofog-agent\n            [ -L /etc/runit/runsvdir/default/iofog-agent ] && sudo rm -f /etc/runit/runsvdir/default/iofog-agent\n            sudo rm -rf /etc/runit/sv/iofog-agent\n            ;;\n        upstart)\n            sudo initctl stop iofog-agent 2>/dev/null || true\n            sudo rm -f /etc/init/iofog-agent.conf\n            ;;\n        *)\n            sudo systemctl stop iofog-agent 2>/dev/null || true\n            sudo systemctl disable iofog-agent 2>/dev/null || true\n            sudo rm -f /etc/systemd/system/iofog-agent.service /etc/containers/systemd/iofog-agent.container\n            sudo systemctl daemon-reload 2>/dev/null || true\n            [ -f /etc/init.d/iofog-agent ] && sudo /etc/init.d/iofog-agent stop 2>/dev/null || true\n            sudo rm -f /etc/init.d/iofog-agent\n            ;;\n    esac\n\n    if sudo ${CONTAINER_RUNTIME} ps -a --format '{{.Names}}' 2>/dev/null | grep -q \"^${CONTAINER_NAME}$\"; then\n        echo \"Stopping and removing the ioFog agent container...\"\n        sudo ${CONTAINER_RUNTIME} stop ${CONTAINER_NAME} 2>/dev/null || true\n        sudo ${CONTAINER_RUNTIME} rm ${CONTAINER_NAME} 2>/dev/null || true\n    fi\n\n    # Remove config files\n    echo \"Checking if the ${CONTAINER_RUNTIME} volume exists...\"\n\n    if sudo ${CONTAINER_RUNTIME} volume inspect \"${AGENT_CONFIG_FOLDER}\" >/dev/null 2>&1; then\n        echo \"${CONTAINER_RUNTIME} volume '${AGENT_CONFIG_FOLDER}' found. Removing...\"\n        sudo ${CONTAINER_RUNTIME} volume rm \"${AGENT_CONFIG_FOLDER}\"\n        echo \"${CONTAINER_RUNTIME} volume '${AGENT_CONFIG_FOLDER}' has been removed.\"\n    else\n        echo \"${CONTAINER_RUNTIME} volume '${AGENT_CONFIG_FOLDER}' does not exist. Skipping removal.\"\n    fi\n\n    # Remove log files\n    echo \"Removing log files...\"\n    sudo rm -rf ${AGENT_LOG_FOLDER}\n\n    # Remove backup files\n    echo \"Removing backup files...\"\n    sudo rm -rf ${AGENT_BACKUP_FOLDER}\n\n    # Remove message files\n    echo \"Removing message files...\"\n    sudo rm -rf ${AGENT_MESSAGE_FOLDER}\n\n    # Remove the executable script\n    if [ -f ${EXECUTABLE_FILE} ]; then\n        echo \"Removing the iofog-agent executable script...\"\n        sudo rm -f ${EXECUTABLE_FILE}\n    fi\n\n    echo \"ioFog agent uninstalled successfully!\"\n}\n\n. /etc/iofog/agent/init.sh\ninit\n\ndo_uninstall_iofog\n"),
	}
	filej := &embedded.EmbeddedFile{
		Filename:    "airgap-controller/check_prereqs.sh",
		FileModTime: time.Unix(1770218653, 0),

		Content: string("#!/bin/sh\nset -x\n\n# Check if running as root or via sudo \nif [ \"$(id -u)\" -ne 0 ]; then\n\techo \"Error: This script must be run as root or via sudo\"\n\techo \"   Please run: sudo \\$0 \\$*\"\n\texit 1\nfi\n\n# Check can sudo without password (when re-executed or for subcommands)\nif ! $(sudo ls /tmp/ > /dev/null); then\n\tMSG=\"Unable to successfully use sudo with user $USER on this host.\\nUser $USER must be in sudoers group and using sudo without password must be enabled.\\nPlease see docs.datasance.com documentation for more details.\"\n\techo $MSG\n\texit 1\nfi\n"),
	}
	filek := &embedded.EmbeddedFile{
		Filename:    "airgap-controller/init.sh",
		FileModTime: time.Unix(1770218728, 0),

		Content: string("#!/bin/sh\n# Script to detect Linux distribution and version\n# Used as a precursor for system-specific installations\n\n# Exit on error and print commands for debugging\nset -e\nset -x\n\n# Define user variable\nuser=\"$(id -un 2>/dev/null || true)\"\n\n# Check if a command exists\ncommand_exists() {\n    command -v \"$@\" > /dev/null 2>&1\n}\n\n# Detect the Linux distribution\nget_distribution() {\n    lsb_dist=\"\"\n    dist_version=\"\"\n    \n    # Every system that we officially support has /etc/os-release\n    if [ -r /etc/os-release ]; then\n        \n        lsb_dist=\"$(. /etc/os-release && echo \"$ID\")\"\n        \n        dist_version=\"$(. /etc/os-release && echo \"$VERSION_ID\")\"\n        lsb_dist=\"$(echo \"$lsb_dist\" | tr '[:upper:]' '[:lower:]')\"\n    else\n        echo \"Error: Unsupported Linux distribution! /etc/os-release not found.\"\n        exit 1\n    fi\n    \n    echo \"# Detected distribution: $lsb_dist (version: $dist_version)\"\n}\n\n# Check if this is a forked Linux distro\ncheck_forked() {\n    # Skip if lsb_release doesn't exist\n    if ! command_exists lsb_release; then\n        return\n    fi\n    \n    # Check if the `-u` option is supported\n    set +e\n    lsb_release -a > /dev/null 2>&1\n    lsb_release_exit_code=$?\n    set -e\n\n    # Check if the command has exited successfully, it means we're in a forked distro\n    if [ \"$lsb_release_exit_code\" = \"0\" ]; then\n        # Get the upstream release info\n        current_lsb_dist=$(lsb_release -a 2>&1 | tr '[:upper:]' '[:lower:]' | grep -E 'id' | cut -d ':' -f 2 | tr -d '[:space:]')\n        current_dist_version=$(lsb_release -a 2>&1 | tr '[:upper:]' '[:lower:]' | grep -E 'codename' | cut -d ':' -f 2 | tr -d '[:space:]')\n\n        # Print info about current distro\n        echo \"You're using '$current_lsb_dist' version '$current_dist_version'.\"\n        \n        # Check if current is different from detected (indicating a fork)\n        if [ \"$current_lsb_dist\" != \"$lsb_dist\" ] || [ \"$current_dist_version\" != \"$dist_version\" ]; then\n            echo \"Upstream release is '$lsb_dist' version '$dist_version'.\"\n        fi\n    else\n        # Additional checks for specific distros that might not be properly detected\n        if [ -r /etc/debian_version ] && [ \"$lsb_dist\" != \"ubuntu\" ] && [ \"$lsb_dist\" != \"raspbian\" ]; then\n            if [ \"$lsb_dist\" = \"osmc\" ]; then\n                # OSMC runs Raspbian\n                lsb_dist=raspbian\n            else\n                # We're Debian and don't even know it!\n                lsb_dist=debian\n            fi\n            # Get Debian version and map it to codename\n            dist_version=\"$(sed 's/\\/.*//' /etc/debian_version | sed 's/\\..*//')\"\n            case \"$dist_version\" in\n                14)\n                    dist_version=\"forky\"\n                ;;\n                13)\n                    dist_version=\"trixie\"\n                ;;\n                12)\n                    dist_version=\"bookworm\"\n                ;;\n                11)\n                    dist_version=\"bullseye\"\n                ;;\n                10)\n                    dist_version=\"buster\"\n                ;;\n                9)\n                    dist_version=\"stretch\"\n                ;;\n                8|'Kali Linux 2')\n                    dist_version=\"jessie\"\n                ;;\n                7)\n                    dist_version=\"wheezy\"\n                ;;\n            esac\n        elif [ -r /etc/redhat-release ] && [ -z \"$lsb_dist\" ]; then\n            lsb_dist=redhat\n            # Extract version from redhat-release file\n            dist_version=\"$(sed 's/.*release \\([0-9.]*\\).*/\\1/' /etc/redhat-release)\"\n        fi\n    fi\n}\n\n# Set up sudo command if necessary\nsetup_sudo() {\n    sh_c='sh -c'\n    if [ \"$user\" != 'root' ]; then\n        if command_exists sudo; then\n            sh_c='sudo -E sh -c'\n        elif command_exists su; then\n            sh_c='su -c'\n        else\n            echo \"Error: this installer needs the ability to run commands as root.\"\n            echo \"We are unable to find either 'sudo' or 'su' available to make this happen.\"\n            exit 1\n        fi\n    fi\n    echo \"# Using command executor: $sh_c\"\n}\n\n# Refine distribution version detection based on the distro\nrefine_distribution_version() {\n    case \"$lsb_dist\" in\n        ubuntu)\n            if command_exists lsb_release; then\n                dist_version=\"$(lsb_release --codename | cut -f2)\"\n            fi\n            if [ -z \"$dist_version\" ] && [ -r /etc/lsb-release ]; then\n                \n                dist_version=\"$(. /etc/lsb-release && echo \"$DISTRIB_CODENAME\")\"\n            fi\n        ;;\n\n        debian|raspbian)\n            # If we only have a number, map it to a codename for better recognition\n            if echo \"$dist_version\" | grep -qE '^[0-9]+$'; then\n                case \"$dist_version\" in\n                    14)\n                        dist_version=\"forky\"\n                    ;;\n                    13)\n                        dist_version=\"trixie\"\n                    ;;\n                    12)\n                        dist_version=\"bookworm\"\n                    ;;\n                    11)\n                        dist_version=\"bullseye\"\n                    ;;\n                    10)\n                        # Handle special case for Buster\n                        dist_version=\"buster\"\n                        if [ \"$user\" = 'root' ]; then\n                            apt-get update --allow-releaseinfo-change || true\n                        elif command_exists sudo; then\n                            sudo apt-get update --allow-releaseinfo-change || true\n                        fi\n                    ;;\n                    9)\n                        dist_version=\"stretch\"\n                    ;;\n                    8)\n                        dist_version=\"jessie\"\n                    ;;\n                    7)\n                        dist_version=\"wheezy\"\n                    ;;\n                esac\n            fi\n        ;;\n\n        centos|rhel|fedora|ol)\n            # Make sure we have a version number\n            if [ -z \"$dist_version\" ] && [ -r /etc/os-release ]; then\n                \n                dist_version=\"$(. /etc/os-release && echo \"$VERSION_ID\")\"\n            fi\n            if [ -z \"$dist_version\" ] && [ -r /etc/redhat-release ]; then\n                dist_version=\"$(sed 's/.*release \\([0-9.]*\\).*/\\1/' /etc/redhat-release)\"\n            fi\n        ;;\n\n        sles|opensuse)\n            if [ -z \"$dist_version\" ] && [ -r /etc/os-release ]; then\n                dist_version=\"$(. /etc/os-release && echo \"$VERSION_ID\")\"\n            fi\n            # Fallback for older versions\n            if [ -z \"$dist_version\" ] && [ -r /etc/SuSE-release ]; then\n                dist_version=\"$(grep VERSION /etc/SuSE-release | sed 's/^VERSION = //')\"\n            fi\n            # Ensure version is in the correct format (e.g., 15.4 for SLES 15 SP4)\n            if [ -n \"$dist_version\" ]; then\n                # Remove any non-numeric characters except dots\n                dist_version=\"$(echo \"$dist_version\" | sed 's/[^0-9.]//g')\"\n            fi\n            # Normalize distribution name\n            if [ \"$lsb_dist\" = \"sles\" ]; then\n                lsb_dist=\"sles\"\n            elif [ \"$lsb_dist\" = \"opensuse\" ]; then\n                lsb_dist=\"opensuse\"\n            fi\n        ;;\n\n        *)\n            if command_exists lsb_release; then\n                dist_version=\"$(lsb_release --release | cut -f2)\"\n            fi\n            if [ -z \"$dist_version\" ] && [ -r /etc/os-release ]; then\n                \n                dist_version=\"$(. /etc/os-release && echo \"$VERSION_ID\")\"\n            fi\n        ;;\n    esac\n}\n\n# Detect init system \ndetect_init_system() {\n    if command -v systemctl >/dev/null 2>&1 && [ -d /etc/systemd/system ]; then\n        INIT_SYSTEM=\"systemd\"\n    elif [ -f /sbin/init ] && /sbin/init --version 2>/dev/null | grep -q upstart; then\n        INIT_SYSTEM=\"upstart\"\n    elif command -v openrc >/dev/null 2>&1 || [ -f /sbin/openrc ]; then\n        INIT_SYSTEM=\"openrc\"\n    elif [ -d /etc/s6 ] || command -v s6-svc >/dev/null 2>&1; then\n        INIT_SYSTEM=\"s6\"\n    elif command -v runit >/dev/null 2>&1 || [ -d /etc/runit ]; then\n        INIT_SYSTEM=\"runit\"\n    elif [ -d /etc/init.d ]; then\n        INIT_SYSTEM=\"sysvinit\"\n    else\n        INIT_SYSTEM=\"unknown\"\n    fi\n    export INIT_SYSTEM\n    echo \"# Detected init system: $INIT_SYSTEM\"\n}\n\n# Detect package type (deb, rpm, or other)\ndetect_package_type() {\n    case \"$lsb_dist\" in\n        debian|ubuntu|raspbian|mendel)\n            PACKAGE_TYPE=\"deb\"\n            ;;\n        fedora|centos|rhel|ol|sles|opensuse*)\n            PACKAGE_TYPE=\"rpm\"\n            ;;\n        *)\n            if command_exists apt-get || command_exists dpkg; then\n                PACKAGE_TYPE=\"deb\"\n            elif command_exists yum || command_exists dnf || command_exists zypper; then\n                PACKAGE_TYPE=\"rpm\"\n            else\n                PACKAGE_TYPE=\"other\"\n            fi\n            ;;\n    esac\n    export PACKAGE_TYPE\n    echo \"# Detected package type: $PACKAGE_TYPE\"\n}\n\n# Init function\ninit() {\n    # Detect basic distribution info\n    get_distribution\n    \n    # Set up sudo for privileged commands\n    setup_sudo\n    \n    # Refine version information\n    refine_distribution_version\n    \n    # Check if this is a forked distro\n    check_forked\n    \n    # Detect init system and package type (for universal OS/init support)\n    detect_init_system\n    detect_package_type\n    \n    # Print final distribution information\n    echo \"----------------------------------------\"\n    echo \"Linux Distribution: $lsb_dist\"\n    echo \"Version: $dist_version\"\n    echo \"Init system: $INIT_SYSTEM\"\n    echo \"Package type: $PACKAGE_TYPE\"\n    echo \"----------------------------------------\"\n    \n}\n"),
	}
	filel := &embedded.EmbeddedFile{
		Filename:    "airgap-controller/install_container_engine.sh",
		FileModTime: time.Unix(1770219440, 0),

		Content: string("#!/bin/sh\n# Script to configure Docker/Podman for airgap deployment\n# Check-only: verifies container engine is installed (Docker 25+ or Podman 4+), then configures/starts\n# Sources init.sh for distribution detection\n\nset -x\nset -e\n\nCONTAINER_ENGINE_MSG=\"This operating system does not support automatic container engine installation. Please install Docker 25+ or Podman 4+ on the target host and re-run, or use an airgap deployment with a pre-installed engine.\"\n\ncheck_docker_version() {\n    docker_version_num=0\n    if command -v docker >/dev/null 2>&1; then\n        raw=$(docker -v 2>/dev/null | sed -n 's/.*version \\([0-9][0-9]*\\.[0-9][0-9]*\\).*/\\1/p' | tr -d '.')\n        [ -n \"$raw\" ] && docker_version_num=\"$raw\"\n    fi\n    [ \"$docker_version_num\" -ge 2500 ] 2>/dev/null || return 1\n}\n\ncheck_podman_version() {\n    podman_version_num=0\n    if command -v podman >/dev/null 2>&1; then\n        raw=$(podman --version 2>/dev/null | sed -n 's/.*version \\([0-9][0-9]*\\).*/\\1/p')\n        [ -n \"$raw\" ] && podman_version_num=\"$raw\"\n    fi\n    [ \"$podman_version_num\" -ge 4 ] 2>/dev/null || return 1\n}\n\nstart_docker() {\n    set +e\n    if $sh_c \"docker ps\" >/dev/null 2>&1; then\n        set -e\n        return 0\n    fi\n    err_code=1\n    case \"${INIT_SYSTEM:-unknown}\" in\n        systemd) $sh_c \"systemctl start docker\" >/dev/null 2>&1; err_code=$? ;;\n        sysvinit) $sh_c \"service docker start\" >/dev/null 2>&1 || $sh_c \"/etc/init.d/docker start\" >/dev/null 2>&1; err_code=$? ;;\n        openrc) $sh_c \"rc-service docker start\" >/dev/null 2>&1; err_code=$? ;;\n        *)\n            $sh_c \"/etc/init.d/docker start\" >/dev/null 2>&1\n            err_code=$?\n            [ $err_code -ne 0 ] && $sh_c \"systemctl start docker\" >/dev/null 2>&1 && err_code=0\n            [ $err_code -ne 0 ] && $sh_c \"service docker start\" >/dev/null 2>&1 && err_code=0\n            [ $err_code -ne 0 ] && $sh_c \"snap start docker\" >/dev/null 2>&1 && err_code=0\n            ;;\n    esac\n    set -e\n    if [ $err_code -ne 0 ]; then\n        echo \"Could not start Docker daemon\"\n        exit 1\n    fi\n}\n\nstart_podman() {\n    set +e\n    case \"${INIT_SYSTEM:-unknown}\" in\n        systemd)\n            $sh_c \"systemctl start podman\" >/dev/null 2>&1\n            $sh_c \"systemctl start podman.socket\" >/dev/null 2>&1\n            ;;\n        sysvinit) $sh_c \"service podman start\" >/dev/null 2>&1 || $sh_c \"/etc/init.d/podman start\" >/dev/null 2>&1 ;;\n        openrc) $sh_c \"rc-service podman start\" >/dev/null 2>&1 ;;\n        *)\n            $sh_c \"systemctl start podman\" >/dev/null 2>&1 || true\n            $sh_c \"systemctl start podman.socket\" >/dev/null 2>&1 || true\n            $sh_c \"service podman start\" >/dev/null 2>&1 || true\n            ;;\n    esac\n    set -e\n}\n\ndo_modify_daemon() {\n    # Skip for Podman installations\n    if [ \"$USE_PODMAN\" = \"true\" ]; then\n        echo \"# Configuring Podman for CDI directory support...\"\n\n        # Create CDI directories\n        $sh_c \"mkdir -p /etc/cdi /var/run/cdi\"\n\n        # Ensure /etc/containers exists\n        $sh_c \"mkdir -p /etc/containers\"\n\n        # Create containers.conf if it doesn't exist\n        if [ ! -f \"/etc/containers/containers.conf\" ]; then\n            $sh_c 'cat > /etc/containers/containers.conf <<EOF\n[engine]\nruntime = \"crun\"\ncdi_spec_dirs = [\"/etc/cdi\", \"/var/run/cdi\"]\nEOF'\n        else\n            # Check if [engine] block exists\n            if grep -q \"^\\[engine\\]\" /etc/containers/containers.conf; then\n                # Ensure runtime is set under [engine]\n                if grep -q \"^runtime\" /etc/containers/containers.conf; then\n                    $sh_c \"sed -i 's|^runtime *=.*|runtime = \\\"crun\\\"|' /etc/containers/containers.conf\"\n                else\n                    $sh_c \"sed -i '/^\\[engine\\]/a runtime = \\\"crun\\\"' /etc/containers/containers.conf\"\n                fi\n\n                # Ensure cdi_spec_dirs is set under [engine]\n                if grep -q \"^cdi_spec_dirs\" /etc/containers/containers.conf; then\n                    $sh_c \"sed -i 's|^cdi_spec_dirs *=.*|cdi_spec_dirs = [\\\"/etc/cdi\\\", \\\"/var/run/cdi\\\"]|' /etc/containers/containers.conf\"\n                else\n                    $sh_c \"sed -i '/^\\[engine\\]/a cdi_spec_dirs = [\\\"/etc/cdi\\\", \\\"/var/run/cdi\\\"]' /etc/containers/containers.conf\"\n                fi\n            else\n                # Append full engine block if missing\n                $sh_c 'echo -e \"\\n[engine]\\nruntime = \\\"crun\\\"\\ncdi_spec_dirs = [\\\"/etc/cdi\\\", \\\"/var/run/cdi\\\"]\" >> /etc/containers/containers.conf'\n            fi\n        fi\n\n        case \"${INIT_SYSTEM:-unknown}\" in\n            systemd)\n                $sh_c \"systemctl enable podman\" 2>/dev/null || true\n                $sh_c \"systemctl enable podman.socket\" 2>/dev/null || true\n                ;;\n            openrc) $sh_c \"rc-update add podman default\" 2>/dev/null || true ;;\n            sysvinit) $sh_c \"update-rc.d podman defaults\" 2>/dev/null || $sh_c \"chkconfig podman on\" 2>/dev/null || true ;;\n            *) ;;\n        esac\n        start_podman\n        return\n    fi\n    \n    # Original Docker daemon configuration\n    if [ ! -f /etc/docker/daemon.json ]; then\n        echo \"Creating /etc/docker/daemon.json...\"\n        $sh_c \"mkdir -p /etc/docker\"\n        $sh_c 'cat > /etc/docker/daemon.json << EOF\n{\n\t\"storage-driver\": \"overlayfs\",\n    \"features\": {\n        \"containerd-snapshotter\": true,\n        \"cdi\": true\n    },\n    \"cdi-spec-dirs\": [\"/etc/cdi/\", \"/var/run/cdi\"]\n}\nEOF'\n    else\n        echo \"/etc/docker/daemon.json already exists\"\n    fi\n    echo \"Restarting Docker daemon...\"\n    case \"${INIT_SYSTEM:-unknown}\" in\n        systemd)\n            $sh_c \"systemctl daemon-reload\"\n            $sh_c \"systemctl restart docker\"\n            ;;\n        *)\n            $sh_c \"systemctl daemon-reload\" 2>/dev/null || true\n            $sh_c \"systemctl restart docker\" 2>/dev/null || start_docker\n            ;;\n    esac\n}\n\n# Airgap: determine engine by availability (Docker 25+ or Podman 4+)\ndetermine_container_engine() {\n    if check_docker_version; then\n        USE_PODMAN=\"false\"\n        echo \"# Using Docker (25+)\"\n    elif check_podman_version; then\n        USE_PODMAN=\"true\"\n        echo \"# Using Podman (4+)\"\n    else\n        echo \"Error: Docker 25+ or Podman 4+ is required. $CONTAINER_ENGINE_MSG\"\n        exit 1\n    fi\n}\n\n. /etc/iofog/controller/init.sh\ninit\n\ndetermine_container_engine\n\nif [ \"$USE_PODMAN\" = \"false\" ]; then\n    start_docker\nfi\n\ndo_modify_daemon\n\necho \"# Container engine configuration completed successfully\"\n\n\n\n"),
	}
	filem := &embedded.EmbeddedFile{
		Filename:    "airgap-controller/install_iofog.sh",
		FileModTime: time.Unix(1770220970, 0),

		Content: string("#!/bin/sh\nset -x\nset -e\n\n# INSTALL_DIR=\"/opt/iofog\"\nTMP_DIR=\"/tmp/iofog\"\nETC_DIR=\"/etc/iofog/controller\"\nCONTROLLER_LOG_FOLDER=/var/log/iofog-controller\nCONTROLLER_CONTAINER_NAME=\"iofog-controller\"\n\ncommand_exists() {\n    command -v \"$1\" >/dev/null 2>&1\n}\n\ndo_stop_iofog_controller() {\n    if ! command_exists iofog-controller; then\n        return 0\n    fi\n    case \"${INIT_SYSTEM:-systemd}\" in\n        systemd) sudo systemctl stop iofog-controller 2>/dev/null || true ;;\n        sysvinit|openrc) sudo service iofog-controller stop 2>/dev/null || sudo /etc/init.d/iofog-controller stop 2>/dev/null || true ;;\n        s6) sudo s6-svc -d /etc/s6/sv/iofog-controller 2>/dev/null || true ;;\n        runit) sudo sv stop iofog-controller 2>/dev/null || true ;;\n        upstart) sudo initctl stop iofog-controller 2>/dev/null || true ;;\n        *) sudo systemctl stop iofog-controller 2>/dev/null || sudo service iofog-controller stop 2>/dev/null || true ;;\n    esac\n    (docker stop ${CONTROLLER_CONTAINER_NAME} 2>/dev/null || podman stop ${CONTROLLER_CONTAINER_NAME} 2>/dev/null) || true\n}\n\ndo_install_iofog_controller() {\n    echo \"# Installing ioFog controller (airgap mode)...\"\n\n    for FOLDER in ${ETC_DIR} ${CONTROLLER_LOG_FOLDER}; do\n        if [ ! -d \"$FOLDER\" ]; then\n            echo \"Creating folder: $FOLDER\"\n            sudo mkdir -p \"$FOLDER\"\n            sudo chmod 775 \"$FOLDER\"\n        fi\n    done\n\n    USE_PODMAN=\"false\"\n    case \"$lsb_dist\" in\n        rhel|centos|fedora|ol|sles|opensuse*) USE_PODMAN=\"true\" ;;\n    esac\n\n    CONTROLLER_RUN_ARGS=\"-e IOFOG_CONTROLLER_IMAGE=${controller_image} --env-file ${ETC_DIR}/iofog-controller.env -v iofog-controller-db:/home/runner/.npm-global/lib/node_modules/@datasance/iofogcontroller/src/data/sqlite_files/:rw -v iofog-controller-log:/var/log/iofog-controller:rw -p 51121:51121 -p 80:8008 --stop-timeout 60 ${controller_image}\"\n\n    if [ \"${INIT_SYSTEM:-systemd}\" = \"systemd\" ]; then\n        if [ \"$USE_PODMAN\" = \"true\" ]; then\n            echo \"Creating Quadlet container file for ioFog controller...\"\n            sudo mkdir -p /etc/containers/systemd\n            cat <<EOF | sudo tee /etc/containers/systemd/iofog-controller.container > /dev/null\n[Unit]\nDescription=Datasance PoT IoFog Controller Service\nAfter=podman.service\nRequires=podman.service\n\n[Container]\nContainerName=${CONTROLLER_CONTAINER_NAME}\nImage=${controller_image}\nPodmanArgs=--stop-timeout=60\nEnvironment=IOFOG_CONTROLLER_IMAGE=${controller_image}\nEnvironmentFile=${ETC_DIR}/iofog-controller.env\nVolume=iofog-controller-db:/home/runner/.npm-global/lib/node_modules/@datasance/iofogcontroller/src/data/sqlite_files/:rw\nVolume=iofog-controller-log:/var/log/iofog-controller:rw\nPublishPort=51121:51121\nPublishPort=80:8008\nLogDriver=journald\n\n[Service]\nRestart=always\n\n[Install]\nWantedBy=default.target\nEOF\n            sudo systemctl daemon-reload\n            sudo systemctl restart podman 2>/dev/null || true\n            sudo systemctl enable iofog-controller.service\n            sudo systemctl start iofog-controller.service\n        else\n            echo \"Creating systemd service for ioFog controller...\"\n            cat <<EOF | sudo tee /etc/systemd/system/iofog-controller.service > /dev/null\n[Unit]\nDescription=Datasance PoT IoFog Controller Service\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nTimeoutStartSec=0\nRestart=always\nExecStartPre=-/usr/bin/docker rm -f ${CONTROLLER_CONTAINER_NAME}\nExecStart=/usr/bin/docker run --rm --name ${CONTROLLER_CONTAINER_NAME} \\\\\n${CONTROLLER_RUN_ARGS}\nExecStop=/usr/bin/docker stop ${CONTROLLER_CONTAINER_NAME}\n\n[Install]\nWantedBy=default.target\nEOF\n            sudo systemctl daemon-reload\n            sudo systemctl enable iofog-controller.service\n            sudo systemctl start iofog-controller.service\n        fi\n    else\n        if [ \"$USE_PODMAN\" = \"true\" ]; then\n            RUN_CMD=\"podman run --rm -d --name ${CONTROLLER_CONTAINER_NAME} ${CONTROLLER_RUN_ARGS}\"\n            RUN_CMD_FG=\"podman run --rm --name ${CONTROLLER_CONTAINER_NAME} ${CONTROLLER_RUN_ARGS}\"\n        else\n            RUN_CMD=\"docker run --rm -d --name ${CONTROLLER_CONTAINER_NAME} ${CONTROLLER_RUN_ARGS}\"\n            RUN_CMD_FG=\"docker run --rm --name ${CONTROLLER_CONTAINER_NAME} ${CONTROLLER_RUN_ARGS}\"\n        fi\n        if [ \"$USE_PODMAN\" = \"true\" ]; then\n            STOP_CMD=\"podman stop ${CONTROLLER_CONTAINER_NAME}\"\n        else\n            STOP_CMD=\"docker stop ${CONTROLLER_CONTAINER_NAME}\"\n        fi\n        case \"$INIT_SYSTEM\" in\n            sysvinit|openrc)\n                sudo tee /etc/init.d/iofog-controller > /dev/null <<INITSCRIPT\n#!/bin/sh\n### BEGIN INIT INFO\n# Provides:          iofog-controller\n# Required-Start:    \\$network \\$local_fs\n# Required-Stop:     \\$network \\$local_fs\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n### END INIT INFO\ncase \"\\$1\" in\n    start)\n        n=0; while [ \\$n -lt 30 ]; do [ -S /var/run/docker.sock ] || [ -S /run/podman/podman.sock ] && break; n=\\$((n+1)); sleep 1; done\n        [ -S /var/run/docker.sock ] || [ -S /run/podman/podman.sock ] || { echo \"Container engine socket not available\"; exit 1; }\n        if docker ps --format '{{.Names}}' 2>/dev/null | grep -q \"^${CONTROLLER_CONTAINER_NAME}\\$\"; then exit 0; fi\n        if podman ps --format '{{.Names}}' 2>/dev/null | grep -q \"^${CONTROLLER_CONTAINER_NAME}\\$\"; then exit 0; fi\n        $RUN_CMD\n        ;;\n    stop) $STOP_CMD 2>/dev/null || true ;;\n    restart) \\$0 stop; \\$0 start ;;\n    status)\n        if docker ps --format '{{.Names}}' 2>/dev/null | grep -q \"^${CONTROLLER_CONTAINER_NAME}\\$\"; then echo \"running\"; exit 0; fi\n        if podman ps --format '{{.Names}}' 2>/dev/null | grep -q \"^${CONTROLLER_CONTAINER_NAME}\\$\"; then echo \"running\"; exit 0; fi\n        echo \"stopped\"; exit 1\n        ;;\n    *) echo \"Usage: \\$0 {start|stop|restart|status}\"; exit 1 ;;\nesac\nexit 0\nINITSCRIPT\n                sudo chmod +x /etc/init.d/iofog-controller\n                if [ \"$INIT_SYSTEM\" = \"openrc\" ]; then\n                    sudo rc-update add iofog-controller default 2>/dev/null || true\n                    sudo rc-service iofog-controller start\n                else\n                    sudo update-rc.d iofog-controller defaults 2>/dev/null || sudo chkconfig iofog-controller on 2>/dev/null || true\n                    sudo service iofog-controller start 2>/dev/null || sudo /etc/init.d/iofog-controller start\n                fi\n                ;;\n            s6)\n                sudo mkdir -p /etc/s6/sv/iofog-controller\n                printf '#!/bin/sh\\nexec %s\\n' \"$RUN_CMD_FG\" | sudo tee /etc/s6/sv/iofog-controller/run > /dev/null\n                sudo chmod +x /etc/s6/sv/iofog-controller/run\n                [ -d /etc/s6/adminsv/default ] && sudo ln -sf /etc/s6/sv/iofog-controller /etc/s6/adminsv/default/iofog-controller 2>/dev/null || true\n                sudo s6-svc -u /etc/s6/sv/iofog-controller 2>/dev/null || true\n                ;;\n            runit)\n                sudo mkdir -p /etc/runit/sv/iofog-controller\n                printf '#!/bin/sh\\nexec %s\\n' \"$RUN_CMD_FG\" | sudo tee /etc/runit/sv/iofog-controller/run > /dev/null\n                sudo chmod +x /etc/runit/sv/iofog-controller/run\n                [ -d /var/service ] && sudo ln -sf /etc/runit/sv/iofog-controller /var/service/iofog-controller 2>/dev/null || true\n                [ -d /etc/runit/runsvdir/default ] && sudo ln -sf /etc/runit/sv/iofog-controller /etc/runit/runsvdir/default/iofog-controller 2>/dev/null || true\n                sudo sv start iofog-controller 2>/dev/null || true\n                ;;\n            upstart)\n                printf 'description \"IoFog Controller container\"\\nstart on runlevel [2345]\\nstop on runlevel [!2345]\\nrespawn\\nrespawn limit 10 5\\nexec %s\\n' \"$RUN_CMD_FG\" | sudo tee /etc/init/iofog-controller.conf > /dev/null\n                sudo initctl reload-configuration 2>/dev/null || true\n                sudo initctl start iofog-controller 2>/dev/null || true\n                ;;\n            *)\n                sudo tee /etc/init.d/iofog-controller > /dev/null <<INITSCRIPT\n#!/bin/sh\ncase \"\\$1\" in start) n=0; while [ \\$n -lt 30 ]; do [ -S /var/run/docker.sock ] || [ -S /run/podman/podman.sock ] && break; n=\\$((n+1)); sleep 1; done; [ -S /var/run/docker.sock ] || [ -S /run/podman/podman.sock ] || { echo \"Container engine socket not available\"; exit 1; }; $RUN_CMD ;; stop) $STOP_CMD ;; restart) $STOP_CMD; $RUN_CMD ;; *) echo \"Usage: \\$0 {start|stop|restart}\"; exit 1 ;; esac\nINITSCRIPT\n                sudo chmod +x /etc/init.d/iofog-controller\n                sudo /etc/init.d/iofog-controller start\n                ;;\n        esac\n    fi\n\n    EXECUTABLE_FILE=/usr/local/bin/iofog-controller\n    if [ \"$USE_PODMAN\" = \"true\" ]; then\n        cat <<'EOF' | sudo tee ${EXECUTABLE_FILE} > /dev/null\n#!/bin/sh\nCONTAINER_NAME=\"iofog-controller\"\nif ! podman ps --format '{{.Names}}' | grep -q \"^${CONTAINER_NAME}$\"; then\n    echo \"Error: The iofog-controller container is not running.\"\n    exit 1\nfi\nexec podman exec ${CONTAINER_NAME} iofog-controller \"$@\"\nEOF\n    else\n        cat <<'EOF' | sudo tee ${EXECUTABLE_FILE} > /dev/null\n#!/bin/sh\nCONTAINER_NAME=\"iofog-controller\"\nif ! docker ps --format '{{.Names}}' | grep -q \"^${CONTAINER_NAME}$\"; then\n    echo \"Error: The iofog-controller container is not running.\"\n    exit 1\nfi\nexec docker exec ${CONTAINER_NAME} iofog-controller \"$@\"\nEOF\n    fi\n    sudo chmod +x ${EXECUTABLE_FILE}\n\n    echo \"ioFog controller installation completed!\"\n}\n\n# main\ncontroller_image=\"$1\"\n\n. /etc/iofog/controller/init.sh\ninit\ndo_stop_iofog_controller\ndo_install_iofog_controller\n\n\n\n"),
	}
	filen := &embedded.EmbeddedFile{
		Filename:    "airgap-controller/set_env.sh",
		FileModTime: time.Unix(1767396676, 0),

		Content: string("#!/bin/sh\nset -x\nset -e\n\nETC_DIR=\"/etc/iofog/controller\"\nENV_FILE_NAME=iofog-controller.env # Used as an env file in systemd\n\nENV_FILE=\"$ETC_DIR/$ENV_FILE_NAME\"\n\n# Create folder\nmkdir -p \"$ETC_DIR\"\n\n# Env file (for systemd)\nrm -f \"$ENV_FILE\"\ntouch \"$ENV_FILE\"\n\nfor var in \"$@\"\ndo\n  echo \"$var\" >> \"$ENV_FILE\"\ndone"),
	}
	fileo := &embedded.EmbeddedFile{
		Filename:    "airgap-controller/uninstall_iofog.sh",
		FileModTime: time.Unix(1770219306, 0),

		Content: string("#!/bin/sh\nset -x\nset -e\n\n\nCONTROLLER_LOG_DIR=\"iofog-controller-log\"\nCONTAINER_NAME=\"iofog-controller\"\nEXECUTABLE_FILE=/usr/local/bin/iofog-controller\nCONTROLLER_DB=iofog-controller-db\n\n\ndo_uninstall_controller() {\n    echo \"# Removing ioFog controller...\"\n\n    case \"$lsb_dist\" in\n        rhel|fedora|centos|ol|sles|opensuse*) CONTAINER_RUNTIME=\"podman\" ;;\n        *) CONTAINER_RUNTIME=\"docker\" ;;\n    esac\n\n    case \"${INIT_SYSTEM:-systemd}\" in\n        systemd)\n            for f in /etc/systemd/system/iofog-controller.service /etc/containers/systemd/iofog-controller.container; do\n                if [ -f \"$f\" ]; then\n                    echo \"Disabling and stopping systemd service...\"\n                    sudo systemctl stop iofog-controller.service 2>/dev/null || true\n                    sudo systemctl disable iofog-controller.service 2>/dev/null || true\n                    sudo rm -f \"$f\"\n                    sudo systemctl daemon-reload\n                    break\n                fi\n            done\n            ;;\n        sysvinit|openrc)\n            if [ -f /etc/init.d/iofog-controller ]; then\n                sudo service iofog-controller stop 2>/dev/null || sudo /etc/init.d/iofog-controller stop 2>/dev/null || true\n                [ \"$INIT_SYSTEM\" = \"openrc\" ] && sudo rc-update del iofog-controller default 2>/dev/null || true\n                sudo update-rc.d -f iofog-controller remove 2>/dev/null || sudo chkconfig --del iofog-controller 2>/dev/null || true\n                sudo rm -f /etc/init.d/iofog-controller\n            fi\n            ;;\n        s6)\n            sudo s6-svc -d /etc/s6/sv/iofog-controller 2>/dev/null || true\n            sudo rm -rf /etc/s6/sv/iofog-controller\n            [ -L /etc/s6/adminsv/default/iofog-controller ] && sudo rm -f /etc/s6/adminsv/default/iofog-controller\n            ;;\n        runit)\n            sudo sv stop iofog-controller 2>/dev/null || true\n            [ -L /var/service/iofog-controller ] && sudo rm -f /var/service/iofog-controller\n            [ -L /etc/runit/runsvdir/default/iofog-controller ] && sudo rm -f /etc/runit/runsvdir/default/iofog-controller\n            sudo rm -rf /etc/runit/sv/iofog-controller\n            ;;\n        upstart)\n            sudo initctl stop iofog-controller 2>/dev/null || true\n            sudo rm -f /etc/init/iofog-controller.conf\n            ;;\n        *)\n            sudo systemctl stop iofog-controller 2>/dev/null || true\n            sudo systemctl disable iofog-controller 2>/dev/null || true\n            sudo rm -f /etc/systemd/system/iofog-controller.service /etc/containers/systemd/iofog-controller.container\n            sudo systemctl daemon-reload 2>/dev/null || true\n            [ -f /etc/init.d/iofog-controller ] && sudo /etc/init.d/iofog-controller stop 2>/dev/null || true\n            sudo rm -f /etc/init.d/iofog-controller\n            ;;\n    esac\n\n    if sudo ${CONTAINER_RUNTIME} ps -a --format '{{.Names}}' 2>/dev/null | grep -q \"^${CONTAINER_NAME}$\"; then\n        echo \"Stopping and removing the ioFog controller container...\"\n        sudo ${CONTAINER_RUNTIME} stop ${CONTAINER_NAME} 2>/dev/null || true\n        sudo ${CONTAINER_RUNTIME} rm ${CONTAINER_NAME} 2>/dev/null || true\n    fi\n\n    # Remove config files\n    echo \"Checking if the ${CONTAINER_RUNTIME} volume exists...\"\n\n    if sudo ${CONTAINER_RUNTIME} volume inspect \"${CONTROLLER_DB}\" >/dev/null 2>&1; then\n        echo \"${CONTAINER_RUNTIME} volume '${CONTROLLER_DB}' found. Removing...\"\n        sudo ${CONTAINER_RUNTIME} volume rm \"${CONTROLLER_DB}\"\n        echo \"${CONTAINER_RUNTIME} volume '${CONTROLLER_DB}' has been removed.\"\n    else\n        echo \"${CONTAINER_RUNTIME} volume '${CONTROLLER_DB}' does not exist. Skipping removal.\"\n    fi\n\n    # Remove log files\n    echo \"Removing log files...\"\n    if sudo ${CONTAINER_RUNTIME} volume inspect \"${CONTROLLER_LOG_DIR}\" >/dev/null 2>&1; then\n        echo \"${CONTAINER_RUNTIME} volume '${CONTROLLER_LOG_DIR}' found. Removing...\"\n        sudo ${CONTAINER_RUNTIME} volume rm \"${CONTROLLER_LOG_DIR}\"\n        echo \"${CONTAINER_RUNTIME} volume '${CONTROLLER_LOG_DIR}' has been removed.\"\n    else\n        echo \"${CONTAINER_RUNTIME} volume '${CONTROLLER_LOG_DIR}' does not exist. Skipping removal.\"\n    fi\n\n\n    # Remove the executable script\n    if [ -f ${EXECUTABLE_FILE} ]; then\n        echo \"Removing the iofog-controller executable script...\"\n        sudo rm -f ${EXECUTABLE_FILE}\n    fi\n\n    echo \"ioFog controller uninstalled successfully!\"\n}\n\n. /etc/iofog/controller/init.sh\ninit\n\ndo_uninstall_controller"),
	}
	fileq := &embedded.EmbeddedFile{
		Filename:    "container-agent/check_prereqs.sh",
		FileModTime: time.Unix(1770218653, 0),

		Content: string("#!/bin/sh\nset -x\n\n# Check if running as root or via sudo \nif [ \"$(id -u)\" -ne 0 ]; then\n\techo \"Error: This script must be run as root or via sudo\"\n\techo \"   Please run: sudo \\$0 \\$*\"\n\texit 1\nfi\n\n# Check can sudo without password (when re-executed or for subcommands)\nif ! $(sudo ls /tmp/ > /dev/null); then\n\tMSG=\"Unable to successfully use sudo with user $USER on this host.\\nUser $USER must be in sudoers group and using sudo without password must be enabled.\\nPlease see docs.datasance.com documentation for more details.\"\n\techo $MSG\n\texit 1\nfi\n"),
	}
	filer := &embedded.EmbeddedFile{
		Filename:    "container-agent/init.sh",
		FileModTime: time.Unix(1770218728, 0),

		Content: string("#!/bin/sh\n# Script to detect Linux distribution and version\n# Used as a precursor for system-specific installations\n\n# Exit on error and print commands for debugging\nset -e\nset -x\n\n# Define user variable\nuser=\"$(id -un 2>/dev/null || true)\"\n\n# Check if a command exists\ncommand_exists() {\n    command -v \"$@\" > /dev/null 2>&1\n}\n\n# Detect the Linux distribution\nget_distribution() {\n    lsb_dist=\"\"\n    dist_version=\"\"\n    \n    # Every system that we officially support has /etc/os-release\n    if [ -r /etc/os-release ]; then\n        \n        lsb_dist=\"$(. /etc/os-release && echo \"$ID\")\"\n        \n        dist_version=\"$(. /etc/os-release && echo \"$VERSION_ID\")\"\n        lsb_dist=\"$(echo \"$lsb_dist\" | tr '[:upper:]' '[:lower:]')\"\n    else\n        echo \"Error: Unsupported Linux distribution! /etc/os-release not found.\"\n        exit 1\n    fi\n    \n    echo \"# Detected distribution: $lsb_dist (version: $dist_version)\"\n}\n\n# Check if this is a forked Linux distro\ncheck_forked() {\n    # Skip if lsb_release doesn't exist\n    if ! command_exists lsb_release; then\n        return\n    fi\n    \n    # Check if the `-u` option is supported\n    set +e\n    lsb_release -a > /dev/null 2>&1\n    lsb_release_exit_code=$?\n    set -e\n\n    # Check if the command has exited successfully, it means we're in a forked distro\n    if [ \"$lsb_release_exit_code\" = \"0\" ]; then\n        # Get the upstream release info\n        current_lsb_dist=$(lsb_release -a 2>&1 | tr '[:upper:]' '[:lower:]' | grep -E 'id' | cut -d ':' -f 2 | tr -d '[:space:]')\n        current_dist_version=$(lsb_release -a 2>&1 | tr '[:upper:]' '[:lower:]' | grep -E 'codename' | cut -d ':' -f 2 | tr -d '[:space:]')\n\n        # Print info about current distro\n        echo \"You're using '$current_lsb_dist' version '$current_dist_version'.\"\n        \n        # Check if current is different from detected (indicating a fork)\n        if [ \"$current_lsb_dist\" != \"$lsb_dist\" ] || [ \"$current_dist_version\" != \"$dist_version\" ]; then\n            echo \"Upstream release is '$lsb_dist' version '$dist_version'.\"\n        fi\n    else\n        # Additional checks for specific distros that might not be properly detected\n        if [ -r /etc/debian_version ] && [ \"$lsb_dist\" != \"ubuntu\" ] && [ \"$lsb_dist\" != \"raspbian\" ]; then\n            if [ \"$lsb_dist\" = \"osmc\" ]; then\n                # OSMC runs Raspbian\n                lsb_dist=raspbian\n            else\n                # We're Debian and don't even know it!\n                lsb_dist=debian\n            fi\n            # Get Debian version and map it to codename\n            dist_version=\"$(sed 's/\\/.*//' /etc/debian_version | sed 's/\\..*//')\"\n            case \"$dist_version\" in\n                14)\n                    dist_version=\"forky\"\n                ;;\n                13)\n                    dist_version=\"trixie\"\n                ;;\n                12)\n                    dist_version=\"bookworm\"\n                ;;\n                11)\n                    dist_version=\"bullseye\"\n                ;;\n                10)\n                    dist_version=\"buster\"\n                ;;\n                9)\n                    dist_version=\"stretch\"\n                ;;\n                8|'Kali Linux 2')\n                    dist_version=\"jessie\"\n                ;;\n                7)\n                    dist_version=\"wheezy\"\n                ;;\n            esac\n        elif [ -r /etc/redhat-release ] && [ -z \"$lsb_dist\" ]; then\n            lsb_dist=redhat\n            # Extract version from redhat-release file\n            dist_version=\"$(sed 's/.*release \\([0-9.]*\\).*/\\1/' /etc/redhat-release)\"\n        fi\n    fi\n}\n\n# Set up sudo command if necessary\nsetup_sudo() {\n    sh_c='sh -c'\n    if [ \"$user\" != 'root' ]; then\n        if command_exists sudo; then\n            sh_c='sudo -E sh -c'\n        elif command_exists su; then\n            sh_c='su -c'\n        else\n            echo \"Error: this installer needs the ability to run commands as root.\"\n            echo \"We are unable to find either 'sudo' or 'su' available to make this happen.\"\n            exit 1\n        fi\n    fi\n    echo \"# Using command executor: $sh_c\"\n}\n\n# Refine distribution version detection based on the distro\nrefine_distribution_version() {\n    case \"$lsb_dist\" in\n        ubuntu)\n            if command_exists lsb_release; then\n                dist_version=\"$(lsb_release --codename | cut -f2)\"\n            fi\n            if [ -z \"$dist_version\" ] && [ -r /etc/lsb-release ]; then\n                \n                dist_version=\"$(. /etc/lsb-release && echo \"$DISTRIB_CODENAME\")\"\n            fi\n        ;;\n\n        debian|raspbian)\n            # If we only have a number, map it to a codename for better recognition\n            if echo \"$dist_version\" | grep -qE '^[0-9]+$'; then\n                case \"$dist_version\" in\n                    14)\n                        dist_version=\"forky\"\n                    ;;\n                    13)\n                        dist_version=\"trixie\"\n                    ;;\n                    12)\n                        dist_version=\"bookworm\"\n                    ;;\n                    11)\n                        dist_version=\"bullseye\"\n                    ;;\n                    10)\n                        # Handle special case for Buster\n                        dist_version=\"buster\"\n                        if [ \"$user\" = 'root' ]; then\n                            apt-get update --allow-releaseinfo-change || true\n                        elif command_exists sudo; then\n                            sudo apt-get update --allow-releaseinfo-change || true\n                        fi\n                    ;;\n                    9)\n                        dist_version=\"stretch\"\n                    ;;\n                    8)\n                        dist_version=\"jessie\"\n                    ;;\n                    7)\n                        dist_version=\"wheezy\"\n                    ;;\n                esac\n            fi\n        ;;\n\n        centos|rhel|fedora|ol)\n            # Make sure we have a version number\n            if [ -z \"$dist_version\" ] && [ -r /etc/os-release ]; then\n                \n                dist_version=\"$(. /etc/os-release && echo \"$VERSION_ID\")\"\n            fi\n            if [ -z \"$dist_version\" ] && [ -r /etc/redhat-release ]; then\n                dist_version=\"$(sed 's/.*release \\([0-9.]*\\).*/\\1/' /etc/redhat-release)\"\n            fi\n        ;;\n\n        sles|opensuse)\n            if [ -z \"$dist_version\" ] && [ -r /etc/os-release ]; then\n                dist_version=\"$(. /etc/os-release && echo \"$VERSION_ID\")\"\n            fi\n            # Fallback for older versions\n            if [ -z \"$dist_version\" ] && [ -r /etc/SuSE-release ]; then\n                dist_version=\"$(grep VERSION /etc/SuSE-release | sed 's/^VERSION = //')\"\n            fi\n            # Ensure version is in the correct format (e.g., 15.4 for SLES 15 SP4)\n            if [ -n \"$dist_version\" ]; then\n                # Remove any non-numeric characters except dots\n                dist_version=\"$(echo \"$dist_version\" | sed 's/[^0-9.]//g')\"\n            fi\n            # Normalize distribution name\n            if [ \"$lsb_dist\" = \"sles\" ]; then\n                lsb_dist=\"sles\"\n            elif [ \"$lsb_dist\" = \"opensuse\" ]; then\n                lsb_dist=\"opensuse\"\n            fi\n        ;;\n\n        *)\n            if command_exists lsb_release; then\n                dist_version=\"$(lsb_release --release | cut -f2)\"\n            fi\n            if [ -z \"$dist_version\" ] && [ -r /etc/os-release ]; then\n                \n                dist_version=\"$(. /etc/os-release && echo \"$VERSION_ID\")\"\n            fi\n        ;;\n    esac\n}\n\n# Detect init system \ndetect_init_system() {\n    if command -v systemctl >/dev/null 2>&1 && [ -d /etc/systemd/system ]; then\n        INIT_SYSTEM=\"systemd\"\n    elif [ -f /sbin/init ] && /sbin/init --version 2>/dev/null | grep -q upstart; then\n        INIT_SYSTEM=\"upstart\"\n    elif command -v openrc >/dev/null 2>&1 || [ -f /sbin/openrc ]; then\n        INIT_SYSTEM=\"openrc\"\n    elif [ -d /etc/s6 ] || command -v s6-svc >/dev/null 2>&1; then\n        INIT_SYSTEM=\"s6\"\n    elif command -v runit >/dev/null 2>&1 || [ -d /etc/runit ]; then\n        INIT_SYSTEM=\"runit\"\n    elif [ -d /etc/init.d ]; then\n        INIT_SYSTEM=\"sysvinit\"\n    else\n        INIT_SYSTEM=\"unknown\"\n    fi\n    export INIT_SYSTEM\n    echo \"# Detected init system: $INIT_SYSTEM\"\n}\n\n# Detect package type (deb, rpm, or other)\ndetect_package_type() {\n    case \"$lsb_dist\" in\n        debian|ubuntu|raspbian|mendel)\n            PACKAGE_TYPE=\"deb\"\n            ;;\n        fedora|centos|rhel|ol|sles|opensuse*)\n            PACKAGE_TYPE=\"rpm\"\n            ;;\n        *)\n            if command_exists apt-get || command_exists dpkg; then\n                PACKAGE_TYPE=\"deb\"\n            elif command_exists yum || command_exists dnf || command_exists zypper; then\n                PACKAGE_TYPE=\"rpm\"\n            else\n                PACKAGE_TYPE=\"other\"\n            fi\n            ;;\n    esac\n    export PACKAGE_TYPE\n    echo \"# Detected package type: $PACKAGE_TYPE\"\n}\n\n# Init function\ninit() {\n    # Detect basic distribution info\n    get_distribution\n    \n    # Set up sudo for privileged commands\n    setup_sudo\n    \n    # Refine version information\n    refine_distribution_version\n    \n    # Check if this is a forked distro\n    check_forked\n    \n    # Detect init system and package type (for universal OS/init support)\n    detect_init_system\n    detect_package_type\n    \n    # Print final distribution information\n    echo \"----------------------------------------\"\n    echo \"Linux Distribution: $lsb_dist\"\n    echo \"Version: $dist_version\"\n    echo \"Init system: $INIT_SYSTEM\"\n    echo \"Package type: $PACKAGE_TYPE\"\n    echo \"----------------------------------------\"\n    \n}\n"),
	}
	files := &embedded.EmbeddedFile{
		Filename:    "container-agent/install_container_engine.sh",
		FileModTime: time.Unix(1770218800, 0),

		Content: string("#!/bin/sh\n# Script to install Docker/Podman based on Linux distribution\n# Sources init.sh for distribution detection\n\nset -x\nset -e\n\nCONTAINER_ENGINE_MSG=\"This operating system does not support automatic container engine installation. Please install Docker 25+ or Podman 4+ on the target host and re-run, or use an airgap deployment with a pre-installed engine.\"\n\ncheck_docker_version() {\n    docker_version_num=0\n    if command -v docker >/dev/null 2>&1; then\n        raw=$(docker -v 2>/dev/null | sed -n 's/.*version \\([0-9][0-9]*\\.[0-9][0-9]*\\).*/\\1/p' | tr -d '.')\n        [ -n \"$raw\" ] && docker_version_num=\"$raw\"\n    fi\n    [ \"$docker_version_num\" -ge 2500 ] 2>/dev/null || return 1\n}\n\ncheck_podman_version() {\n    podman_version_num=0\n    if command -v podman >/dev/null 2>&1; then\n        raw=$(podman --version 2>/dev/null | sed -n 's/.*version \\([0-9][0-9]*\\).*/\\1/p')\n        [ -n \"$raw\" ] && podman_version_num=\"$raw\"\n    fi\n    [ \"$podman_version_num\" -ge 4 ] 2>/dev/null || return 1\n}\n\nstart_docker() {\n    set +e\n    if $sh_c \"docker ps\" >/dev/null 2>&1; then\n        set -e\n        return 0\n    fi\n    err_code=1\n    case \"${INIT_SYSTEM:-unknown}\" in\n        systemd)\n            $sh_c \"systemctl start docker\" >/dev/null 2>&1\n            err_code=$?\n            ;;\n        sysvinit)\n            $sh_c \"service docker start\" >/dev/null 2>&1 || $sh_c \"/etc/init.d/docker start\" >/dev/null 2>&1\n            err_code=$?\n            ;;\n        openrc)\n            $sh_c \"rc-service docker start\" >/dev/null 2>&1\n            err_code=$?\n            ;;\n        *)\n            $sh_c \"/etc/init.d/docker start\" >/dev/null 2>&1\n            err_code=$?\n            [ $err_code -ne 0 ] && $sh_c \"systemctl start docker\" >/dev/null 2>&1 && err_code=0\n            [ $err_code -ne 0 ] && $sh_c \"service docker start\" >/dev/null 2>&1 && err_code=0\n            [ $err_code -ne 0 ] && $sh_c \"snap start docker\" >/dev/null 2>&1 && err_code=0\n            ;;\n    esac\n    set -e\n    if [ $err_code -ne 0 ]; then\n        echo \"Could not start Docker daemon\"\n        exit 1\n    fi\n}\n\nstart_podman() {\n    set +e\n    case \"${INIT_SYSTEM:-unknown}\" in\n        systemd)\n            $sh_c \"systemctl start podman\" >/dev/null 2>&1\n            $sh_c \"systemctl start podman.socket\" >/dev/null 2>&1\n            ;;\n        sysvinit)\n            $sh_c \"service podman start\" >/dev/null 2>&1 || $sh_c \"/etc/init.d/podman start\" >/dev/null 2>&1\n            ;;\n        openrc)\n            $sh_c \"rc-service podman start\" >/dev/null 2>&1\n            ;;\n        *)\n            $sh_c \"systemctl start podman\" >/dev/null 2>&1 || true\n            $sh_c \"systemctl start podman.socket\" >/dev/null 2>&1 || true\n            $sh_c \"service podman start\" >/dev/null 2>&1 || true\n            ;;\n    esac\n    set -e\n}\n\n\ndo_modify_daemon() {\n    # Skip for Podman installations\n    if [ \"$USE_PODMAN\" = \"true\" ]; then\n        echo \"# Configuring Podman for CDI directory support...\"\n\n        # Create CDI directories\n        $sh_c \"mkdir -p /etc/cdi /var/run/cdi\"\n\n        # Ensure /etc/containers exists\n        $sh_c \"mkdir -p /etc/containers\"\n\n        # Create containers.conf if it doesn't exist\n        if [ ! -f \"/etc/containers/containers.conf\" ]; then\n            $sh_c 'cat > /etc/containers/containers.conf <<EOF\n[engine]\nruntime = \"crun\"\ncdi_spec_dirs = [\"/etc/cdi\", \"/var/run/cdi\"]\nEOF'\n        else\n            # Check if [engine] block exists\n            if grep -q \"^\\[engine\\]\" /etc/containers/containers.conf; then\n                # Ensure runtime is set under [engine]\n                if grep -q \"^runtime\" /etc/containers/containers.conf; then\n                    $sh_c \"sed -i 's|^runtime *=.*|runtime = \\\"crun\\\"|' /etc/containers/containers.conf\"\n                else\n                    $sh_c \"sed -i '/^\\[engine\\]/a runtime = \\\"crun\\\"' /etc/containers/containers.conf\"\n                fi\n\n                # Ensure cdi_spec_dirs is set under [engine]\n                if grep -q \"^cdi_spec_dirs\" /etc/containers/containers.conf; then\n                    $sh_c \"sed -i 's|^cdi_spec_dirs *=.*|cdi_spec_dirs = [\\\"/etc/cdi\\\", \\\"/var/run/cdi\\\"]|' /etc/containers/containers.conf\"\n                else\n                    $sh_c \"sed -i '/^\\[engine\\]/a cdi_spec_dirs = [\\\"/etc/cdi\\\", \\\"/var/run/cdi\\\"]' /etc/containers/containers.conf\"\n                fi\n            else\n                # Append full engine block if missing\n                $sh_c 'echo -e \"\\n[engine]\\nruntime = \\\"crun\\\"\\ncdi_spec_dirs = [\\\"/etc/cdi\\\", \\\"/var/run/cdi\\\"]\" >> /etc/containers/containers.conf'\n            fi\n        fi\n\n        case \"${INIT_SYSTEM:-unknown}\" in\n            systemd)\n                $sh_c \"systemctl enable podman\" 2>/dev/null || true\n                $sh_c \"systemctl enable podman.socket\" 2>/dev/null || true\n                ;;\n            openrc)\n                $sh_c \"rc-update add podman default\" 2>/dev/null || true\n                ;;\n            sysvinit)\n                $sh_c \"update-rc.d podman defaults\" 2>/dev/null || $sh_c \"chkconfig podman on\" 2>/dev/null || true\n                ;;\n            *) ;;\n        esac\n        start_podman\n        return\n    fi\n\n    # Original Docker daemon configuration\n    if [ ! -f /etc/docker/daemon.json ]; then\n        echo \"Creating /etc/docker/daemon.json...\"\n        $sh_c \"mkdir -p /etc/docker\"\n        $sh_c 'cat > /etc/docker/daemon.json << EOF\n{\n\t\"storage-driver\": \"overlayfs\",\n    \"features\": {\n        \"containerd-snapshotter\": true,\n        \"cdi\": true\n    },\n    \"cdi-spec-dirs\": [\"/etc/cdi/\", \"/var/run/cdi\"]\n}\nEOF'\n    else\n        echo \"/etc/docker/daemon.json already exists\"\n    fi\n    echo \"Restarting Docker daemon...\"\n    case \"${INIT_SYSTEM:-unknown}\" in\n        systemd)\n            $sh_c \"systemctl daemon-reload\"\n            $sh_c \"systemctl restart docker\"\n            ;;\n        *)\n            $sh_c \"systemctl daemon-reload\" 2>/dev/null || true\n            $sh_c \"systemctl restart docker\" 2>/dev/null || start_docker\n            ;;\n    esac\n}\n\ndo_set_datasance_repo() {\n    echo \"# Setting up Datasance repository for $lsb_dist...\"\n    \n    case \"$lsb_dist\" in\n        fedora|centos|rhel|ol|sles|opensuse*)\n            # RPM-based distros\n            $sh_c \"cd /etc/yum.repos.d && curl -s https://downloads.datasance.com/datasance.repo -LO\"\n            if [ \"$lsb_dist\" = \"fedora\" ] || [ \"$lsb_dist\" = \"centos\" ] || [ \"$lsb_dist\" = \"rhel\" ] || [ \"$lsb_dist\" = \"ol\" ]; then\n                $sh_c \"yum update -y\"\n            else\n                $sh_c \"zypper refresh\"\n            fi\n        ;;\n        debian|ubuntu|raspbian|*)\n            # DEB-based distros\n            $sh_c \"apt update -qy\"\n            $sh_c \"apt install -qy debian-archive-keyring apt-transport-https\"\n            $sh_c \"wget -qO- https://downloads.datasance.com/datasance.gpg | tee /etc/apt/trusted.gpg.d/datasance.gpg >/dev/null\"\n            $sh_c \"echo 'deb [arch=all signed-by=/etc/apt/trusted.gpg.d/datasance.gpg] https://downloads.datasance.com/deb stable main' | tee /etc/apt/sources.list.d/datasance.list >/dev/null\"\n            $sh_c \"apt update -qy\"\n        ;;\n    esac\n}\n\ndo_install_wasm_shim() {\n    echo \"# Installing WebAssembly runtime support for $lsb_dist...\"\n    arch=$(uname -m)\n\n    # Normalize architecture for consistency\n    case \"$arch\" in\n        arm64|aarch64|armv7l|armv8) arch=\"aarch64\" ;;\n        amd64|x86_64) arch=\"x86_64\" ;;\n    esac\n\n    if [ \"$USE_PODMAN\" = \"true\" ]; then\n        case \"$lsb_dist\" in\n            fedora|centos|rhel|ol)\n                $sh_c \"yum install -y crun crun-wasm\"\n            ;;\n            sles|opensuse*)\n                $sh_c \"zypper install -y crun\"\n                # Note: crun-wasm might not be available in SUSE repos\n                # In that case, we'll need to use the standard crun\n            ;;\n        esac\n        \n    else\n        # Original containerd WASM shim installation for Docker\n        case \"$lsb_dist\" in\n            debian|raspbian|ubuntu)\n                $sh_c \"apt update -qy\" || { echo \"Failed to update apt packages\"; exit 1; }\n\n                if [ \"$arch\" = \"aarch64\" ]; then\n                    $sh_c \"apt install -qy containerd-shim-wasmedge-v1-aarch64-linux-gnu\"\n                    $sh_c \"apt install -qy containerd-shim-wasmer-v1-aarch64-linux-gnu\"\n                    $sh_c \"apt install -qy containerd-shim-wasmtime-v1-aarch64-linux-gnu\"\n                elif [ \"$arch\" = \"x86_64\" ]; then\n                    $sh_c \"apt install -qy containerd-shim-wasmedge-v1-x86-64-linux-gnu\"\n                    $sh_c \"apt install -qy containerd-shim-wasmer-v1-x86-64-linux-gnu\"\n                    $sh_c \"apt install -qy containerd-shim-wasmtime-v1-x86-64-linux-gnu\"\n                else\n                    echo \"Unsupported architecture: $arch for $lsb_dist\"\n                    exit 1\n                fi\n            ;;\n            *)\n                echo \"Unsupported OS: $lsb_dist\"\n                exit 1\n            ;;\n        esac\n    fi\n}\n\ndo_install_container_engine() {\n    if [ \"$PACKAGE_TYPE\" = \"other\" ]; then\n        if check_docker_version; then\n            USE_PODMAN=\"false\"\n            echo \"# Docker (>= 25) found; using Docker.\"\n            start_docker\n            do_modify_daemon\n            return 0\n        fi\n        if check_podman_version; then\n            USE_PODMAN=\"true\"\n            echo \"# Podman (>= 4) found; using Podman.\"\n            do_modify_daemon\n            return 0\n        fi\n        echo \"Error: $CONTAINER_ENGINE_MSG\"\n        exit 1\n    fi\n\n    if [ \"$USE_PODMAN\" = \"true\" ]; then\n        echo \"# Installing Podman and related packages...\"\n        case \"$lsb_dist\" in\n            fedora|centos|rhel|ol)\n                $sh_c \"yum install -y podman crun podman-docker\"\n            ;;\n            sles|opensuse*)\n                $sh_c \"zypper install -y podman crun podman-docker\"\n            ;;\n        esac\n        if ! check_podman_version; then\n            echo \"Error: Podman 4+ is required. Please upgrade Podman.\"\n            exit 1\n        fi\n        do_modify_daemon\n        return\n    fi\n\n    if command_exists docker; then\n        docker_version=$(docker -v 2>/dev/null | sed -n 's/.*version \\([0-9][0-9]*\\.[0-9][0-9]*\\).*/\\1/p' | tr -d '.')\n        if [ -n \"$docker_version\" ] && [ \"$docker_version\" -ge 2500 ] 2>/dev/null; then\n            echo \"# Docker already installed (>= 25)\"\n            start_docker\n            do_modify_daemon\n            return\n        fi\n    fi\n\n    echo \"# Installing Docker...\"\n    case \"$lsb_dist\" in\n        debian|ubuntu|raspbian)\n            case \"$dist_version\" in\n                \"stretch\")\n                    $sh_c \"apt install -y apt-transport-https ca-certificates curl gnupg2 software-properties-common\"\n                    curl -fsSL https://download.docker.com/linux/debian/gpg | $sh_c \"apt-key add -\"\n                    $sh_c \"add-apt-repository \\\"deb [arch=$(dpkg --print-architecture)] https://download.docker.com/linux/debian $(lsb_release -cs) stable\\\"\"\n                    $sh_c \"apt update -y\"\n                    $sh_c \"apt install -y docker-ce\"\n                ;;\n                *)\n                    curl -fsSL https://get.docker.com/ | $sh_c \"sh\"\n                ;;\n            esac\n        ;;\n        *)\n            curl -fsSL https://get.docker.com/ | $sh_c \"sh\"\n        ;;\n    esac\n\n    if ! command_exists docker; then\n        echo \"Failed to install Docker\"\n        exit 1\n    fi\n    if ! check_docker_version; then\n        echo \"Error: Docker 25+ is required. Please upgrade Docker.\"\n        exit 1\n    fi\n    start_docker\n    do_modify_daemon\n}\n\n# Check if we should use Podman based on distribution\ndetermine_container_engine() {\n    USE_PODMAN=\"false\"\n    case \"$lsb_dist\" in\n        fedora|centos|rhel|ol|sles|opensuse*)\n            USE_PODMAN=\"true\"\n            echo \"# Using Podman for $lsb_dist\"\n        ;;\n        *)\n            echo \"# Using Docker for $lsb_dist\"\n        ;;\n    esac\n}\n\n# Source init.sh to get distribution info\n. /etc/iofog/agent/init.sh\ninit\n\n# Configure container engine based on distribution\ndetermine_container_engine\n\n# Install appropriate container engine\ndo_install_container_engine\n\nif [ \"$PACKAGE_TYPE\" = \"deb\" ] || [ \"$PACKAGE_TYPE\" = \"rpm\" ]; then\n    do_set_datasance_repo\n    do_install_wasm_shim\nfi\n\necho \"# Installation completed successfully\""),
	}
	filet := &embedded.EmbeddedFile{
		Filename:    "container-agent/install_deps.sh",
		FileModTime: time.Unix(1761996219, 0),

		Content: string("#!/bin/sh\nset -x\nset -e\n\n\n/etc/iofog/agent/install_container_engine.sh\n"),
	}
	fileu := &embedded.EmbeddedFile{
		Filename:    "container-agent/install_iofog.sh",
		FileModTime: time.Unix(1770220961, 0),

		Content: string("#!/bin/sh\nset -x\nset -e\n\nAGENT_LOG_FOLDER=/var/log/iofog-agent\nAGENT_BACKUP_FOLDER=/var/backups/iofog-agent\nAGENT_MESSAGE_FOLDER=/var/lib/iofog-agent\nAGENT_SHARE_FOLDER=/usr/share/iofog-agent\nSAVED_AGENT_CONFIG_FOLDER=/tmp/agent-config-save\nAGENT_CONTAINER_NAME=\"iofog-agent\"\nETC_DIR=/etc/iofog/agent\n\ndo_check_install() {\n\tif command_exists iofog-agent; then\n\t\tlocal VERSION=$(sudo iofog-agent version | head -n1 | sed \"s/ioFog//g\" | tr -d ' ' | tr -d \"\\n\")\n\t\tif [ \"$VERSION\" = \"$agent_version\" ]; then\n\t\t\techo \"Agent $VERSION already installed.\"\n\t\t\texit 0\n\t\tfi\n\tfi\n}\n\ndo_stop_iofog() {\n\tif ! command_exists iofog-agent; then\n\t\treturn 0\n\tfi\n\tcase \"${INIT_SYSTEM:-systemd}\" in\n\t\tsystemd)\n\t\t\tsudo systemctl stop iofog-agent 2>/dev/null || true\n\t\t\t;;\n\t\tsysvinit|openrc)\n\t\t\tsudo service iofog-agent stop 2>/dev/null || sudo /etc/init.d/iofog-agent stop 2>/dev/null || true\n\t\t\t;;\n\t\ts6)\n\t\t\tsudo s6-svc -d /etc/s6/sv/iofog-agent 2>/dev/null || true\n\t\t\t;;\n\t\trunit)\n\t\t\tsudo sv stop iofog-agent 2>/dev/null || true\n\t\t\t;;\n\t\tupstart)\n\t\t\tsudo initctl stop iofog-agent 2>/dev/null || true\n\t\t\t;;\n\t\t*)\n\t\t\tsudo systemctl stop iofog-agent 2>/dev/null || sudo service iofog-agent stop 2>/dev/null || true\n\t\t\t;;\n\tesac\n\t# Ensure container is stopped by name (in case init did not)\n\t(docker stop ${AGENT_CONTAINER_NAME} 2>/dev/null || podman stop ${AGENT_CONTAINER_NAME} 2>/dev/null) || true\n}\n\n\n\ndo_create_env() {\nENV_FILE_NAME=iofog-agent.env # Used as an env file in systemd\n\nENV_FILE=\"$ETC_DIR/$ENV_FILE_NAME\"\n\n# Env file (for systemd)\nrm -f \"$ENV_FILE\"\ntouch \"$ENV_FILE\"\n\necho \"IOFOG_AGENT_IMAGE=${agent_image}\" >> \"$ENV_FILE\"\necho \"IOFOG_AGENT_TZ=${agent_tz}\" >> \"$ENV_FILE\"\n\n}\n\ndo_install_iofog() {\n\techo \"# Installing ioFog agent...\"\n\t\n    # 1. Ensure folders exist\n    for FOLDER in ${ETC_DIR} ${AGENT_LOG_FOLDER} ${AGENT_BACKUP_FOLDER} ${AGENT_MESSAGE_FOLDER} ${AGENT_SHARE_FOLDER}; do\n        if [ ! -d \"$FOLDER\" ]; then\n            echo \"Creating folder: $FOLDER\"\n            sudo mkdir -p \"$FOLDER\"\n            sudo chmod 775 \"$FOLDER\"\n        fi\n    done\n\tdo_create_env\n\n    # Determine container engine (Podman for rpm-like distros, else Docker)\n    USE_PODMAN=\"false\"\n    case \"$lsb_dist\" in\n        rhel|centos|fedora|ol|sles|opensuse*) USE_PODMAN=\"true\" ;;\n    esac\n    if [ \"$USE_PODMAN\" = \"true\" ]; then\n        CONTAINER_RUNTIME=\"podman\"\n        SOCK_MOUNT=\"-v /run/podman/podman.sock:/run/podman/podman.sock:rw\"\n    else\n        CONTAINER_RUNTIME=\"docker\"\n        SOCK_MOUNT=\"-v /var/run/docker.sock:/var/run/docker.sock:rw\"\n    fi\n\n    # Systemd: use Quadlet for Podman or systemd unit for Docker\n    if [ \"${INIT_SYSTEM:-systemd}\" = \"systemd\" ]; then\n        if [ \"$USE_PODMAN\" = \"true\" ]; then\n            echo \"Using Podman (Quadlet) for container management...\"\n            SYSTEMD_SERVICE_FILE=/etc/containers/systemd/iofog-agent.container\n            cat <<EOF | sudo tee ${SYSTEMD_SERVICE_FILE} > /dev/null\n[Unit]\nDescription=Datasance PoT IoFog Agent Service\nAfter=podman.service\nRequires=podman.service\n\n[Container]\nContainerName=${AGENT_CONTAINER_NAME}\nImage=${agent_image}\nPodmanArgs=--privileged --stop-timeout=60\nEnvironmentFile=${ETC_DIR}/iofog-agent.env\nNetwork=host\nVolume=/run/podman/podman.sock:/run/podman/podman.sock:rw\nVolume=iofog-agent-config:/etc/iofog-agent:rw\nVolume=/var/log/iofog-agent:/var/log/iofog-agent:rw\nVolume=/var/backups/iofog-agent:/var/backups/iofog-agent:rw\nVolume=/usr/share/iofog-agent:/usr/share/iofog-agent:rw\nVolume=/var/lib/iofog-agent:/var/lib/iofog-agent:rw\nLogDriver=journald\n\n[Service]\nRestart=always\n\n[Install]\nWantedBy=default.target\nEOF\n            sudo systemctl daemon-reload\n            sudo systemctl restart podman 2>/dev/null || true\n            sudo systemctl enable iofog-agent.service\n            sudo systemctl start iofog-agent.service\n        else\n            echo \"Using Docker (systemd) for container management...\"\n            SYSTEMD_SERVICE_FILE=/etc/systemd/system/iofog-agent.service\n            cat <<EOF | sudo tee ${SYSTEMD_SERVICE_FILE} > /dev/null\n[Unit]\nDescription=Datasance PoT IoFog Agent Service\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nRestart=always\nExecStartPre=-/usr/bin/docker rm -f ${AGENT_CONTAINER_NAME}\nExecStart=/usr/bin/docker run --rm --name ${AGENT_CONTAINER_NAME} \\\\\n--env-file ${ETC_DIR}/iofog-agent.env \\\\\n-v /var/run/docker.sock:/var/run/docker.sock:rw \\\\\n-v iofog-agent-config:/etc/iofog-agent:rw \\\\\n-v /var/log/iofog-agent:/var/log/iofog-agent:rw \\\\\n-v /var/backups/iofog-agent:/var/backups/iofog-agent:rw \\\\\n-v /usr/share/iofog-agent:/usr/share/iofog-agent:rw \\\\\n-v /var/lib/iofog-agent:/var/lib/iofog-agent:rw \\\\\n--net=host \\\\\n--privileged \\\\\n--stop-timeout 60 \\\\\n--attach stdout \\\\\n--attach stderr \\\\\n${agent_image}\nExecStop=/usr/bin/docker stop ${AGENT_CONTAINER_NAME}\n\n[Install]\nWantedBy=default.target\nEOF\n            sudo systemctl daemon-reload\n            sudo systemctl enable iofog-agent.service\n            sudo systemctl start iofog-agent.service\n        fi\n    else\n        # Non-systemd: create init script that runs the container\n        echo \"Using $CONTAINER_RUNTIME with $INIT_SYSTEM for container management...\"\n        RUN_CMD=\"${CONTAINER_RUNTIME} run --rm -d --name ${AGENT_CONTAINER_NAME} --env-file ${ETC_DIR}/iofog-agent.env ${SOCK_MOUNT} -v iofog-agent-config:/etc/iofog-agent:rw -v /var/log/iofog-agent:/var/log/iofog-agent:rw -v /var/backups/iofog-agent:/var/backups/iofog-agent:rw -v /usr/share/iofog-agent:/usr/share/iofog-agent:rw -v /var/lib/iofog-agent:/var/lib/iofog-agent:rw --net=host --privileged --stop-timeout 60 ${agent_image}\"\n        RUN_CMD_FG=\"${CONTAINER_RUNTIME} run --rm --name ${AGENT_CONTAINER_NAME} --env-file ${ETC_DIR}/iofog-agent.env ${SOCK_MOUNT} -v iofog-agent-config:/etc/iofog-agent:rw -v /var/log/iofog-agent:/var/log/iofog-agent:rw -v /var/backups/iofog-agent:/var/backups/iofog-agent:rw -v /usr/share/iofog-agent:/usr/share/iofog-agent:rw -v /var/lib/iofog-agent:/var/lib/iofog-agent:rw --net=host --privileged --stop-timeout 60 ${agent_image}\"\n        STOP_CMD=\"${CONTAINER_RUNTIME} stop ${AGENT_CONTAINER_NAME}\"\n\n        case \"$INIT_SYSTEM\" in\n            sysvinit|openrc)\n                sudo tee /etc/init.d/iofog-agent > /dev/null <<INITSCRIPT\n#!/bin/sh\n### BEGIN INIT INFO\n# Provides:          iofog-agent\n# Required-Start:    \\$network \\$local_fs\n# Required-Stop:     \\$network \\$local_fs\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n# Short-Description: IoFog Agent container\n### END INIT INFO\ncase \"\\$1\" in\n    start)\n        n=0; while [ \\$n -lt 30 ]; do [ -S /var/run/docker.sock ] || [ -S /run/podman/podman.sock ] && break; n=\\$((n+1)); sleep 1; done\n        [ -S /var/run/docker.sock ] || [ -S /run/podman/podman.sock ] || { echo \"Container engine socket not available\"; exit 1; }\n        if ${CONTAINER_RUNTIME} ps --format '{{.Names}}' 2>/dev/null | grep -q \"^${AGENT_CONTAINER_NAME}\\$\"; then exit 0; fi\n        $RUN_CMD\n        ;;\n    stop)\n        $STOP_CMD 2>/dev/null || true\n        ;;\n    restart)\n        \\$0 stop; \\$0 start\n        ;;\n    status)\n        if ${CONTAINER_RUNTIME} ps --format '{{.Names}}' 2>/dev/null | grep -q \"^${AGENT_CONTAINER_NAME}\\$\"; then echo \"running\"; exit 0; else echo \"stopped\"; exit 1; fi\n        ;;\n    *)\n        echo \"Usage: \\$0 {start|stop|restart|status}\"\n        exit 1\n        ;;\nesac\nexit 0\nINITSCRIPT\n                sudo chmod +x /etc/init.d/iofog-agent\n                if [ \"$INIT_SYSTEM\" = \"openrc\" ]; then\n                    sudo rc-update add iofog-agent default 2>/dev/null || true\n                    sudo rc-service iofog-agent start\n                else\n                    sudo update-rc.d iofog-agent defaults 2>/dev/null || sudo chkconfig iofog-agent on 2>/dev/null || true\n                    sudo service iofog-agent start 2>/dev/null || sudo /etc/init.d/iofog-agent start\n                fi\n                ;;\n            s6)\n                sudo mkdir -p /etc/s6/sv/iofog-agent\n                sudo tee /etc/s6/sv/iofog-agent/run > /dev/null <<RUNSCRIPT\n#!/bin/sh\nexec $RUN_CMD_FG\nRUNSCRIPT\n                sudo chmod +x /etc/s6/sv/iofog-agent/run\n                [ -d /etc/s6/adminsv/default ] && sudo ln -sf /etc/s6/sv/iofog-agent /etc/s6/adminsv/default/iofog-agent 2>/dev/null || true\n                sudo s6-svc -u /etc/s6/sv/iofog-agent 2>/dev/null || true\n                ;;\n            runit)\n                sudo mkdir -p /etc/runit/sv/iofog-agent\n                sudo tee /etc/runit/sv/iofog-agent/run > /dev/null <<RUNSCRIPT\n#!/bin/sh\nexec $RUN_CMD_FG\nRUNSCRIPT\n                sudo chmod +x /etc/runit/sv/iofog-agent/run\n                if [ -d /var/service ]; then\n                    sudo ln -sf /etc/runit/sv/iofog-agent /var/service/iofog-agent 2>/dev/null || true\n                elif [ -d /etc/runit/runsvdir/default ]; then\n                    sudo ln -sf /etc/runit/sv/iofog-agent /etc/runit/runsvdir/default/iofog-agent 2>/dev/null || true\n                fi\n                sudo sv start iofog-agent 2>/dev/null || true\n                ;;\n            upstart)\n                sudo tee /etc/init/iofog-agent.conf > /dev/null <<UPSTART\ndescription \"IoFog Agent container\"\nstart on runlevel [2345]\nstop on runlevel [!2345]\nrespawn\nrespawn limit 10 5\nexec $RUN_CMD_FG\nUPSTART\n                sudo initctl reload-configuration 2>/dev/null || true\n                sudo initctl start iofog-agent 2>/dev/null || true\n                ;;\n            *)\n                echo \"Warning: Unknown init system $INIT_SYSTEM. Creating /etc/init.d/iofog-agent fallback.\"\n                sudo tee /etc/init.d/iofog-agent > /dev/null <<INITSCRIPT\n#!/bin/sh\ncase \"\\$1\" in start) n=0; while [ \\$n -lt 30 ]; do [ -S /var/run/docker.sock ] || [ -S /run/podman/podman.sock ] && break; n=\\$((n+1)); sleep 1; done; [ -S /var/run/docker.sock ] || [ -S /run/podman/podman.sock ] || { echo \"Container engine socket not available\"; exit 1; }; $RUN_CMD ;; stop) $STOP_CMD ;; restart) $STOP_CMD; $RUN_CMD ;; *) echo \"Usage: \\$0 {start|stop|restart}\"; exit 1 ;; esac\nINITSCRIPT\n                sudo chmod +x /etc/init.d/iofog-agent\n                sudo /etc/init.d/iofog-agent start\n                ;;\n        esac\n    fi\n\n    # Create the iofog-agent executable wrapper (same for all inits)\n    EXECUTABLE_FILE=/usr/local/bin/iofog-agent\n    if [ \"$USE_PODMAN\" = \"true\" ]; then\n        cat <<'EOF' | sudo tee ${EXECUTABLE_FILE} > /dev/null\n#!/bin/sh\nCONTAINER_NAME=\"iofog-agent\"\nif ! podman ps --format '{{.Names}}' | grep -q \"^${CONTAINER_NAME}$\"; then\n    echo \"Error: The iofog-agent container is not running.\"\n    exit 1\nfi\nexec podman exec ${CONTAINER_NAME} iofog-agent \"$@\"\nEOF\n    else\n        cat <<'EOF' | sudo tee ${EXECUTABLE_FILE} > /dev/null\n#!/bin/sh\nCONTAINER_NAME=\"iofog-agent\"\nif ! docker ps --format '{{.Names}}' | grep -q \"^${CONTAINER_NAME}$\"; then\n    echo \"Error: The iofog-agent container is not running.\"\n    exit 1\nfi\nexec docker exec ${CONTAINER_NAME} iofog-agent \"$@\"\nEOF\n    fi\n    sudo chmod +x ${EXECUTABLE_FILE}\n\n    echo \"ioFog agent installation completed!\"\n}\n\ndo_start_iofog(){\n\tcase \"${INIT_SYSTEM:-systemd}\" in\n\t\tsystemd)\n\t\t\tsudo systemctl start iofog-agent >/dev/null 2>&1 &\n\t\t\t;;\n\t\tsysvinit|openrc)\n\t\t\tsudo service iofog-agent start 2>/dev/null || sudo /etc/init.d/iofog-agent start 2>/dev/null &\n\t\t\t;;\n\t\ts6)\n\t\t\tsudo s6-svc -u /etc/s6/sv/iofog-agent 2>/dev/null &\n\t\t\t;;\n\t\trunit)\n\t\t\tsudo sv start iofog-agent 2>/dev/null &\n\t\t\t;;\n\t\tupstart)\n\t\t\tsudo initctl start iofog-agent 2>/dev/null &\n\t\t\t;;\n\t\t*)\n\t\t\tsudo systemctl start iofog-agent 2>/dev/null || sudo /etc/init.d/iofog-agent start 2>/dev/null &\n\t\t\t;;\n\tesac\n\tlocal STATUS=\"\"\n\tlocal ITER=0\n\twhile [ \"$STATUS\" != \"RUNNING\" ]; do\n\t\tITER=$((ITER+1))\n\t\tif [ \"$ITER\" -gt 600 ]; then\n\t\t\techo \"Timed out waiting for Agent to be RUNNING\"\n\t\t\texit 1\n\t\tfi\n\t\tsleep 1\n\t\tSTATUS=$(sudo iofog-agent status 2>/dev/null | cut -f2 -d: | head -n 1 | tr -d '[:space:]')\n\t\techo \"${STATUS}\"\n\tdone\n\tsudo iofog-agent \"config -cf 10 -sf 10\"\n\tif [ \"$lsb_dist\" = \"rhel\" ] || [ \"$lsb_dist\" = \"centos\" ] || [ \"$lsb_dist\" = \"fedora\" ] || [ \"$lsb_dist\" = \"ol\" ] || [ \"$lsb_dist\" = \"sles\" ] || [ \"$lsb_dist\" = \"opensuse\" ]; then\n\t\tsudo iofog-agent \"config -c unix:///var/run/podman/podman.sock\"\n\tfi\n}\n\nagent_image=\"$1\"\nagent_tz=\"$2\"\necho \"Using variables\"\necho \"version: $agent_image\"\necho \"timezone: $agent_tz\"\n. /etc/iofog/agent/init.sh\ninit\ndo_check_install\ndo_stop_iofog\ndo_install_iofog\ndo_start_iofog"),
	}
	filev := &embedded.EmbeddedFile{
		Filename:    "container-agent/uninstall_iofog.sh",
		FileModTime: time.Unix(1770219248, 0),

		Content: string("#!/bin/sh\nset -x\nset -e\n\nAGENT_CONFIG_FOLDER=iofog-agent-config\nAGENT_LOG_FOLDER=/var/log/iofog-agent\nAGENT_BACKUP_FOLDER=/var/backups/iofog-agent\nAGENT_MESSAGE_FOLDER=/var/lib/iofog-agent\nEXECUTABLE_FILE=/usr/local/bin/iofog-agent\nCONTAINER_NAME=\"iofog-agent\"\n\ndo_uninstall_iofog() {\n    echo \"# Removing ioFog agent...\"\n\n    case \"$lsb_dist\" in\n        rhel|fedora|centos|ol|sles|opensuse*) CONTAINER_RUNTIME=\"podman\" ;;\n        *) CONTAINER_RUNTIME=\"docker\" ;;\n    esac\n\n    # Stop and remove service based on init system\n    case \"${INIT_SYSTEM:-systemd}\" in\n        systemd)\n            for f in /etc/systemd/system/iofog-agent.service /etc/containers/systemd/iofog-agent.container; do\n                if [ -f \"$f\" ]; then\n                    echo \"Disabling and stopping systemd service...\"\n                    sudo systemctl stop iofog-agent.service 2>/dev/null || true\n                    sudo systemctl disable iofog-agent.service 2>/dev/null || true\n                    sudo rm -f \"$f\"\n                    sudo systemctl daemon-reload\n                    break\n                fi\n            done\n            ;;\n        sysvinit|openrc)\n            if [ -f /etc/init.d/iofog-agent ]; then\n                sudo service iofog-agent stop 2>/dev/null || sudo /etc/init.d/iofog-agent stop 2>/dev/null || true\n                [ \"$INIT_SYSTEM\" = \"openrc\" ] && sudo rc-update del iofog-agent default 2>/dev/null || true\n                sudo update-rc.d -f iofog-agent remove 2>/dev/null || sudo chkconfig --del iofog-agent 2>/dev/null || true\n                sudo rm -f /etc/init.d/iofog-agent\n            fi\n            ;;\n        s6)\n            sudo s6-svc -d /etc/s6/sv/iofog-agent 2>/dev/null || true\n            sudo rm -rf /etc/s6/sv/iofog-agent\n            [ -L /etc/s6/adminsv/default/iofog-agent ] && sudo rm -f /etc/s6/adminsv/default/iofog-agent\n            ;;\n        runit)\n            sudo sv stop iofog-agent 2>/dev/null || true\n            [ -L /var/service/iofog-agent ] && sudo rm -f /var/service/iofog-agent\n            [ -L /etc/runit/runsvdir/default/iofog-agent ] && sudo rm -f /etc/runit/runsvdir/default/iofog-agent\n            sudo rm -rf /etc/runit/sv/iofog-agent\n            ;;\n        upstart)\n            sudo initctl stop iofog-agent 2>/dev/null || true\n            sudo rm -f /etc/init/iofog-agent.conf\n            ;;\n        *)\n            sudo systemctl stop iofog-agent 2>/dev/null || true\n            sudo systemctl disable iofog-agent 2>/dev/null || true\n            sudo rm -f /etc/systemd/system/iofog-agent.service /etc/containers/systemd/iofog-agent.container\n            sudo systemctl daemon-reload 2>/dev/null || true\n            [ -f /etc/init.d/iofog-agent ] && sudo /etc/init.d/iofog-agent stop 2>/dev/null || true\n            sudo rm -f /etc/init.d/iofog-agent\n            ;;\n    esac\n\n    # Remove the container\n    if sudo ${CONTAINER_RUNTIME} ps -a --format '{{.Names}}' 2>/dev/null | grep -q \"^${CONTAINER_NAME}$\"; then\n        echo \"Stopping and removing the ioFog agent container...\"\n        sudo ${CONTAINER_RUNTIME} stop ${CONTAINER_NAME} 2>/dev/null || true\n        sudo ${CONTAINER_RUNTIME} rm ${CONTAINER_NAME} 2>/dev/null || true\n    fi\n\n    # Remove config files\n    echo \"Checking if the ${CONTAINER_RUNTIME} volume exists...\"\n\n    if sudo ${CONTAINER_RUNTIME} volume inspect \"${AGENT_CONFIG_FOLDER}\" >/dev/null 2>&1; then\n        echo \"${CONTAINER_RUNTIME} volume '${AGENT_CONFIG_FOLDER}' found. Removing...\"\n        sudo ${CONTAINER_RUNTIME} volume rm \"${AGENT_CONFIG_FOLDER}\"\n        echo \"${CONTAINER_RUNTIME} volume '${AGENT_CONFIG_FOLDER}' has been removed.\"\n    else\n        echo \"${CONTAINER_RUNTIME} volume '${AGENT_CONFIG_FOLDER}' does not exist. Skipping removal.\"\n    fi\n\n    # Remove log files\n    echo \"Removing log files...\"\n    sudo rm -rf ${AGENT_LOG_FOLDER}\n\n    # Remove backup files\n    echo \"Removing backup files...\"\n    sudo rm -rf ${AGENT_BACKUP_FOLDER}\n\n    # Remove message files\n    echo \"Removing message files...\"\n    sudo rm -rf ${AGENT_MESSAGE_FOLDER}\n\n    # Remove the executable script\n    if [ -f ${EXECUTABLE_FILE} ]; then\n        echo \"Removing the iofog-agent executable script...\"\n        sudo rm -f ${EXECUTABLE_FILE}\n    fi\n\n    echo \"ioFog agent uninstalled successfully!\"\n}\n\n. /etc/iofog/agent/init.sh\ninit\n\ndo_uninstall_iofog\n"),
	}
	filex := &embedded.EmbeddedFile{
		Filename:    "container-controller/check_prereqs.sh",
		FileModTime: time.Unix(1770218653, 0),

		Content: string("#!/bin/sh\nset -x\n\n# Check if running as root or via sudo \nif [ \"$(id -u)\" -ne 0 ]; then\n\techo \"Error: This script must be run as root or via sudo\"\n\techo \"   Please run: sudo \\$0 \\$*\"\n\texit 1\nfi\n\n# Check can sudo without password (when re-executed or for subcommands)\nif ! $(sudo ls /tmp/ > /dev/null); then\n\tMSG=\"Unable to successfully use sudo with user $USER on this host.\\nUser $USER must be in sudoers group and using sudo without password must be enabled.\\nPlease see docs.datasance.com documentation for more details.\"\n\techo $MSG\n\texit 1\nfi\n"),
	}
	filey := &embedded.EmbeddedFile{
		Filename:    "container-controller/init.sh",
		FileModTime: time.Unix(1770218728, 0),

		Content: string("#!/bin/sh\n# Script to detect Linux distribution and version\n# Used as a precursor for system-specific installations\n\n# Exit on error and print commands for debugging\nset -e\nset -x\n\n# Define user variable\nuser=\"$(id -un 2>/dev/null || true)\"\n\n# Check if a command exists\ncommand_exists() {\n    command -v \"$@\" > /dev/null 2>&1\n}\n\n# Detect the Linux distribution\nget_distribution() {\n    lsb_dist=\"\"\n    dist_version=\"\"\n    \n    # Every system that we officially support has /etc/os-release\n    if [ -r /etc/os-release ]; then\n        \n        lsb_dist=\"$(. /etc/os-release && echo \"$ID\")\"\n        \n        dist_version=\"$(. /etc/os-release && echo \"$VERSION_ID\")\"\n        lsb_dist=\"$(echo \"$lsb_dist\" | tr '[:upper:]' '[:lower:]')\"\n    else\n        echo \"Error: Unsupported Linux distribution! /etc/os-release not found.\"\n        exit 1\n    fi\n    \n    echo \"# Detected distribution: $lsb_dist (version: $dist_version)\"\n}\n\n# Check if this is a forked Linux distro\ncheck_forked() {\n    # Skip if lsb_release doesn't exist\n    if ! command_exists lsb_release; then\n        return\n    fi\n    \n    # Check if the `-u` option is supported\n    set +e\n    lsb_release -a > /dev/null 2>&1\n    lsb_release_exit_code=$?\n    set -e\n\n    # Check if the command has exited successfully, it means we're in a forked distro\n    if [ \"$lsb_release_exit_code\" = \"0\" ]; then\n        # Get the upstream release info\n        current_lsb_dist=$(lsb_release -a 2>&1 | tr '[:upper:]' '[:lower:]' | grep -E 'id' | cut -d ':' -f 2 | tr -d '[:space:]')\n        current_dist_version=$(lsb_release -a 2>&1 | tr '[:upper:]' '[:lower:]' | grep -E 'codename' | cut -d ':' -f 2 | tr -d '[:space:]')\n\n        # Print info about current distro\n        echo \"You're using '$current_lsb_dist' version '$current_dist_version'.\"\n        \n        # Check if current is different from detected (indicating a fork)\n        if [ \"$current_lsb_dist\" != \"$lsb_dist\" ] || [ \"$current_dist_version\" != \"$dist_version\" ]; then\n            echo \"Upstream release is '$lsb_dist' version '$dist_version'.\"\n        fi\n    else\n        # Additional checks for specific distros that might not be properly detected\n        if [ -r /etc/debian_version ] && [ \"$lsb_dist\" != \"ubuntu\" ] && [ \"$lsb_dist\" != \"raspbian\" ]; then\n            if [ \"$lsb_dist\" = \"osmc\" ]; then\n                # OSMC runs Raspbian\n                lsb_dist=raspbian\n            else\n                # We're Debian and don't even know it!\n                lsb_dist=debian\n            fi\n            # Get Debian version and map it to codename\n            dist_version=\"$(sed 's/\\/.*//' /etc/debian_version | sed 's/\\..*//')\"\n            case \"$dist_version\" in\n                14)\n                    dist_version=\"forky\"\n                ;;\n                13)\n                    dist_version=\"trixie\"\n                ;;\n                12)\n                    dist_version=\"bookworm\"\n                ;;\n                11)\n                    dist_version=\"bullseye\"\n                ;;\n                10)\n                    dist_version=\"buster\"\n                ;;\n                9)\n                    dist_version=\"stretch\"\n                ;;\n                8|'Kali Linux 2')\n                    dist_version=\"jessie\"\n                ;;\n                7)\n                    dist_version=\"wheezy\"\n                ;;\n            esac\n        elif [ -r /etc/redhat-release ] && [ -z \"$lsb_dist\" ]; then\n            lsb_dist=redhat\n            # Extract version from redhat-release file\n            dist_version=\"$(sed 's/.*release \\([0-9.]*\\).*/\\1/' /etc/redhat-release)\"\n        fi\n    fi\n}\n\n# Set up sudo command if necessary\nsetup_sudo() {\n    sh_c='sh -c'\n    if [ \"$user\" != 'root' ]; then\n        if command_exists sudo; then\n            sh_c='sudo -E sh -c'\n        elif command_exists su; then\n            sh_c='su -c'\n        else\n            echo \"Error: this installer needs the ability to run commands as root.\"\n            echo \"We are unable to find either 'sudo' or 'su' available to make this happen.\"\n            exit 1\n        fi\n    fi\n    echo \"# Using command executor: $sh_c\"\n}\n\n# Refine distribution version detection based on the distro\nrefine_distribution_version() {\n    case \"$lsb_dist\" in\n        ubuntu)\n            if command_exists lsb_release; then\n                dist_version=\"$(lsb_release --codename | cut -f2)\"\n            fi\n            if [ -z \"$dist_version\" ] && [ -r /etc/lsb-release ]; then\n                \n                dist_version=\"$(. /etc/lsb-release && echo \"$DISTRIB_CODENAME\")\"\n            fi\n        ;;\n\n        debian|raspbian)\n            # If we only have a number, map it to a codename for better recognition\n            if echo \"$dist_version\" | grep -qE '^[0-9]+$'; then\n                case \"$dist_version\" in\n                    14)\n                        dist_version=\"forky\"\n                    ;;\n                    13)\n                        dist_version=\"trixie\"\n                    ;;\n                    12)\n                        dist_version=\"bookworm\"\n                    ;;\n                    11)\n                        dist_version=\"bullseye\"\n                    ;;\n                    10)\n                        # Handle special case for Buster\n                        dist_version=\"buster\"\n                        if [ \"$user\" = 'root' ]; then\n                            apt-get update --allow-releaseinfo-change || true\n                        elif command_exists sudo; then\n                            sudo apt-get update --allow-releaseinfo-change || true\n                        fi\n                    ;;\n                    9)\n                        dist_version=\"stretch\"\n                    ;;\n                    8)\n                        dist_version=\"jessie\"\n                    ;;\n                    7)\n                        dist_version=\"wheezy\"\n                    ;;\n                esac\n            fi\n        ;;\n\n        centos|rhel|fedora|ol)\n            # Make sure we have a version number\n            if [ -z \"$dist_version\" ] && [ -r /etc/os-release ]; then\n                \n                dist_version=\"$(. /etc/os-release && echo \"$VERSION_ID\")\"\n            fi\n            if [ -z \"$dist_version\" ] && [ -r /etc/redhat-release ]; then\n                dist_version=\"$(sed 's/.*release \\([0-9.]*\\).*/\\1/' /etc/redhat-release)\"\n            fi\n        ;;\n\n        sles|opensuse)\n            if [ -z \"$dist_version\" ] && [ -r /etc/os-release ]; then\n                dist_version=\"$(. /etc/os-release && echo \"$VERSION_ID\")\"\n            fi\n            # Fallback for older versions\n            if [ -z \"$dist_version\" ] && [ -r /etc/SuSE-release ]; then\n                dist_version=\"$(grep VERSION /etc/SuSE-release | sed 's/^VERSION = //')\"\n            fi\n            # Ensure version is in the correct format (e.g., 15.4 for SLES 15 SP4)\n            if [ -n \"$dist_version\" ]; then\n                # Remove any non-numeric characters except dots\n                dist_version=\"$(echo \"$dist_version\" | sed 's/[^0-9.]//g')\"\n            fi\n            # Normalize distribution name\n            if [ \"$lsb_dist\" = \"sles\" ]; then\n                lsb_dist=\"sles\"\n            elif [ \"$lsb_dist\" = \"opensuse\" ]; then\n                lsb_dist=\"opensuse\"\n            fi\n        ;;\n\n        *)\n            if command_exists lsb_release; then\n                dist_version=\"$(lsb_release --release | cut -f2)\"\n            fi\n            if [ -z \"$dist_version\" ] && [ -r /etc/os-release ]; then\n                \n                dist_version=\"$(. /etc/os-release && echo \"$VERSION_ID\")\"\n            fi\n        ;;\n    esac\n}\n\n# Detect init system \ndetect_init_system() {\n    if command -v systemctl >/dev/null 2>&1 && [ -d /etc/systemd/system ]; then\n        INIT_SYSTEM=\"systemd\"\n    elif [ -f /sbin/init ] && /sbin/init --version 2>/dev/null | grep -q upstart; then\n        INIT_SYSTEM=\"upstart\"\n    elif command -v openrc >/dev/null 2>&1 || [ -f /sbin/openrc ]; then\n        INIT_SYSTEM=\"openrc\"\n    elif [ -d /etc/s6 ] || command -v s6-svc >/dev/null 2>&1; then\n        INIT_SYSTEM=\"s6\"\n    elif command -v runit >/dev/null 2>&1 || [ -d /etc/runit ]; then\n        INIT_SYSTEM=\"runit\"\n    elif [ -d /etc/init.d ]; then\n        INIT_SYSTEM=\"sysvinit\"\n    else\n        INIT_SYSTEM=\"unknown\"\n    fi\n    export INIT_SYSTEM\n    echo \"# Detected init system: $INIT_SYSTEM\"\n}\n\n# Detect package type (deb, rpm, or other)\ndetect_package_type() {\n    case \"$lsb_dist\" in\n        debian|ubuntu|raspbian|mendel)\n            PACKAGE_TYPE=\"deb\"\n            ;;\n        fedora|centos|rhel|ol|sles|opensuse*)\n            PACKAGE_TYPE=\"rpm\"\n            ;;\n        *)\n            if command_exists apt-get || command_exists dpkg; then\n                PACKAGE_TYPE=\"deb\"\n            elif command_exists yum || command_exists dnf || command_exists zypper; then\n                PACKAGE_TYPE=\"rpm\"\n            else\n                PACKAGE_TYPE=\"other\"\n            fi\n            ;;\n    esac\n    export PACKAGE_TYPE\n    echo \"# Detected package type: $PACKAGE_TYPE\"\n}\n\n# Init function\ninit() {\n    # Detect basic distribution info\n    get_distribution\n    \n    # Set up sudo for privileged commands\n    setup_sudo\n    \n    # Refine version information\n    refine_distribution_version\n    \n    # Check if this is a forked distro\n    check_forked\n    \n    # Detect init system and package type (for universal OS/init support)\n    detect_init_system\n    detect_package_type\n    \n    # Print final distribution information\n    echo \"----------------------------------------\"\n    echo \"Linux Distribution: $lsb_dist\"\n    echo \"Version: $dist_version\"\n    echo \"Init system: $INIT_SYSTEM\"\n    echo \"Package type: $PACKAGE_TYPE\"\n    echo \"----------------------------------------\"\n    \n}\n"),
	}
	filez := &embedded.EmbeddedFile{
		Filename:    "container-controller/install_container_engine.sh",
		FileModTime: time.Unix(1770218845, 0),

		Content: string("#!/bin/sh\n# Script to install Docker/Podman based on Linux distribution\n# Sources init.sh for distribution detection\n\nset -x\nset -e\n\nCONTAINER_ENGINE_MSG=\"This operating system does not support automatic container engine installation. Please install Docker 25+ or Podman 4+ on the target host and re-run, or use an airgap deployment with a pre-installed engine.\"\n\ncheck_docker_version() {\n    docker_version_num=0\n    if command -v docker >/dev/null 2>&1; then\n        raw=$(docker -v 2>/dev/null | sed -n 's/.*version \\([0-9][0-9]*\\.[0-9][0-9]*\\).*/\\1/p' | tr -d '.')\n        [ -n \"$raw\" ] && docker_version_num=\"$raw\"\n    fi\n    [ \"$docker_version_num\" -ge 2500 ] 2>/dev/null || return 1\n}\n\ncheck_podman_version() {\n    podman_version_num=0\n    if command -v podman >/dev/null 2>&1; then\n        raw=$(podman --version 2>/dev/null | sed -n 's/.*version \\([0-9][0-9]*\\).*/\\1/p')\n        [ -n \"$raw\" ] && podman_version_num=\"$raw\"\n    fi\n    [ \"$podman_version_num\" -ge 4 ] 2>/dev/null || return 1\n}\n\nstart_docker() {\n    set +e\n    if $sh_c \"docker ps\" >/dev/null 2>&1; then\n        set -e\n        return 0\n    fi\n    err_code=1\n    case \"${INIT_SYSTEM:-unknown}\" in\n        systemd)\n            $sh_c \"systemctl start docker\" >/dev/null 2>&1\n            err_code=$?\n            ;;\n        sysvinit)\n            $sh_c \"service docker start\" >/dev/null 2>&1 || $sh_c \"/etc/init.d/docker start\" >/dev/null 2>&1\n            err_code=$?\n            ;;\n        openrc)\n            $sh_c \"rc-service docker start\" >/dev/null 2>&1\n            err_code=$?\n            ;;\n        *)\n            $sh_c \"/etc/init.d/docker start\" >/dev/null 2>&1\n            err_code=$?\n            [ $err_code -ne 0 ] && $sh_c \"systemctl start docker\" >/dev/null 2>&1 && err_code=0\n            [ $err_code -ne 0 ] && $sh_c \"service docker start\" >/dev/null 2>&1 && err_code=0\n            [ $err_code -ne 0 ] && $sh_c \"snap start docker\" >/dev/null 2>&1 && err_code=0\n            ;;\n    esac\n    set -e\n    if [ $err_code -ne 0 ]; then\n        echo \"Could not start Docker daemon\"\n        exit 1\n    fi\n}\n\nstart_podman() {\n    set +e\n    case \"${INIT_SYSTEM:-unknown}\" in\n        systemd)\n            $sh_c \"systemctl start podman\" >/dev/null 2>&1\n            $sh_c \"systemctl start podman.socket\" >/dev/null 2>&1\n            ;;\n        sysvinit)\n            $sh_c \"service podman start\" >/dev/null 2>&1 || $sh_c \"/etc/init.d/podman start\" >/dev/null 2>&1\n            ;;\n        openrc)\n            $sh_c \"rc-service podman start\" >/dev/null 2>&1\n            ;;\n        *)\n            $sh_c \"systemctl start podman\" >/dev/null 2>&1 || true\n            $sh_c \"systemctl start podman.socket\" >/dev/null 2>&1 || true\n            $sh_c \"service podman start\" >/dev/null 2>&1 || true\n            ;;\n    esac\n    set -e\n}\n\n\ndo_modify_daemon() {\n    # Skip for Podman installations\n    if [ \"$USE_PODMAN\" = \"true\" ]; then\n        echo \"# Configuring Podman for CDI directory support...\"\n\n        # Create CDI directories\n        $sh_c \"mkdir -p /etc/cdi /var/run/cdi\"\n\n        # Ensure /etc/containers exists\n        $sh_c \"mkdir -p /etc/containers\"\n\n        # Create containers.conf if it doesn't exist\n        if [ ! -f \"/etc/containers/containers.conf\" ]; then\n            $sh_c 'cat > /etc/containers/containers.conf <<EOF\n[engine]\nruntime = \"crun\"\ncdi_spec_dirs = [\"/etc/cdi\", \"/var/run/cdi\"]\nEOF'\n        else\n            # Check if [engine] block exists\n            if grep -q \"^\\[engine\\]\" /etc/containers/containers.conf; then\n                # Ensure runtime is set under [engine]\n                if grep -q \"^runtime\" /etc/containers/containers.conf; then\n                    $sh_c \"sed -i 's|^runtime *=.*|runtime = \\\"crun\\\"|' /etc/containers/containers.conf\"\n                else\n                    $sh_c \"sed -i '/^\\[engine\\]/a runtime = \\\"crun\\\"' /etc/containers/containers.conf\"\n                fi\n\n                # Ensure cdi_spec_dirs is set under [engine]\n                if grep -q \"^cdi_spec_dirs\" /etc/containers/containers.conf; then\n                    $sh_c \"sed -i 's|^cdi_spec_dirs *=.*|cdi_spec_dirs = [\\\"/etc/cdi\\\", \\\"/var/run/cdi\\\"]|' /etc/containers/containers.conf\"\n                else\n                    $sh_c \"sed -i '/^\\[engine\\]/a cdi_spec_dirs = [\\\"/etc/cdi\\\", \\\"/var/run/cdi\\\"]' /etc/containers/containers.conf\"\n                fi\n            else\n                # Append full engine block if missing\n                $sh_c 'echo -e \"\\n[engine]\\nruntime = \\\"crun\\\"\\ncdi_spec_dirs = [\\\"/etc/cdi\\\", \\\"/var/run/cdi\\\"]\" >> /etc/containers/containers.conf'\n            fi\n        fi\n\n        case \"${INIT_SYSTEM:-unknown}\" in\n            systemd)\n                $sh_c \"systemctl enable podman\" 2>/dev/null || true\n                $sh_c \"systemctl enable podman.socket\" 2>/dev/null || true\n                ;;\n            openrc)\n                $sh_c \"rc-update add podman default\" 2>/dev/null || true\n                ;;\n            sysvinit)\n                $sh_c \"update-rc.d podman defaults\" 2>/dev/null || $sh_c \"chkconfig podman on\" 2>/dev/null || true\n                ;;\n            *) ;;\n        esac\n        start_podman\n        return\n    fi\n\n    # Original Docker daemon configuration\n    if [ ! -f /etc/docker/daemon.json ]; then\n        echo \"Creating /etc/docker/daemon.json...\"\n        $sh_c \"mkdir -p /etc/docker\"\n        $sh_c 'cat > /etc/docker/daemon.json << EOF\n{\n\t\"storage-driver\": \"overlayfs\",\n    \"features\": {\n        \"containerd-snapshotter\": true,\n        \"cdi\": true\n    },\n    \"cdi-spec-dirs\": [\"/etc/cdi/\", \"/var/run/cdi\"]\n}\nEOF'\n    else\n        echo \"/etc/docker/daemon.json already exists\"\n    fi\n    echo \"Restarting Docker daemon...\"\n    case \"${INIT_SYSTEM:-unknown}\" in\n        systemd)\n            $sh_c \"systemctl daemon-reload\"\n            $sh_c \"systemctl restart docker\"\n            ;;\n        *)\n            $sh_c \"systemctl daemon-reload\" 2>/dev/null || true\n            $sh_c \"systemctl restart docker\" 2>/dev/null || start_docker\n            ;;\n    esac\n}\n\ndo_set_datasance_repo() {\n    echo \"# Setting up Datasance repository for $lsb_dist...\"\n    \n    case \"$lsb_dist\" in\n        fedora|centos|rhel|ol|sles|opensuse*)\n            # RPM-based distros\n            $sh_c \"cd /etc/yum.repos.d && curl -s https://downloads.datasance.com/datasance.repo -LO\"\n            if [ \"$lsb_dist\" = \"fedora\" ] || [ \"$lsb_dist\" = \"centos\" ] || [ \"$lsb_dist\" = \"rhel\" ] || [ \"$lsb_dist\" = \"ol\" ]; then\n                $sh_c \"yum update -y\"\n            else\n                $sh_c \"zypper refresh\"\n            fi\n        ;;\n        debian|ubuntu|raspbian|*)\n            # DEB-based distros\n            $sh_c \"apt update -qy\"\n            $sh_c \"apt install -qy debian-archive-keyring apt-transport-https\"\n            $sh_c \"wget -qO- https://downloads.datasance.com/datasance.gpg | tee /etc/apt/trusted.gpg.d/datasance.gpg >/dev/null\"\n            $sh_c \"echo 'deb [arch=all signed-by=/etc/apt/trusted.gpg.d/datasance.gpg] https://downloads.datasance.com/deb stable main' | tee /etc/apt/sources.list.d/datasance.list >/dev/null\"\n            $sh_c \"apt update -qy\"\n        ;;\n    esac\n}\n\ndo_install_wasm_shim() {\n    echo \"# Installing WebAssembly runtime support for $lsb_dist...\"\n    arch=$(uname -m)\n\n    # Normalize architecture for consistency\n    case \"$arch\" in\n        arm64|aarch64|armv7l|armv8) arch=\"aarch64\" ;;\n        amd64|x86_64) arch=\"x86_64\" ;;\n    esac\n\n    if [ \"$USE_PODMAN\" = \"true\" ]; then\n        case \"$lsb_dist\" in\n            fedora|centos|rhel|ol)\n                $sh_c \"yum install -y crun crun-wasm\"\n            ;;\n            sles|opensuse*)\n                $sh_c \"zypper install -y crun\"\n                # Note: crun-wasm might not be available in SUSE repos\n                # In that case, we'll need to use the standard crun\n            ;;\n        esac\n        \n    else\n        # Original containerd WASM shim installation for Docker\n        case \"$lsb_dist\" in\n            debian|raspbian|ubuntu)\n                $sh_c \"apt update -qy\" || { echo \"Failed to update apt packages\"; exit 1; }\n\n                if [ \"$arch\" = \"aarch64\" ]; then\n                    $sh_c \"apt install -qy containerd-shim-wasmedge-v1-aarch64-linux-gnu\"\n                    $sh_c \"apt install -qy containerd-shim-wasmer-v1-aarch64-linux-gnu\"\n                    $sh_c \"apt install -qy containerd-shim-wasmtime-v1-aarch64-linux-gnu\"\n                elif [ \"$arch\" = \"x86_64\" ]; then\n                    $sh_c \"apt install -qy containerd-shim-wasmedge-v1-x86-64-linux-gnu\"\n                    $sh_c \"apt install -qy containerd-shim-wasmer-v1-x86-64-linux-gnu\"\n                    $sh_c \"apt install -qy containerd-shim-wasmtime-v1-x86-64-linux-gnu\"\n                else\n                    echo \"Unsupported architecture: $arch for $lsb_dist\"\n                    exit 1\n                fi\n            ;;\n            *)\n                echo \"Unsupported OS: $lsb_dist\"\n                exit 1\n            ;;\n        esac\n    fi\n}\n\ndo_install_container_engine() {\n    if [ \"$PACKAGE_TYPE\" = \"other\" ]; then\n        if check_docker_version; then\n            USE_PODMAN=\"false\"\n            echo \"# Docker (>= 25) found; using Docker.\"\n            start_docker\n            do_modify_daemon\n            return 0\n        fi\n        if check_podman_version; then\n            USE_PODMAN=\"true\"\n            echo \"# Podman (>= 4) found; using Podman.\"\n            do_modify_daemon\n            return 0\n        fi\n        echo \"Error: $CONTAINER_ENGINE_MSG\"\n        exit 1\n    fi\n\n    if [ \"$USE_PODMAN\" = \"true\" ]; then\n        echo \"# Installing Podman and related packages...\"\n        case \"$lsb_dist\" in\n            fedora|centos|rhel|ol)\n                $sh_c \"yum install -y podman crun podman-docker\"\n            ;;\n            sles|opensuse*)\n                $sh_c \"zypper install -y podman crun podman-docker\"\n            ;;\n        esac\n        if ! check_podman_version; then\n            echo \"Error: Podman 4+ is required. Please upgrade Podman.\"\n            exit 1\n        fi\n        do_modify_daemon\n        return\n    fi\n\n    if command_exists docker; then\n        docker_version=$(docker -v 2>/dev/null | sed -n 's/.*version \\([0-9][0-9]*\\.[0-9][0-9]*\\).*/\\1/p' | tr -d '.')\n        if [ -n \"$docker_version\" ] && [ \"$docker_version\" -ge 2500 ] 2>/dev/null; then\n            echo \"# Docker already installed (>= 25)\"\n            start_docker\n            do_modify_daemon\n            return\n        fi\n    fi\n\n    echo \"# Installing Docker...\"\n    case \"$lsb_dist\" in\n        debian|ubuntu|raspbian)\n            case \"$dist_version\" in\n                \"stretch\")\n                    $sh_c \"apt install -y apt-transport-https ca-certificates curl gnupg2 software-properties-common\"\n                    curl -fsSL https://download.docker.com/linux/debian/gpg | $sh_c \"apt-key add -\"\n                    $sh_c \"add-apt-repository \\\"deb [arch=$(dpkg --print-architecture)] https://download.docker.com/linux/debian $(lsb_release -cs) stable\\\"\"\n                    $sh_c \"apt update -y\"\n                    $sh_c \"apt install -y docker-ce\"\n                ;;\n                *)\n                    curl -fsSL https://get.docker.com/ | $sh_c \"sh\"\n                ;;\n            esac\n        ;;\n        *)\n            curl -fsSL https://get.docker.com/ | $sh_c \"sh\"\n        ;;\n    esac\n\n    if ! command_exists docker; then\n        echo \"Failed to install Docker\"\n        exit 1\n    fi\n    if ! check_docker_version; then\n        echo \"Error: Docker 25+ is required. Please upgrade Docker.\"\n        exit 1\n    fi\n    start_docker\n    do_modify_daemon\n}\n\n# Check if we should use Podman based on distribution\ndetermine_container_engine() {\n    USE_PODMAN=\"false\"\n    case \"$lsb_dist\" in\n        fedora|centos|rhel|ol|sles|opensuse*)\n            USE_PODMAN=\"true\"\n            echo \"# Using Podman for $lsb_dist\"\n        ;;\n        *)\n            echo \"# Using Docker for $lsb_dist\"\n        ;;\n    esac\n}\n\n# Source init.sh to get distribution info\n. /etc/iofog/controller/init.sh\ninit\n\n# Configure container engine based on distribution\ndetermine_container_engine\n\n# Install appropriate container engine\ndo_install_container_engine\n\nif [ \"$PACKAGE_TYPE\" = \"deb\" ] || [ \"$PACKAGE_TYPE\" = \"rpm\" ]; then\n    do_set_datasance_repo\n    do_install_wasm_shim\nfi\n\necho \"# Installation completed successfully\""),
	}
	file10 := &embedded.EmbeddedFile{
		Filename:    "container-controller/install_iofog.sh",
		FileModTime: time.Unix(1770220967, 0),

		Content: string("#!/bin/sh\nset -x\nset -e\n\n# INSTALL_DIR=\"/opt/iofog\"\nTMP_DIR=\"/tmp/iofog\"\nETC_DIR=\"/etc/iofog/controller\"\nCONTROLLER_LOG_FOLDER=/var/log/iofog-controller\nCONTROLLER_CONTAINER_NAME=\"iofog-controller\"\n\ncommand_exists() {\n    command -v \"$1\" >/dev/null 2>&1\n}\n\ndo_stop_iofog_controller() {\n    if ! command_exists iofog-controller; then\n        return 0\n    fi\n    case \"${INIT_SYSTEM:-systemd}\" in\n        systemd)\n            sudo systemctl stop iofog-controller 2>/dev/null || true\n            ;;\n        sysvinit|openrc)\n            sudo service iofog-controller stop 2>/dev/null || sudo /etc/init.d/iofog-controller stop 2>/dev/null || true\n            ;;\n        s6)\n            sudo s6-svc -d /etc/s6/sv/iofog-controller 2>/dev/null || true\n            ;;\n        runit)\n            sudo sv stop iofog-controller 2>/dev/null || true\n            ;;\n        upstart)\n            sudo initctl stop iofog-controller 2>/dev/null || true\n            ;;\n        *)\n            sudo systemctl stop iofog-controller 2>/dev/null || sudo service iofog-controller stop 2>/dev/null || true\n            ;;\n    esac\n    (docker stop ${CONTROLLER_CONTAINER_NAME} 2>/dev/null || podman stop ${CONTROLLER_CONTAINER_NAME} 2>/dev/null) || true\n}\n\ndo_install_iofog_controller() {\n    echo \"# Installing ioFog controller...\"\n\n    for FOLDER in ${ETC_DIR} ${CONTROLLER_LOG_FOLDER}; do\n        if [ ! -d \"$FOLDER\" ]; then\n            echo \"Creating folder: $FOLDER\"\n            sudo mkdir -p \"$FOLDER\"\n            sudo chmod 775 \"$FOLDER\"\n        fi\n    done\n\n    USE_PODMAN=\"false\"\n    case \"$lsb_dist\" in\n        rhel|centos|fedora|ol|sles|opensuse*) USE_PODMAN=\"true\" ;;\n    esac\n\n    CONTROLLER_RUN_ARGS=\"-e IOFOG_CONTROLLER_IMAGE=${controller_image} --env-file ${ETC_DIR}/iofog-controller.env -v iofog-controller-db:/home/runner/.npm-global/lib/node_modules/@datasance/iofogcontroller/src/data/sqlite_files/:rw -v iofog-controller-log:/var/log/iofog-controller:rw -p 51121:51121 -p 80:8008 --stop-timeout 60 ${controller_image}\"\n\n    if [ \"${INIT_SYSTEM:-systemd}\" = \"systemd\" ]; then\n        if [ \"$USE_PODMAN\" = \"true\" ]; then\n            echo \"Creating Quadlet container file for ioFog controller...\"\n            sudo mkdir -p /etc/containers/systemd\n            cat <<EOF | sudo tee /etc/containers/systemd/iofog-controller.container > /dev/null\n[Unit]\nDescription=Datasance PoT IoFog Controller Service\nAfter=podman.service\nRequires=podman.service\n\n[Container]\nContainerName=${CONTROLLER_CONTAINER_NAME}\nImage=${controller_image}\nPodmanArgs=--stop-timeout=60\nEnvironment=IOFOG_CONTROLLER_IMAGE=${controller_image}\nEnvironmentFile=${ETC_DIR}/iofog-controller.env\nVolume=iofog-controller-db:/home/runner/.npm-global/lib/node_modules/@datasance/iofogcontroller/src/data/sqlite_files/:rw\nVolume=iofog-controller-log:/var/log/iofog-controller:rw\nPublishPort=51121:51121\nPublishPort=80:8008\nLogDriver=journald\n\n[Service]\nRestart=always\n\n[Install]\nWantedBy=default.target\nEOF\n            sudo systemctl daemon-reload\n            sudo systemctl restart podman 2>/dev/null || true\n            sudo systemctl enable iofog-controller.service\n            sudo systemctl start iofog-controller.service\n        else\n            echo \"Creating systemd service for ioFog controller...\"\n            cat <<EOF | sudo tee /etc/systemd/system/iofog-controller.service > /dev/null\n[Unit]\nDescription=Datasance PoT IoFog Controller Service\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nTimeoutStartSec=0\nRestart=always\nExecStartPre=-/usr/bin/docker rm -f ${CONTROLLER_CONTAINER_NAME}\nExecStart=/usr/bin/docker run --rm --name ${CONTROLLER_CONTAINER_NAME} \\\\\n${CONTROLLER_RUN_ARGS}\nExecStop=/usr/bin/docker stop ${CONTROLLER_CONTAINER_NAME}\n\n[Install]\nWantedBy=default.target\nEOF\n            sudo systemctl daemon-reload\n            sudo systemctl enable iofog-controller.service\n            sudo systemctl start iofog-controller.service\n        fi\n    else\n        if [ \"$USE_PODMAN\" = \"true\" ]; then\n            RUN_CMD=\"podman run --rm -d --name ${CONTROLLER_CONTAINER_NAME} ${CONTROLLER_RUN_ARGS}\"\n            RUN_CMD_FG=\"podman run --rm --name ${CONTROLLER_CONTAINER_NAME} ${CONTROLLER_RUN_ARGS}\"\n        else\n            RUN_CMD=\"docker run --rm -d --name ${CONTROLLER_CONTAINER_NAME} ${CONTROLLER_RUN_ARGS}\"\n            RUN_CMD_FG=\"docker run --rm --name ${CONTROLLER_CONTAINER_NAME} ${CONTROLLER_RUN_ARGS}\"\n        fi\n        if [ \"$USE_PODMAN\" = \"true\" ]; then\n            STOP_CMD=\"podman stop ${CONTROLLER_CONTAINER_NAME}\"\n        else\n            STOP_CMD=\"docker stop ${CONTROLLER_CONTAINER_NAME}\"\n        fi\n\n        case \"$INIT_SYSTEM\" in\n            sysvinit|openrc)\n                sudo tee /etc/init.d/iofog-controller > /dev/null <<INITSCRIPT\n#!/bin/sh\n### BEGIN INIT INFO\n# Provides:          iofog-controller\n# Required-Start:    \\$network \\$local_fs\n# Required-Stop:     \\$network \\$local_fs\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n### END INIT INFO\ncase \"\\$1\" in\n    start)\n        n=0; while [ \\$n -lt 30 ]; do [ -S /var/run/docker.sock ] || [ -S /run/podman/podman.sock ] && break; n=\\$((n+1)); sleep 1; done\n        [ -S /var/run/docker.sock ] || [ -S /run/podman/podman.sock ] || { echo \"Container engine socket not available\"; exit 1; }\n        if docker ps --format '{{.Names}}' 2>/dev/null | grep -q \"^${CONTROLLER_CONTAINER_NAME}\\$\"; then exit 0; fi\n        if podman ps --format '{{.Names}}' 2>/dev/null | grep -q \"^${CONTROLLER_CONTAINER_NAME}\\$\"; then exit 0; fi\n        $RUN_CMD\n        ;;\n    stop) $STOP_CMD 2>/dev/null || true ;;\n    restart) \\$0 stop; \\$0 start ;;\n    status)\n        if docker ps --format '{{.Names}}' 2>/dev/null | grep -q \"^${CONTROLLER_CONTAINER_NAME}\\$\"; then echo \"running\"; exit 0; fi\n        if podman ps --format '{{.Names}}' 2>/dev/null | grep -q \"^${CONTROLLER_CONTAINER_NAME}\\$\"; then echo \"running\"; exit 0; fi\n        echo \"stopped\"; exit 1\n        ;;\n    *) echo \"Usage: \\$0 {start|stop|restart|status}\"; exit 1 ;;\nesac\nexit 0\nINITSCRIPT\n                sudo chmod +x /etc/init.d/iofog-controller\n                if [ \"$INIT_SYSTEM\" = \"openrc\" ]; then\n                    sudo rc-update add iofog-controller default 2>/dev/null || true\n                    sudo rc-service iofog-controller start\n                else\n                    sudo update-rc.d iofog-controller defaults 2>/dev/null || sudo chkconfig iofog-controller on 2>/dev/null || true\n                    sudo service iofog-controller start 2>/dev/null || sudo /etc/init.d/iofog-controller start\n                fi\n                ;;\n            s6)\n                sudo mkdir -p /etc/s6/sv/iofog-controller\n                printf '#!/bin/sh\\nexec %s\\n' \"$RUN_CMD_FG\" | sudo tee /etc/s6/sv/iofog-controller/run > /dev/null\n                sudo chmod +x /etc/s6/sv/iofog-controller/run\n                [ -d /etc/s6/adminsv/default ] && sudo ln -sf /etc/s6/sv/iofog-controller /etc/s6/adminsv/default/iofog-controller 2>/dev/null || true\n                sudo s6-svc -u /etc/s6/sv/iofog-controller 2>/dev/null || true\n                ;;\n            runit)\n                sudo mkdir -p /etc/runit/sv/iofog-controller\n                printf '#!/bin/sh\\nexec %s\\n' \"$RUN_CMD_FG\" | sudo tee /etc/runit/sv/iofog-controller/run > /dev/null\n                sudo chmod +x /etc/runit/sv/iofog-controller/run\n                [ -d /var/service ] && sudo ln -sf /etc/runit/sv/iofog-controller /var/service/iofog-controller 2>/dev/null || true\n                [ -d /etc/runit/runsvdir/default ] && sudo ln -sf /etc/runit/sv/iofog-controller /etc/runit/runsvdir/default/iofog-controller 2>/dev/null || true\n                sudo sv start iofog-controller 2>/dev/null || true\n                ;;\n            upstart)\n                printf 'description \"IoFog Controller container\"\\nstart on runlevel [2345]\\nstop on runlevel [!2345]\\nrespawn\\nrespawn limit 10 5\\nexec %s\\n' \"$RUN_CMD_FG\" | sudo tee /etc/init/iofog-controller.conf > /dev/null\n                sudo initctl reload-configuration 2>/dev/null || true\n                sudo initctl start iofog-controller 2>/dev/null || true\n                ;;\n            *)\n                sudo tee /etc/init.d/iofog-controller > /dev/null <<INITSCRIPT\n#!/bin/sh\ncase \"\\$1\" in start) n=0; while [ \\$n -lt 30 ]; do [ -S /var/run/docker.sock ] || [ -S /run/podman/podman.sock ] && break; n=\\$((n+1)); sleep 1; done; [ -S /var/run/docker.sock ] || [ -S /run/podman/podman.sock ] || { echo \"Container engine socket not available\"; exit 1; }; $RUN_CMD ;; stop) $STOP_CMD ;; restart) $STOP_CMD; $RUN_CMD ;; *) echo \"Usage: \\$0 {start|stop|restart}\"; exit 1 ;; esac\nINITSCRIPT\n                sudo chmod +x /etc/init.d/iofog-controller\n                sudo /etc/init.d/iofog-controller start\n                ;;\n        esac\n    fi\n\n    EXECUTABLE_FILE=/usr/local/bin/iofog-controller\n    if [ \"$USE_PODMAN\" = \"true\" ]; then\n        cat <<'EOF' | sudo tee ${EXECUTABLE_FILE} > /dev/null\n#!/bin/sh\nCONTAINER_NAME=\"iofog-controller\"\nif ! podman ps --format '{{.Names}}' | grep -q \"^${CONTAINER_NAME}$\"; then\n    echo \"Error: The iofog-controller container is not running.\"\n    exit 1\nfi\nexec podman exec ${CONTAINER_NAME} iofog-controller \"$@\"\nEOF\n    else\n        cat <<'EOF' | sudo tee ${EXECUTABLE_FILE} > /dev/null\n#!/bin/sh\nCONTAINER_NAME=\"iofog-controller\"\nif ! docker ps --format '{{.Names}}' | grep -q \"^${CONTAINER_NAME}$\"; then\n    echo \"Error: The iofog-controller container is not running.\"\n    exit 1\nfi\nexec docker exec ${CONTAINER_NAME} iofog-controller \"$@\"\nEOF\n    fi\n    sudo chmod +x ${EXECUTABLE_FILE}\n\n    echo \"ioFog controller installation completed!\"\n}\n\n# main\ncontroller_image=\"$1\"\n\n. /etc/iofog/controller/init.sh\ninit\ndo_stop_iofog_controller\ndo_install_iofog_controller\n"),
	}
	file11 := &embedded.EmbeddedFile{
		Filename:    "container-controller/set_env.sh",
		FileModTime: time.Unix(1738603394, 0),

		Content: string("#!/bin/sh\nset -x\nset -e\n\nETC_DIR=\"/etc/iofog/controller\"\nENV_FILE_NAME=iofog-controller.env # Used as an env file in systemd\n\nENV_FILE=\"$ETC_DIR/$ENV_FILE_NAME\"\n\n# Create folder\nmkdir -p \"$ETC_DIR\"\n\n# Env file (for systemd)\nrm -f \"$ENV_FILE\"\ntouch \"$ENV_FILE\"\n\nfor var in \"$@\"\ndo\n  echo \"$var\" >> \"$ENV_FILE\"\ndone"),
	}
	file12 := &embedded.EmbeddedFile{
		Filename:    "container-controller/uninstall_iofog.sh",
		FileModTime: time.Unix(1770219289, 0),

		Content: string("#!/bin/sh\nset -x\nset -e\n\n\nCONTROLLER_LOG_DIR=\"iofog-controller-log\"\nCONTAINER_NAME=\"iofog-controller\"\nEXECUTABLE_FILE=/usr/local/bin/iofog-controller\nCONTROLLER_DB=iofog-controller-db\n\n\ndo_uninstall_controller() {\n    echo \"# Removing ioFog controller...\"\n\n    case \"$lsb_dist\" in\n        rhel|fedora|centos|ol|sles|opensuse*) CONTAINER_RUNTIME=\"podman\" ;;\n        *) CONTAINER_RUNTIME=\"docker\" ;;\n    esac\n\n    case \"${INIT_SYSTEM:-systemd}\" in\n        systemd)\n            for f in /etc/systemd/system/iofog-controller.service /etc/containers/systemd/iofog-controller.container; do\n                if [ -f \"$f\" ]; then\n                    echo \"Disabling and stopping systemd service...\"\n                    sudo systemctl stop iofog-controller.service 2>/dev/null || true\n                    sudo systemctl disable iofog-controller.service 2>/dev/null || true\n                    sudo rm -f \"$f\"\n                    sudo systemctl daemon-reload\n                    break\n                fi\n            done\n            ;;\n        sysvinit|openrc)\n            if [ -f /etc/init.d/iofog-controller ]; then\n                sudo service iofog-controller stop 2>/dev/null || sudo /etc/init.d/iofog-controller stop 2>/dev/null || true\n                [ \"$INIT_SYSTEM\" = \"openrc\" ] && sudo rc-update del iofog-controller default 2>/dev/null || true\n                sudo update-rc.d -f iofog-controller remove 2>/dev/null || sudo chkconfig --del iofog-controller 2>/dev/null || true\n                sudo rm -f /etc/init.d/iofog-controller\n            fi\n            ;;\n        s6)\n            sudo s6-svc -d /etc/s6/sv/iofog-controller 2>/dev/null || true\n            sudo rm -rf /etc/s6/sv/iofog-controller\n            [ -L /etc/s6/adminsv/default/iofog-controller ] && sudo rm -f /etc/s6/adminsv/default/iofog-controller\n            ;;\n        runit)\n            sudo sv stop iofog-controller 2>/dev/null || true\n            [ -L /var/service/iofog-controller ] && sudo rm -f /var/service/iofog-controller\n            [ -L /etc/runit/runsvdir/default/iofog-controller ] && sudo rm -f /etc/runit/runsvdir/default/iofog-controller\n            sudo rm -rf /etc/runit/sv/iofog-controller\n            ;;\n        upstart)\n            sudo initctl stop iofog-controller 2>/dev/null || true\n            sudo rm -f /etc/init/iofog-controller.conf\n            ;;\n        *)\n            sudo systemctl stop iofog-controller 2>/dev/null || true\n            sudo systemctl disable iofog-controller 2>/dev/null || true\n            sudo rm -f /etc/systemd/system/iofog-controller.service /etc/containers/systemd/iofog-controller.container\n            sudo systemctl daemon-reload 2>/dev/null || true\n            [ -f /etc/init.d/iofog-controller ] && sudo /etc/init.d/iofog-controller stop 2>/dev/null || true\n            sudo rm -f /etc/init.d/iofog-controller\n            ;;\n    esac\n\n    if sudo ${CONTAINER_RUNTIME} ps -a --format '{{.Names}}' 2>/dev/null | grep -q \"^${CONTAINER_NAME}$\"; then\n        echo \"Stopping and removing the ioFog controller container...\"\n        sudo ${CONTAINER_RUNTIME} stop ${CONTAINER_NAME} 2>/dev/null || true\n        sudo ${CONTAINER_RUNTIME} rm ${CONTAINER_NAME} 2>/dev/null || true\n    fi\n\n    # Remove config files\n    echo \"Checking if the ${CONTAINER_RUNTIME} volume exists...\"\n\n    if sudo ${CONTAINER_RUNTIME} volume inspect \"${CONTROLLER_DB}\" >/dev/null 2>&1; then\n        echo \"${CONTAINER_RUNTIME} volume '${CONTROLLER_DB}' found. Removing...\"\n        sudo ${CONTAINER_RUNTIME} volume rm \"${CONTROLLER_DB}\"\n        echo \"${CONTAINER_RUNTIME} volume '${CONTROLLER_DB}' has been removed.\"\n    else\n        echo \"${CONTAINER_RUNTIME} volume '${CONTROLLER_DB}' does not exist. Skipping removal.\"\n    fi\n\n    # Remove log files\n    echo \"Removing log files...\"\n    if sudo ${CONTAINER_RUNTIME} volume inspect \"${CONTROLLER_LOG_DIR}\" >/dev/null 2>&1; then\n        echo \"${CONTAINER_RUNTIME} volume '${CONTROLLER_LOG_DIR}' found. Removing...\"\n        sudo ${CONTAINER_RUNTIME} volume rm \"${CONTROLLER_LOG_DIR}\"\n        echo \"${CONTAINER_RUNTIME} volume '${CONTROLLER_LOG_DIR}' has been removed.\"\n    else\n        echo \"${CONTAINER_RUNTIME} volume '${CONTROLLER_LOG_DIR}' does not exist. Skipping removal.\"\n    fi\n\n\n    # Remove the executable script\n    if [ -f ${EXECUTABLE_FILE} ]; then\n        echo \"Removing the iofog-controller executable script...\"\n        sudo rm -f ${EXECUTABLE_FILE}\n    fi\n\n    echo \"ioFog controller uninstalled successfully!\"\n}\n\n. /etc/iofog/controller/init.sh\ninit\n\ndo_uninstall_controller"),
	}
	file14 := &embedded.EmbeddedFile{
		Filename:    "controller/check_prereqs.sh",
		FileModTime: time.Unix(1758624005, 0),

		Content: string("#!/bin/sh\nset -x\n\n# Check can sudo without password\nif ! $(sudo ls /tmp/ > /dev/null); then\n\tMSG=\"Unable to successfully use sudo with user $USER on this host.\\nUser $USER must be in sudoers group and using sudo without password must be enabled.\\nPlease see docs.datasance.com documentation for more details.\"\n\techo $MSG\n\texit 1\nfi\n"),
	}
	file15 := &embedded.EmbeddedFile{
		Filename:    "controller/install_iofog.sh",
		FileModTime: time.Unix(1738603394, 0),

		Content: string("#!/bin/sh\nset -x\nset -e\n\nINSTALL_DIR=\"/opt/iofog\"\nTMP_DIR=\"/tmp/iofog\"\nETC_DIR=\"/etc/iofog/controller\"\n\ncontroller_service() {\n    USE_SYSTEMD=`grep -m1 -c systemd /proc/1/comm`\n    USE_INITCTL=`which initctl | wc -l`\n    USE_SERVICE=`which service | wc -l`\n\n    if [ $USE_SYSTEMD -eq 1 ]; then\n        cp \"$ETC_DIR/service/iofog-controller.systemd\" /etc/systemd/system/iofog-controller.service\n        chmod 644 /etc/systemd/system/iofog-controller.service\n        systemctl daemon-reload\n        systemctl enable iofog-controller.service\n    elif [ $USE_INITCTL -eq 1 ]; then\n        cp \"$ETC_DIR/service/iofog-controller.initctl\" /etc/init/iofog-controller.conf\n        initctl reload-configuration\n    elif [ $USE_SERVICE -eq 1 ]; then\n        cp \"$ETC_DIR/service/iofog-controller.update-rc\" /etc/init.d/iofog-controller\n        chmod +x /etc/init.d/iofog-controller\n        update-rc.d iofog-controller defaults\n    else\n        echo \"Unable to setup Controller startup script.\"\n    fi\n}\n\ninstall_package() {\n\t\tif [ -z \"$(command -v apt)\" ]; then\n\t\t\techo \"Unsupported distro\"\n\t\t\texit 1\n\t\tfi\n\t\tapt update -qq\n\t\tapt install -y $1\n}\n\ninstall_deps() {\n\tif [ -z \"$(command -v curl)\" ]; then\n        install_package \"curl\"\n\tfi\n\n\tif [ -z \"$(command -v lsof)\" ]; then\n        install_package \"lsof\"\n\tfi\n\n\tif [ -z \"$(command -v make)\" ]; then\n        install_package \"build-essential\"\n\tfi\n\n\tif [ -z \"$(command -v python2)\" ]; then\n        install_package \"python2\"\n\tfi\n\n\tif [ -z \"$(command -v python3)\" ]; then\n        install_package \"python3\"\n\tfi\n\n\tif [ -z \"$(command -v python-is-python3)\" ]; then\n        install_package \"python-is-python3\"\n\tfi\n}\n\ncreate_logrotate() {\n    cat <<EOF > /etc/logrotate.d/iofog-controller\n/var/log/iofog-controller/iofog-controller.log {\n  rotate 10\n  size 100m\n  compress\n  notifempty\n  missingok\n  postrotate\n      kill -HUP `cat $INSTALL_DIR/controller/lib/node_modules/@datasance/iofogcontroller/src/iofog-controller.pid`\n}\nEOF\n    chmod 644 /etc/logrotate.d/iofog-controller\n}\n\ndeploy_controller() {\n\t# Nuke any existing instances\n\tif [ ! -z \"$(lsof -ti tcp:51121)\" ]; then\n\t\tlsof -ti tcp:51121 | xargs kill\n\tfi\n\n# #\t If token is provided, set up private repo\n# \tif [ ! -z $token ]; then\n# \t\tif [ ! -z $(npmrc | grep iofog) ]; then\n# \t\t\tnpmrc -c iofog\n# \t\t\tnpmrc iofog\n# \t\tfi\n# \t\tcurl -s https://\"$token\":@packagecloud.io/install/repositories/\"$repo\"/script.node.sh?package_id=7463817 | force_npm=1 bash\n# \t\tmv ~/.npmrc ~/.npmrcs/npmrc\n# \t\tln -s ~/.npmrcs/npmrc ~/.npmrc\n# \telse\n# \t\tnpmrc default\n# \tfi\n\t# Save DB\n\tif [ -f \"$INSTALL_DIR/controller/lib/node_modules/@datasance/iofogcontroller/package.json\" ]; then\n\t\t# If iofog-controller is not running, it will fail to stop - ignore that failure.\n\t\tnode $INSTALL_DIR/controller/lib/node_modules/@datasance/iofogcontroller/scripts/scripts-api.js preuninstall > /dev/null 2>&1 || true\n\tfi\n\n\t# Install in temporary location\n\tmkdir -p \"$TMP_DIR/controller\"\n\tchmod 0777 \"$TMP_DIR/controller\"\n\tif [ -z $version ]; then\n\t\tnpm install -g -f @datasance/iofogcontroller --unsafe-perm --prefix \"$TMP_DIR/controller\"\n\telse\n\t\tnpm install -g -f @datasance/iofogcontroller --unsafe-perm --prefix \"$TMP_DIR/controller\"\n\tfi\n\t# Move files into $INSTALL_DIR/controller\n\tmkdir -p \"$INSTALL_DIR/\"\n\trm -rf \"$INSTALL_DIR/controller\" # Clean possible previous install\n\tmv \"$TMP_DIR/controller/\" \"$INSTALL_DIR/\"\n\n\t# Restore DB\n\tif [ -f \"$INSTALL_DIR/controller/lib/node_modules/@datasance/iofogcontroller/package.json\" ]; then\n\t\tnode $INSTALL_DIR/controller/lib/node_modules/@datasance/iofogcontroller/scripts/scripts-api.js postinstall > /dev/null 2>&1 || true\n\tfi\n\n\t# Symbolic links\n\tif [ ! -f \"/usr/local/bin/iofog-controller\" ]; then\n\t\tln -fFs \"$INSTALL_DIR/controller/bin/iofog-controller\" /usr/local/bin/iofog-controller\n\tfi\n\n\t# Set controller permissions\n\tchmod 744 -R \"$INSTALL_DIR/controller\"\n\n\t# Startup script\n\tcontroller_service\n\n\t# Run controller\n\t. /opt/iofog/config/controller/env.sh\n\tiofog-controller start\n}\n\n# main\nversion=\"$1\"\n# repo=$([ -z \"$2\" ] && echo \"iofog/iofog-controller-snapshots\" || echo \"$2\")\n# token=\"$3\"\n\ninstall_deps\ncreate_logrotate\ndeploy_controller\n"),
	}
	file16 := &embedded.EmbeddedFile{
		Filename:    "controller/install_node.sh",
		FileModTime: time.Unix(1735589285, 0),

		Content: string("#!/bin/sh\nset -x\nset -e\n\nload_existing_nvm() {\n\tset +e\n\tif [ -z \"$(command -v nvm)\" ]; then\n\t\texport NVM_DIR=\"${HOME}/.nvm\"\n\t\tmkdir -p $NVM_DIR\n\t\tif [ -f \"$NVM_DIR/nvm.sh\" ]; then\n\t\t\t[ -s \"$NVM_DIR/nvm.sh\" ] && \\. \"$NVM_DIR/nvm.sh\" # This loads nvm\n\t\tfi\n\tfi\n\tset -e\n}\n\ninstall_node() {\n\tload_existing_nvm\n\tif [ -z \"$(command -v nvm)\" ]; then\n\t\tcurl -o- https://raw.githubusercontent.com/nvm-sh/nvm/refs/tags/v0.40.1/install.sh | bash\n\t\texport NVM_DIR=\"${HOME}/.nvm\"\n\t\t[ -s \"$NVM_DIR/nvm.sh\" ] && \\. \"$NVM_DIR/nvm.sh\"\n\tfi\n\tnvm install  v20.17.0\n\tnvm use  v20.17.0\n\tln -Ffs $(which node) /usr/local/bin/node\n\tln -Ffs $(which npm) /usr/local/bin/npm\n\n\t# npmrc\n\tif [ -z \"$(command -v npmrc)\" ]; then\n\t\tnpm i npmrc -g\n\tfi\n\tln -Ffs $(which npmrc) /usr/local/bin/npmrc\n}\n\ninstall_node"),
	}
	file18 := &embedded.EmbeddedFile{
		Filename:    "controller/service/iofog-controller.initctl",
		FileModTime: time.Unix(1681101988, 0),

		Content: string("description \"ioFog Controller\"\n\nstart on (runlevel [2345])\nstop on (runlevel [!2345])\n\nrespawn\n\nscript\n  . /opt/iofog/config/controller/env.sh\n  exec /usr/local/bin/iofog-controller start\nend script"),
	}
	file19 := &embedded.EmbeddedFile{
		Filename:    "controller/service/iofog-controller.systemd",
		FileModTime: time.Unix(1681101988, 0),

		Content: string("[Unit]\nDescription=ioFog Controller\n\n[Service]\nType=forking\nExecStart=/usr/local/bin/iofog-controller start\nExecStop=/usr/local/bin/iofog-controller stop\nEnvironmentFile=/opt/iofog/config/controller/env.env\n\n[Install]\nWantedBy=multi-user.target\n"),
	}
	file1a := &embedded.EmbeddedFile{
		Filename:    "controller/service/iofog-controller.update-rc",
		FileModTime: time.Unix(1681101988, 0),

		Content: string("#!/bin/sh\n\ncase \"$1\" in\n  start)\n    . /opt/iofog/controller/env.env\n    /usr/local/bin/iofog-controller start\n    ;;\n  stop)\n    /usr/local/bin/iofog-controller stop\n    ;;\n  restart)\n    /usr/local/bin/iofog-controller stop\n    . /opt/iofog/config/controller/env.sh\n    /usr/local/bin/iofog-controller start\n    ;;\n  *)\n    echo \"Usage: $0 {start|stop|restart}\"\nesac\n"),
	}
	file1b := &embedded.EmbeddedFile{
		Filename:    "controller/set_env.sh",
		FileModTime: time.Unix(1681101988, 0),

		Content: string("#!/bin/sh\nset -x\nset -e\n\nCONF_FOLDER=/opt/iofog/config/controller\nSOURCE_FILE_NAME=env.sh # Used to source env variables\nENV_FILE_NAME=env.env # Used as an env file in systemd\n\nSOURCE_FILE=\"$CONF_FOLDER/$SOURCE_FILE_NAME\"\nENV_FILE=\"$CONF_FOLDER/$ENV_FILE_NAME\"\n\n# Create folder\nmkdir -p \"$CONF_FOLDER\"\n\n# Source file\necho \"#!/bin/sh\" > \"$SOURCE_FILE\"\n\n# Env file (for systemd)\nrm -f \"$ENV_FILE\"\ntouch \"$ENV_FILE\"\n\nfor var in \"$@\"\ndo\n  echo \"export $var\" >> \"$SOURCE_FILE\"\n  echo \"$var\" >> \"$ENV_FILE\"\ndone"),
	}
	file1c := &embedded.EmbeddedFile{
		Filename:    "controller/uninstall_iofog.sh",
		FileModTime: time.Unix(1681101988, 0),

		Content: string("#!/bin/sh\nset -x\nset -e\n\nCONTROLLER_DIR=\"/opt/iofog/controller/\"\nCONTROLLER_LOG_DIR=\"/var/log/iofog/\"\n\ndo_uninstall_controller() {\n  # Remove folders\n  sudo rm -rf $CONTROLLER_DIR\n  sudo rm -rf $CONTROLLER_LOG_DIR\n\n  # Remove symbolic links\n  rm -f /usr/local/bin/iofog-controller\n\n  # Remove service files\n  USE_SYSTEMD=`grep -m1 -c systemd /proc/1/comm`\n  USE_INITCTL=`which initctl | wc -l`\n  USE_SERVICE=`which service | wc -l`\n\n  if [ $USE_SYSTEMD -eq 1 ]; then\n    systemctl stop iofog-controller.service\n    rm -f /etc/systemd/system/iofog-controller.service\n  elif [ $USE_INITCTL -eq 1 ]; then\n    rm -f /etc/init/iofog-controller.conf\n  elif [ $USE_SERVICE -eq 1 ]; then\n    rm -f /etc/init.d/iofog-controller\n  else\n    echo \"Unable to setup Controller startup script.\"\n  fi\n}\n\ndo_uninstall_controller"),
	}

	// define dirs
	dir1 := &embedded.EmbeddedDir{
		Filename:   "",
		DirModTime: time.Unix(1767396636, 0),
		ChildFiles: []*embedded.EmbeddedFile{
			file2, // ".DS_Store"

		},
	}
	dir3 := &embedded.EmbeddedDir{
		Filename:   "agent",
		DirModTime: time.Unix(1761996233, 0),
		ChildFiles: []*embedded.EmbeddedFile{
			file4, // "agent/check_prereqs.sh"
			file5, // "agent/init.sh"
			file6, // "agent/install_container_engine.sh"
			file7, // "agent/install_deps.sh"
			file8, // "agent/install_iofog.sh"
			file9, // "agent/install_java.sh"
			filea, // "agent/uninstall_iofog.sh"

		},
	}
	dirb := &embedded.EmbeddedDir{
		Filename:   "airgap-agent",
		DirModTime: time.Unix(1767396751, 0),
		ChildFiles: []*embedded.EmbeddedFile{
			filec, // "airgap-agent/check_prereqs.sh"
			filed, // "airgap-agent/init.sh"
			filee, // "airgap-agent/install_container_engine.sh"
			filef, // "airgap-agent/install_deps.sh"
			fileg, // "airgap-agent/install_iofog.sh"
			fileh, // "airgap-agent/uninstall_iofog.sh"

		},
	}
	diri := &embedded.EmbeddedDir{
		Filename:   "airgap-controller",
		DirModTime: time.Unix(1767396707, 0),
		ChildFiles: []*embedded.EmbeddedFile{
			filej, // "airgap-controller/check_prereqs.sh"
			filek, // "airgap-controller/init.sh"
			filel, // "airgap-controller/install_container_engine.sh"
			filem, // "airgap-controller/install_iofog.sh"
			filen, // "airgap-controller/set_env.sh"
			fileo, // "airgap-controller/uninstall_iofog.sh"

		},
	}
	dirp := &embedded.EmbeddedDir{
		Filename:   "container-agent",
		DirModTime: time.Unix(1761996236, 0),
		ChildFiles: []*embedded.EmbeddedFile{
			fileq, // "container-agent/check_prereqs.sh"
			filer, // "container-agent/init.sh"
			files, // "container-agent/install_container_engine.sh"
			filet, // "container-agent/install_deps.sh"
			fileu, // "container-agent/install_iofog.sh"
			filev, // "container-agent/uninstall_iofog.sh"

		},
	}
	dirw := &embedded.EmbeddedDir{
		Filename:   "container-controller",
		DirModTime: time.Unix(1761996244, 0),
		ChildFiles: []*embedded.EmbeddedFile{
			filex,  // "container-controller/check_prereqs.sh"
			filey,  // "container-controller/init.sh"
			filez,  // "container-controller/install_container_engine.sh"
			file10, // "container-controller/install_iofog.sh"
			file11, // "container-controller/set_env.sh"
			file12, // "container-controller/uninstall_iofog.sh"

		},
	}
	dir13 := &embedded.EmbeddedDir{
		Filename:   "controller",
		DirModTime: time.Unix(1738603394, 0),
		ChildFiles: []*embedded.EmbeddedFile{
			file14, // "controller/check_prereqs.sh"
			file15, // "controller/install_iofog.sh"
			file16, // "controller/install_node.sh"
			file1b, // "controller/set_env.sh"
			file1c, // "controller/uninstall_iofog.sh"

		},
	}
	dir17 := &embedded.EmbeddedDir{
		Filename:   "controller/service",
		DirModTime: time.Unix(1681101988, 0),
		ChildFiles: []*embedded.EmbeddedFile{
			file18, // "controller/service/iofog-controller.initctl"
			file19, // "controller/service/iofog-controller.systemd"
			file1a, // "controller/service/iofog-controller.update-rc"

		},
	}

	// link ChildDirs
	dir1.ChildDirs = []*embedded.EmbeddedDir{
		dir3,  // "agent"
		dirb,  // "airgap-agent"
		diri,  // "airgap-controller"
		dirp,  // "container-agent"
		dirw,  // "container-controller"
		dir13, // "controller"

	}
	dir3.ChildDirs = []*embedded.EmbeddedDir{}
	dirb.ChildDirs = []*embedded.EmbeddedDir{}
	diri.ChildDirs = []*embedded.EmbeddedDir{}
	dirp.ChildDirs = []*embedded.EmbeddedDir{}
	dirw.ChildDirs = []*embedded.EmbeddedDir{}
	dir13.ChildDirs = []*embedded.EmbeddedDir{
		dir17, // "controller/service"

	}
	dir17.ChildDirs = []*embedded.EmbeddedDir{}

	// register embeddedBox
	embedded.RegisterEmbeddedBox(`../../assets`, &embedded.EmbeddedBox{
		Name: `../../assets`,
		Time: time.Unix(1767396636, 0),
		Dirs: map[string]*embedded.EmbeddedDir{
			"":                     dir1,
			"agent":                dir3,
			"airgap-agent":         dirb,
			"airgap-controller":    diri,
			"container-agent":      dirp,
			"container-controller": dirw,
			"controller":           dir13,
			"controller/service":   dir17,
		},
		Files: map[string]*embedded.EmbeddedFile{
			".DS_Store":                                        file2,
			"agent/check_prereqs.sh":                           file4,
			"agent/init.sh":                                    file5,
			"agent/install_container_engine.sh":                file6,
			"agent/install_deps.sh":                            file7,
			"agent/install_iofog.sh":                           file8,
			"agent/install_java.sh":                            file9,
			"agent/uninstall_iofog.sh":                         filea,
			"airgap-agent/check_prereqs.sh":                    filec,
			"airgap-agent/init.sh":                             filed,
			"airgap-agent/install_container_engine.sh":         filee,
			"airgap-agent/install_deps.sh":                     filef,
			"airgap-agent/install_iofog.sh":                    fileg,
			"airgap-agent/uninstall_iofog.sh":                  fileh,
			"airgap-controller/check_prereqs.sh":               filej,
			"airgap-controller/init.sh":                        filek,
			"airgap-controller/install_container_engine.sh":    filel,
			"airgap-controller/install_iofog.sh":               filem,
			"airgap-controller/set_env.sh":                     filen,
			"airgap-controller/uninstall_iofog.sh":             fileo,
			"container-agent/check_prereqs.sh":                 fileq,
			"container-agent/init.sh":                          filer,
			"container-agent/install_container_engine.sh":      files,
			"container-agent/install_deps.sh":                  filet,
			"container-agent/install_iofog.sh":                 fileu,
			"container-agent/uninstall_iofog.sh":               filev,
			"container-controller/check_prereqs.sh":            filex,
			"container-controller/init.sh":                     filey,
			"container-controller/install_container_engine.sh": filez,
			"container-controller/install_iofog.sh":            file10,
			"container-controller/set_env.sh":                  file11,
			"container-controller/uninstall_iofog.sh":          file12,
			"controller/check_prereqs.sh":                      file14,
			"controller/install_iofog.sh":                      file15,
			"controller/install_node.sh":                       file16,
			"controller/service/iofog-controller.initctl":      file18,
			"controller/service/iofog-controller.systemd":      file19,
			"controller/service/iofog-controller.update-rc":    file1a,
			"controller/set_env.sh":                            file1b,
			"controller/uninstall_iofog.sh":                    file1c,
		},
	})
}
